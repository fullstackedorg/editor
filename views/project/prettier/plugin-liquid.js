var oo=Object.create;var Zr=Object.defineProperty;var so=Object.getOwnPropertyDescriptor;var lo=Object.getOwnPropertyNames;var co=Object.getPrototypeOf,po=Object.prototype.hasOwnProperty;var L=(e,t)=>()=>(e&&(t=e(e=0)),t);var pe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var mo=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of lo(t))!po.call(e,r)&&r!==i&&Zr(e,r,{get:()=>t[r],enumerable:!(n=so(t,r))||n.enumerable});return e};var Xr=(e,t,i)=>(i=e!=null?oo(co(e)):{},mo(t||!e||!e.__esModule?Zr(i,"default",{value:e,enumerable:!0}):i,e));var en=pe(v=>{"use strict";var De={};for(let e=0;e<128;e++)De[e]=String.fromCharCode(e);De[39]="\\'";De[34]='\\"';De[92]="\\\\";De[8]="\\b";De[12]="\\f";De[10]="\\n";De[13]="\\r";De[9]="\\t";De[11]="\\v";v.abstract=function(e){let t=e||"";return function(){throw new Error("this method "+t+" is abstract! (it has no implementation in class "+this.constructor.name+")")}};v.assert=function(e,t){if(!e)throw new Error(t||"Assertion failed")};v.defineLazyProperty=function(e,t,i){let n;Object.defineProperty(e,t,{get(){return n||(n=i.call(this)),n}})};v.clone=function(e){return e&&Object.assign({},e)};v.repeatFn=function(e,t){let i=[];for(;t-- >0;)i.push(e());return i};v.repeatStr=function(e,t){return new Array(t+1).join(e)};v.repeat=function(e,t){return v.repeatFn(()=>e,t)};v.getDuplicates=function(e){let t=[];for(let i=0;i<e.length;i++){let n=e[i];e.lastIndexOf(n)!==i&&t.indexOf(n)<0&&t.push(n)}return t};v.copyWithoutDuplicates=function(e){let t=[];return e.forEach(i=>{t.indexOf(i)<0&&t.push(i)}),t};v.isSyntactic=function(e){let t=e[0];return t===t.toUpperCase()};v.isLexical=function(e){return!v.isSyntactic(e)};v.padLeft=function(e,t,i){let n=i||" ";return e.length<t?v.repeatStr(n,t-e.length)+e:e};v.StringBuffer=function(){this.strings=[]};v.StringBuffer.prototype.append=function(e){this.strings.push(e)};v.StringBuffer.prototype.contents=function(){return this.strings.join("")};var yi=e=>String.fromCodePoint(parseInt(e,16));v.unescapeCodePoint=function(e){if(e.charAt(0)==="\\")switch(e.charAt(1)){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"x":return yi(e.slice(2,4));case"u":return e.charAt(2)==="{"?yi(e.slice(3,-1)):yi(e.slice(2,6));default:return e.charAt(1)}else return e};v.unexpectedObjToString=function(e){if(e==null)return String(e);let t=Object.prototype.toString.call(e);try{let i;return e.constructor&&e.constructor.name?i=e.constructor.name:t.indexOf("[object ")===0?i=t.slice(8,-1):i=typeof e,i+": "+JSON.stringify(String(e))}catch{return t}}});var on=pe((cd,an)=>{"use strict";var{assert:Ve}=en();function go(e,t,i){return i(t[e])}function ho(e,t,i){return t[e].map(i)}function tn(e){let t=e.split(/ ?\[\]/);return t.length===2?ho.bind(null,t[0]):go.bind(null,e)}function rn(e,t,i){return e.map(n=>n(t,i))}function fo(e){return typeof e=="string"?rn.bind(null,[tn(e)]):Array.isArray(e)?rn.bind(null,e.map(tn)):(Ve(typeof e=="function","Expected a string, Array, or function"),Ve(e.length===2,"Expected a function of arity 2, got "+e.length),e)}function nn(e){return/^[a-zA-Z_][0-9a-zA-Z_]*$/.test(e)}function un(e){return e.trim()}function Do(e){let t=e.split(/[()]/).map(un);if(t.length===3&&t[2]===""){let i=t[0],n=[];if(t[1].length>0&&(n=t[1].split(",").map(un)),nn(i)&&n.every(nn))return{name:i,formals:n}}throw new Error("Invalid operation signature: "+e)}function Vt(e){this._shapes=e.shapes,this._getTag=e.getTag,this.Adapter=function(t,i){this._adaptee=t,this._family=i},this.Adapter.prototype.valueOf=function(){throw new Error("heeey!")},this.operations={},this._arities=Object.create(null),this._getChildren=Object.create(null),Object.keys(this._shapes).forEach(t=>{let i=this._shapes[t];this._getChildren[t]=fo(i),typeof i!="function"&&(this._arities[t]=Array.isArray(i)?i.length:1)}),this._wrap=t=>new this.Adapter(t,this)}Vt.prototype.wrap=function(e){return this._wrap(e)};Vt.prototype._checkActionDict=function(e){Object.keys(e).forEach(t=>{Ve(t in this._getChildren,"Unrecognized action name '"+t+"'");let i=e[t];if(Ve(typeof i=="function","Key '"+t+"': expected function, got "+i),t in this._arities){let n=this._arities[t],r=e[t].length;Ve(r===n,"Action '"+t+"' has the wrong arity: expected "+n+", got "+r)}})};Vt.prototype.addOperation=function(e,t){let i=Do(e),{name:n}=i;this._checkActionDict(t),this.operations[n]={name:n,formals:i.formals,actions:t};let r=this;return this.Adapter.prototype[n]=function(...u){let a=r._getTag(this._adaptee);Ve(a in r._getChildren,"getTag returned unrecognized tag '"+a+"'"),Ve(a in t,"No action for '"+a+"' in operation '"+n+"'");let o=Object.create(null);for(let[l,c]of Object.entries(u))o[i.formals[l]]=c;let p=this.args;this.args=o;let d=t[a].apply(this,r._getChildren[a](this._adaptee,r._wrap));return this.args=p,d},this};an.exports=Vt});var Ei=pe((pd,ln)=>{"use strict";var sn={_terminal(){return this.sourceString},_nonterminal(...e){let{ctorName:t}=this._node,{mapping:i}=this.args;if(!Object.prototype.hasOwnProperty.call(i,t)){if(this.isLexical())return this.sourceString;let u=e.filter(a=>!a.isTerminal());if(u.length===1)return u[0].toAST(i)}if(typeof i[t]=="number")return e[i[t]].toAST(i);let n=i[t]||e,r={type:t};for(let u in n){let a=i[t]&&i[t][u];typeof a=="number"?r[u]=e[a].toAST(i):typeof a=="string"||typeof a=="boolean"||a===null?r[u]=a:typeof a=="object"&&a instanceof Number?r[u]=Number(a):typeof a=="function"?r[u]=a.call(this,e):a===void 0&&(e[u]&&!e[u].isTerminal()?r[u]=e[u].toAST(i):delete r[u])}return r},_iter(...e){return this._node.isOptional()?this.numChildren===0?null:e[0].toAST(this.args.mapping):e.map(function(t){return t.toAST(this.args.mapping)},this)},NonemptyListOf(e,t,i){return[e.toAST(this.args.mapping)].concat(i.toAST(this.args.mapping))},EmptyListOf(){return[]}};function Co(e,t){if(typeof e.failed!="function"||e.failed())throw new Error("toAST() expects a succesful MatchResult as first parameter");t=Object.assign({},t);let i=Object.assign({},sn);for(let u in t)typeof t[u]=="function"&&(i[u]=t[u],delete t[u]);return e._cst.grammar.createSemantics().addOperation("toAST(mapping)",i)(e).toAST(t)}function Ao(e){if(typeof e.createSemantics!="function")throw new Error("semanticsToAST() expects a Grammar as parameter");return e.createSemantics().addOperation("toAST(mapping)",sn)}ln.exports={helper:Co,semantics:Ao}});var pn=pe((dd,cn)=>{"use strict";cn.exports={VisitorFamily:on(),semanticsForToAST:Ei().semantics,toAST:Ei().helper}});function yo(e){return e==="description"||e==="string"||e==="code"}function U(e,t,i){if(!yo(i))throw new Error("invalid Failure type: "+i);this.pexpr=e,this.text=t,this.type=i,this.fluffy=!1}function te(){}function F(e,t){let i;return t?(i=new Error(t.getLineAndColumnMessage()+e),i.shortMessage=e,i.interval=t):i=new Error(e),i}function Bo(){return F("Interval sources don't match")}function vo(e){let t=new Error;return Object.defineProperty(t,"message",{enumerable:!0,get(){return e.message}}),Object.defineProperty(t,"shortMessage",{enumerable:!0,get(){return"Expected "+e.getExpectedText()}}),t.interval=e.getInterval(),t}function ko(e,t,i){let n=t?"Grammar "+e+" is not declared in namespace "+Fo.toString(t):"Undeclared grammar "+e;return F(n,i)}function Io(e,t){return F("Grammar "+e.name+" is already declared in this namespace")}function wo(e,t,i){return F("Rule "+e+" is not declared in grammar "+t,i)}function Po(e,t,i){return F("Cannot override rule "+e+" because it is not declared in "+t,i)}function Oo(e,t,i){return F("Cannot extend rule "+e+" because it is not declared in "+t,i)}function Ro(e,t,i,n){let r="Duplicate declaration for rule '"+e+"' in grammar '"+t+"'";return t!==i&&(r+=" (originally declared in '"+i+"')"),F(r,n)}function Ho(e,t,i,n){return F("Wrong number of parameters for rule "+e+" (expected "+t+", got "+i+")",n)}function _o(e,t,i,n){return F("Wrong number of arguments for rule "+e+" (expected "+t+", got "+i+")",n)}function Mo(e,t,i){return F("Duplicate parameter names in rule "+e+": "+t.join(", "),i)}function Vo(e,t){return F("Invalid parameter to rule "+e+": "+t+" has arity "+t.getArity()+", but parameter expressions must have arity 1",t.source)}function jo(e,t){return F("Cannot apply syntactic rule "+e+" from here (inside a lexical context)",t.source)}function Go(e){let{ruleName:t}=e;return F(`applySyntactic is for syntactic rules, but '${t}' is a lexical rule. `+Wo,e.source)}function $o(e){return F("applySyntactic is not required here (in a syntactic context)",e.source)}function Uo(e,t){return F("Incorrect argument type: expected "+e,t.source)}function Qo(e){return F("'...' can appear at most once in a rule body",e.source)}function zo(e){let t=e._node;qo(t&&t.isNonterminal()&&t.ctorName==="escapeChar_unicodeCodePoint");let i=e.children.slice(1,-1).map(r=>r.source),n=i[0].coverageWith(...i.slice(1));return F(`U+${n.contents} is not a valid Unicode code point`,n)}function Ko(e,t){let i=t.length>0?t[t.length-1].args:[],r="Nullable expression "+e.expr.substituteParams(i)+" is not allowed inside '"+e.operator+"' (possible infinite loop)";if(t.length>0){let u=t.map(a=>new No.Apply(a.ruleName,a.args)).join(`
`);r+=`
Application stack (most recent application last):
`+u}return F(r,e.expr.source)}function Yo(e,t,i,n){return F("Rule "+e+" involves an alternation which has inconsistent arity (expected "+t+", got "+i+")",n.source)}function Jo(e){return F("Object pattern has duplicate property names: "+e.join(", "))}function Zo(e,t,i){return F("Attempt to invoke constructor "+t+" with invalid or unexpected arguments")}function Xo(e){let t=e.map(i=>i.message);return F(["Errors:"].concat(t).join(`
- `),e[0].interval)}function es(e,t,i,n){let r=n.slice(0,-1).map(p=>{let d="  "+p[0].name+" > "+p[1];return p.length===3?d+" for '"+p[2]+"'":d}).join(`
`);r+=`
  `+t+" > "+e;let u="";e==="_iter"&&(u=[`
NOTE: as of Ohm v16, there is no default action for iteration nodes \u2014 see `,"  https://ohmjs.org/d/dsa for details."].join(`
`));let a=[`Missing semantic action for '${e}' in ${i} '${t}'.${u}`,"Action stack (most recent call last):",r].join(`
`),o=F(a);return o.name="missingSemanticAction",o}function W(e,t,i){this.sourceString=e,this.startIdx=t,this.endIdx=i}function hs(e){return zi.repeat(" ",e).join("")}function fs(e,t,i){let n=kn(e.slice(t,t+i));return n.length<i?n+zi.repeat(" ",i-n.length).join(""):n}function kn(e){return typeof e=="string"?e.replace(/ /g,cs).replace(/\t/g,ds).replace(/\n/g,ms).replace(/\r/g,gs):String(e)}function ae(e,t,i,n,r,u,a){this.input=e,this.pos=this.pos1=t,this.pos2=i,this.source=new os(e,t,i),this.expr=n,this.bindings=u,this.children=a||[],this.terminatingLREntry=null,this._flags=r?Mi.succeeded:0}function me(e,t){let i={};if(e.source&&t){let n=e.source.relativeTo(t);i.sourceInterval=[n.startIdx,n.endIdx]}return i}function gn(e){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)}function Yi(e){let t=Object.create(null);e.forEach(i=>{t[i]=(t[i]||0)+1}),Object.keys(t).forEach(i=>{if(t[i]<=1)return;let n=1;e.forEach((r,u)=>{r===i&&(e[u]=r+"_"+n++)})})}function On(e){this.source=e,this.pos=0,this.examinedLength=0}function ke(e,t,i,n,r,u,a){this.matcher=e,this.input=t,this.startExpr=i,this._cst=n,this._cstOffset=r,this._rightmostFailurePosition=u,this._rightmostFailures=a,this.failed()&&(Wi.defineLazyProperty(this,"message",function(){let o="Expected "+this.getExpectedText();return hn.getLineAndColumnMessage(this.input,this.getRightmostFailurePosition())+o}),Wi.defineLazyProperty(this,"shortMessage",function(){let o="expected "+this.getExpectedText(),p=hn.getLineAndColumn(this.input,this.getRightmostFailurePosition());return"Line "+p.lineNum+", col "+p.colNum+": "+o}))}function Hn(){this.applicationMemoKeyStack=[],this.memo={},this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,this.currentLeftRecursion=void 0}function Mn(e,t,i){this.matcher=e,this.startExpr=t,this.grammar=e.grammar,this.input=e.input,this.inputStream=new _s(e.input),this.memoTable=e.memoTable,this._bindings=[],this._bindingOffsets=[],this._applicationStack=[],this._posStack=[0],this.inLexifiedContextStack=[!1],this.rightmostFailurePosition=-1,this._rightmostFailurePositionStack=[],this._recordedFailuresStack=[],i!==void 0&&(this.positionToRecordFailures=i,this.recordedFailures=Object.create(null))}function Ie(e){this.grammar=e,this.memoTable=[],this.input=""}function _(e,t){let i=this;if(this.grammar=e,this.checkedActionDicts=!1,this.Wrapper=class extends(t?t.Wrapper:jt){constructor(n,r,u){super(n,r,u),i.checkActionDictsIfHaventAlready(),this._semantics=i}},this.super=t,t){if(!(e.equals(this.super.grammar)||e._inheritsFrom(this.super.grammar)))throw new Error("Cannot extend a semantics for grammar '"+this.super.grammar.name+"' for use with grammar '"+e.name+"' (not a sub-grammar)");this.operations=Object.create(this.super.operations),this.attributes=Object.create(this.super.attributes),this.attributeKeys=Object.create(null);for(let n in this.attributes)Object.defineProperty(this.attributeKeys,n,{value:Vn.uniqueId(n)})}else this.operations=Object.create(null),this.attributes=Object.create(null),this.attributeKeys=Object.create(null)}function Wn(e,t){if(!_.prototypeGrammar)return Zi.assert(e.indexOf("(")===-1),{name:e,formals:[]};let i=_.prototypeGrammar.match(e,t==="operation"?"OperationSignature":"AttributeSignature");if(i.failed())throw new Error(i.message);return _.prototypeGrammarSemantics(i).parse()}function Js(e,t,i){return function(...n){let u=(this._semantics.operations[t]||this._semantics.attributes[t]).formals.map(a=>this.args[a]);if(!this.isIteration()&&n.length===1)return i.apply(n[0],u);throw Ys.missingSemanticAction(this.ctorName,t,e,yt)}}function En(e){return Object.keys(e.rules).sort().map(t=>e.rules[t])}function We(e,t,i,n){if(this.name=e,this.superGrammar=t,this.rules=i,n){if(!(n in i))throw new Error("Invalid start rule: '"+n+"' is not a rule in grammar '"+e+"'");this.defaultStartRule=n}}function re(e){this.name=e}function Qn(){}function bl(e){return typeof e=="function"?e.call(new Ln):(typeof e=="string"&&(e=JSON.parse(e)),new Ln().fromRecipe(e))}function kl(e){let t={empty(){return this.iteration()},nonEmpty(i,n,r){return this.iteration([i].concat(r.children))}};Gt.BuiltInSemantics=Gt.createSemantics(e,null).addOperation("asIteration",{emptyListOf:t.empty,nonemptyListOf:t.nonEmpty,EmptyListOf:t.empty,NonemptyListOf:t.nonEmpty})}function Il(e){Gt.prototypeGrammarSemantics=e.createSemantics().addOperation("parse",{AttributeSignature(t){return{name:t.parse(),formals:[]}},OperationSignature(t,i){return{name:t.parse(),formals:i.children.map(n=>n.parse())[0]||[]}},Formals(t,i,n){return i.asIteration().children.map(r=>r.parse())},name(t,i){return this.sourceString}}),Gt.prototypeGrammar=e}function rr(e,t,i){let n=new Ol,r,u,a,o=!1;return(i||Qt).createSemantics().addOperation("visit",{Grammars(l){return l.children.map(c=>c.visit())},Grammar(l,c,m,g,h){let A=l.visit();r=n.newGrammar(A,t),c.child(0)&&c.child(0).visit(),g.children.map(s=>s.visit());let y=r.build();if(y.source=this.source.trimmed(),A in t)throw Et.duplicateGrammarDeclaration(y,t);return t[A]=y,y},SuperGrammar(l,c){let m=c.visit();if(m==="null")r.withSuperGrammar(null);else{if(!t||!(m in t))throw Et.undeclaredGrammar(m,t,c.source);r.withSuperGrammar(t[m])}},Rule_define(l,c,m,g,h){u=l.visit(),a=c.children.map(f=>f.visit())[0]||[],!r.defaultStartRule&&r.ensureSuperGrammar()!==er.ProtoBuiltInRules&&r.withDefaultStartRule(u);let A=h.visit(),y=m.children.map(f=>f.visit())[0],s=this.source.trimmed();return r.define(u,a,A,y,s)},Rule_override(l,c,m,g){u=l.visit(),a=c.children.map(y=>y.visit())[0]||[];let h=this.source.trimmed();r.ensureSuperGrammarRuleForOverriding(u,h),o=!0;let A=g.visit();return o=!1,r.override(u,a,A,null,h)},Rule_extend(l,c,m,g){u=l.visit(),a=c.children.map(y=>y.visit())[0]||[];let h=g.visit(),A=this.source.trimmed();return r.extend(u,a,h,null,A)},RuleBody(l,c){return n.alt(...c.visit()).withSource(this.source)},OverrideRuleBody(l,c){let m=c.visit(),g=m.indexOf(xi);if(g>=0){let h=m.slice(0,g),A=m.slice(g+1);return A.forEach(y=>{if(y===xi)throw Et.multipleSuperSplices(y)}),new tr.Splice(r.superGrammar,u,h,A).withSource(this.source)}else return n.alt(...m).withSource(this.source)},Formals(l,c,m){return c.visit()},Params(l,c,m){return c.visit()},Alt(l){return n.alt(...l.visit()).withSource(this.source)},TopLevelTerm_inline(l,c){let m=u+"_"+c.visit(),g=l.visit(),h=this.source.trimmed(),A=!(r.superGrammar&&r.superGrammar.rules[m]);o&&!A?r.override(m,a,g,null,h):r.define(m,a,g,null,h);let y=a.map(s=>n.app(s));return n.app(m,y).withSource(g.source)},OverrideTopLevelTerm_superSplice(l){return xi},Seq(l){return n.seq(...l.children.map(c=>c.visit())).withSource(this.source)},Iter_star(l,c){return n.star(l.visit()).withSource(this.source)},Iter_plus(l,c){return n.plus(l.visit()).withSource(this.source)},Iter_opt(l,c){return n.opt(l.visit()).withSource(this.source)},Pred_not(l,c){return n.not(c.visit()).withSource(this.source)},Pred_lookahead(l,c){return n.lookahead(c.visit()).withSource(this.source)},Lex_lex(l,c){return n.lex(c.visit()).withSource(this.source)},Base_application(l,c){let m=c.children.map(g=>g.visit())[0]||[];return n.app(l.visit(),m).withSource(this.source)},Base_range(l,c,m){return n.range(l.visit(),m.visit()).withSource(this.source)},Base_terminal(l){return n.terminal(l.visit()).withSource(this.source)},Base_paren(l,c,m){return c.visit()},ruleDescr(l,c,m){return c.visit()},ruleDescrText(l){return this.sourceString.trim()},caseName(l,c,m,g,h){return m.visit()},name(l,c){return this.sourceString},nameFirst(l){},nameRest(l){},terminal(l,c,m){return c.children.map(g=>g.visit()).join("")},oneCharTerminal(l,c,m){return c.visit()},escapeChar(l){try{return Kn.unescapeCodePoint(this.sourceString)}catch(c){throw c instanceof RangeError&&c.message.startsWith("Invalid code point ")?Et.invalidCodePoint(l):c}},NonemptyListOf(l,c,m){return[l.visit()].concat(m.children.map(g=>g.visit()))},EmptyListOf(){return[]},_terminal(){return this.sourceString}})(e).visit()}function Ml(e,t){let i=Qt.match(e,"Grammars");if(i.failed())throw Et.grammarSyntaxError(i);return rr(i,t)}function Vl(e,t){let i=Yn(e,t),n=Object.keys(i);if(n.length===0)throw new Error("Missing grammar definition");if(n.length>1){let u=i[n[1]].source;throw new Error(ir.getLineAndColumnMessage(u.sourceString,u.startIdx)+"Found more than one grammar definition -- use ohm.grammars() instead.")}return i[n[0]]}function Yn(e,t){let i=$i.extend($i.asNamespace(t));if(typeof e!="string")if(_l(e))e=e.toString();else throw new TypeError("Expected string as first argument, got "+Kn.unexpectedObjToString(e));return Ml(e,i),i}function Wl(e){throw new Error("grammarFromScriptElement was removed in Ohm v16.0. See https://ohmjs.org/d/gfs for more info.")}function jl(e){throw new Error("grammarsFromScriptElements was removed in Ohm v16.0. See https://ohmjs.org/d/gfs for more info.")}function Gl(e,t,i){return i(t[e])}function $l(e,t,i){return t[e].map(i)}function xn(e){let t=e.split(/ ?\[\]/);return t.length===2?$l.bind(null,t[0]):Gl.bind(null,e)}function bn(e,t,i){return e.map(n=>n(t,i))}function Ul(e){return typeof e=="string"?bn.bind(null,[xn(e)]):Array.isArray(e)?bn.bind(null,e.map(xn)):(je(typeof e=="function","Expected a string, Array, or function"),je(e.length===2,"Expected a function of arity 2, got "+e.length),e)}function Tn(e){return/^[a-zA-Z_][0-9a-zA-Z_]*$/.test(e)}function qn(e){return e.trim()}function Ql(e){let t=e.split(/[()]/).map(qn);if(t.length===3&&t[2]===""){let i=t[0],n=[];if(t[1].length>0&&(n=t[1].split(",").map(qn)),Tn(i)&&n.every(Tn))return{name:i,formals:n}}throw new Error("Invalid operation signature: "+e)}function zt(e){this._shapes=e.shapes,this._getTag=e.getTag,this.Adapter=function(t,i){this._adaptee=t,this._family=i},this.Adapter.prototype.valueOf=function(){throw new Error("heeey!")},this.operations={},this._arities=Object.create(null),this._getChildren=Object.create(null),Object.keys(this._shapes).forEach(t=>{let i=this._shapes[t];this._getChildren[t]=Ul(i),typeof i!="function"&&(this._arities[t]=Array.isArray(i)?i.length:1)}),this._wrap=t=>new this.Adapter(t,this)}function Kl(e,t){if(typeof e.failed!="function"||e.failed())throw new Error("toAST() expects a succesful MatchResult as first parameter");t=Object.assign({},t);let i=Object.assign({},Zn);for(let u in t)typeof t[u]=="function"&&(i[u]=t[u],delete t[u]);return e._cst.grammar.createSemantics().addOperation("toAST(mapping)",i)(e).toAST(t)}function Yl(e){if(typeof e.createSemantics!="function")throw new Error("semanticsToAST() expects a Grammar as parameter");return e.createSemantics().addOperation("toAST(mapping)",Zn)}var $t,Nn,x,dn,tt,bi,Ti,qi,Ui,E,Eo,So,Lo,M,xo,bo,Fi,Ni,Bi,St,vi,ki,Ii,it,rt,nt,ut,wi,Pi,Oi,Ri,Hi,To,K,Bn,qo,Fo,No,Wo,xe,ve,ts,Si,Ne,P,is,At,Wt,rs,vn,j,ns,us,G,as,_i,mn,Qi,os,zi,ss,ls,cs,ps,ds,ms,gs,Mi,In,Ds,wn,Cs,Ki,k,xt,As,ys,Es,Y,Ss,w,Ls,$,xs,O,bs,R,Pn,Q,Ts,qs,z,Ce,Fs,ie,Ns,J,$e,Bs,vs,ks,Is,ws,Vi,Ps,Os,Ji,Wi,hn,Rs,Rn,Hs,_s,Ms,Vs,Ws,ji,js,_n,Li,Gs,$s,fn,Us,Qs,zs,Ks,Zi,Ys,Vn,yt,Xi,jt,Ge,Lt,jn,Zs,Xs,Dn,Cn,An,de,yn,el,Gn,$n,Ut,Gi,tl,Un,Be,il,rl,nl,Sn,q,zn,ul,al,ol,sl,ll,cl,pl,dl,ml,gl,hl,fl,Dl,Cl,Al,yl,El,Sl,Ll,xl,bt,Ln,Tl,ql,Fl,Nl,Bl,Gt,vl,wl,Pl,Ol,er,$i,Kn,Et,tr,ir,Rl,Hl,Qt,xi,_l,Jn,je,zl,Zn,Fn,md,Xn=L(()=>{$t={exports:{}};U.prototype.getPExpr=function(){return this.pexpr};U.prototype.getText=function(){return this.text};U.prototype.getType=function(){return this.type};U.prototype.isDescription=function(){return this.type==="description"};U.prototype.isStringTerminal=function(){return this.type==="string"};U.prototype.isCode=function(){return this.type==="code"};U.prototype.isFluffy=function(){return this.fluffy};U.prototype.makeFluffy=function(){this.fluffy=!0};U.prototype.clearFluffy=function(){this.fluffy=!1};U.prototype.subsumes=function(e){return this.getText()===e.getText()&&this.type===e.type&&(!this.isFluffy()||this.isFluffy()&&e.isFluffy())};U.prototype.toString=function(){return this.type==="string"?JSON.stringify(this.getText()):this.getText()};U.prototype.clone=function(){let e=new U(this.pexpr,this.text,this.type);return this.isFluffy()&&e.makeFluffy(),e};U.prototype.toKey=function(){return this.toString()+"#"+this.type};Nn=U,x={};(function(e){let t={};for(let n=0;n<128;n++)t[n]=String.fromCharCode(n);t[39]="\\'",t[34]='\\"',t[92]="\\\\",t[8]="\\b",t[12]="\\f",t[10]="\\n",t[13]="\\r",t[9]="\\t",t[11]="\\v",e.abstract=function(n){let r=n||"";return function(){throw new Error("this method "+r+" is abstract! (it has no implementation in class "+this.constructor.name+")")}},e.assert=function(n,r){if(!n)throw new Error(r||"Assertion failed")},e.defineLazyProperty=function(n,r,u){let a;Object.defineProperty(n,r,{get(){return a||(a=u.call(this)),a}})},e.clone=function(n){return n&&Object.assign({},n)},e.repeatFn=function(n,r){let u=[];for(;r-- >0;)u.push(n());return u},e.repeatStr=function(n,r){return new Array(r+1).join(n)},e.repeat=function(n,r){return e.repeatFn(()=>n,r)},e.getDuplicates=function(n){let r=[];for(let u=0;u<n.length;u++){let a=n[u];n.lastIndexOf(a)!==u&&r.indexOf(a)<0&&r.push(a)}return r},e.copyWithoutDuplicates=function(n){let r=[];return n.forEach(u=>{r.indexOf(u)<0&&r.push(u)}),r},e.isSyntactic=function(n){let r=n[0];return r===r.toUpperCase()},e.isLexical=function(n){return!e.isSyntactic(n)},e.padLeft=function(n,r,u){let a=u||" ";return n.length<r?e.repeatStr(a,r-n.length)+n:n},e.StringBuffer=function(){this.strings=[]},e.StringBuffer.prototype.append=function(n){this.strings.push(n)},e.StringBuffer.prototype.contents=function(){return this.strings.join("")};let i=n=>String.fromCodePoint(parseInt(n,16));e.unescapeCodePoint=function(n){if(n.charAt(0)==="\\")switch(n.charAt(1)){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"x":return i(n.slice(2,4));case"u":return n.charAt(2)==="{"?i(n.slice(3,-1)):i(n.slice(2,6));default:return n.charAt(1)}else return n},e.unexpectedObjToString=function(n){if(n==null)return String(n);let r=Object.prototype.toString.call(n);try{let u;return n.constructor&&n.constructor.name?u=n.constructor.name:r.indexOf("[object ")===0?u=r.slice(8,-1):u=typeof n,u+": "+JSON.stringify(String(n))}catch{return r}}})(x);dn=x,tt=class{constructor(t){this.matchLength=t}get ctorName(){throw new Error("subclass responsibility")}numChildren(){return this.children?this.children.length:0}childAt(t){if(this.children)return this.children[t]}indexOfChild(t){return this.children.indexOf(t)}hasChildren(){return this.numChildren()>0}hasNoChildren(){return!this.hasChildren()}onlyChild(){if(this.numChildren()!==1)throw new Error("cannot get only child of a node of type "+this.ctorName+" (it has "+this.numChildren()+" children)");return this.firstChild()}firstChild(){if(this.hasNoChildren())throw new Error("cannot get first child of a "+this.ctorName+" node, which has no children");return this.childAt(0)}lastChild(){if(this.hasNoChildren())throw new Error("cannot get last child of a "+this.ctorName+" node, which has no children");return this.childAt(this.numChildren()-1)}childBefore(t){let i=this.indexOfChild(t);if(i<0)throw new Error("Node.childBefore() called w/ an argument that is not a child");if(i===0)throw new Error("cannot get child before first child");return this.childAt(i-1)}childAfter(t){let i=this.indexOfChild(t);if(i<0)throw new Error("Node.childAfter() called w/ an argument that is not a child");if(i===this.numChildren()-1)throw new Error("cannot get child after last child");return this.childAt(i+1)}isTerminal(){return!1}isNonterminal(){return!1}isIteration(){return!1}isOptional(){return!1}},bi=class extends tt{get ctorName(){return"_terminal"}isTerminal(){return!0}get primitiveValue(){throw new Error("The `primitiveValue` property was removed in Ohm v17.")}},Ti=class extends tt{constructor(t,i,n,r){super(r),this.ruleName=t,this.children=i,this.childOffsets=n}get ctorName(){return this.ruleName}isNonterminal(){return!0}isLexical(){return dn.isLexical(this.ctorName)}isSyntactic(){return dn.isSyntactic(this.ctorName)}},qi=class extends tt{constructor(t,i,n,r){super(n),this.children=t,this.childOffsets=i,this.optional=r}get ctorName(){return"_iter"}isIteration(){return!0}isOptional(){return this.optional}},Ui={Node:tt,TerminalNode:bi,NonterminalNode:Ti,IterationNode:qi},E={},Eo={Lu:/[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]|\uD801[\uDC00-\uDC27\uDCB0-\uDCD3]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21]/,Ll:/[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]|\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD83A[\uDD22-\uDD43]/,Lt:/[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,Lm:/[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5\u06E6\u07F4\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C\uA69D\uA717-\uA71F\uA770\uA788\uA7F8\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E\uFF9F]|\uD81A[\uDF40-\uDF43]|\uD81B[\uDF93-\uDF9F\uDFE0]/,Lo:/[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E45\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC50-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,Nl:/[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]|\uD800[\uDD40-\uDD74\uDF41\uDF4A\uDFD1-\uDFD5]|\uD809[\uDC00-\uDC6E]/,Nd:/[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD801[\uDCA0-\uDCA9]|\uD804[\uDC66-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDEF0-\uDEF9]|[\uD805\uD807][\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF39]|\uD806[\uDCE0-\uDCE9]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59]|\uD835[\uDFCE-\uDFFF]|\uD83A[\uDD50-\uDD59]/,Mn:/[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA8C4\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDCA-\uDDCC\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3C\uDF40\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDCB3-\uDCB8\uDCBA\uDCBF\uDCC0\uDCC2\uDCC3\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD67-\uDD69\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF]/,Mc:/[\u0903-\u0903]|[\u093E-\u0940]|[\u0949-\u094C]|[\u0982-\u0983]|[\u09BE-\u09C0]|[\u09C7-\u09C8]|[\u09CB-\u09CC]|[\u09D7-\u09D7]|[\u0A3E-\u0A40]|[\u0A83-\u0A83]|[\u0ABE-\u0AC0]|[\u0AC9-\u0AC9]|[\u0ACB-\u0ACC]|[\u0B02-\u0B03]|[\u0B3E-\u0B3E]|[\u0B40-\u0B40]|[\u0B47-\u0B48]|[\u0B4B-\u0B4C]|[\u0B57-\u0B57]|[\u0B83-\u0B83]|[\u0BBE-\u0BBF]|[\u0BC1-\u0BC2]|[\u0BC6-\u0BC8]|[\u0BCA-\u0BCC]|[\u0BD7-\u0BD7]|[\u0C01-\u0C03]|[\u0C41-\u0C44]|[\u0C82-\u0C83]|[\u0CBE-\u0CBE]|[\u0CC0-\u0CC4]|[\u0CC7-\u0CC8]|[\u0CCA-\u0CCB]|[\u0CD5-\u0CD6]|[\u0D02-\u0D03]|[\u0D3E-\u0D40]|[\u0D46-\u0D48]|[\u0D4A-\u0D4C]|[\u0D57-\u0D57]|[\u0F3E-\u0F3F]|[\u0F7F-\u0F7F]/,Pc:/[_\u203F\u2040\u2054\uFE33\uFE34\uFE4D-\uFE4F\uFF3F]/,Zs:/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,L:/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,Ltmo:/[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]|[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5\u06E6\u07F4\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C\uA69D\uA717-\uA71F\uA770\uA788\uA7F8\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E\uFF9F]|\uD81A[\uDF40-\uDF43]|\uD81B[\uDF93-\uDF9F\uDFE0]|[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E45\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC50-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/},So=Eo,Lo=x,M=class e{constructor(){if(this.constructor===e)throw new Error("PExpr cannot be instantiated -- it's abstract")}withSource(t){return t&&(this.source=t.trimmed()),this}},xo=Object.create(M.prototype),bo=Object.create(M.prototype),Fi=class extends M{constructor(t){super(),this.obj=t}},Ni=class extends M{constructor(t,i){super(),this.from=t,this.to=i,this.matchCodePoint=t.length>1||i.length>1}},Bi=class extends M{constructor(t){super(),this.index=t}},St=class extends M{constructor(t){super(),this.terms=t}},vi=class extends St{constructor(t,i,n){let r=t.rules[i].body;super([n,r]),this.superGrammar=t,this.name=i,this.body=n}},ki=class extends St{constructor(t,i,n,r){let u=t.rules[i].body;super([...n,u,...r]),this.superGrammar=t,this.ruleName=i,this.expansionPos=n.length}},Ii=class extends M{constructor(t){super(),this.factors=t}},it=class extends M{constructor(t){super(),this.expr=t}},rt=class extends it{},nt=class extends it{},ut=class extends it{};rt.prototype.operator="*";nt.prototype.operator="+";ut.prototype.operator="?";rt.prototype.minNumMatches=0;nt.prototype.minNumMatches=1;ut.prototype.minNumMatches=0;rt.prototype.maxNumMatches=Number.POSITIVE_INFINITY;nt.prototype.maxNumMatches=Number.POSITIVE_INFINITY;ut.prototype.maxNumMatches=1;wi=class extends M{constructor(t){super(),this.expr=t}},Pi=class extends M{constructor(t){super(),this.expr=t}},Oi=class extends M{constructor(t){super(),this.expr=t}},Ri=class extends M{constructor(t,i=[]){super(),this.ruleName=t,this.args=i}isSyntactic(){return Lo.isSyntactic(this.ruleName)}toMemoKey(){return this._memoKey||Object.defineProperty(this,"_memoKey",{value:this.toString()}),this._memoKey}},Hi=class extends M{constructor(t){super(),this.category=t,this.pattern=So[t]}};E.PExpr=M;E.any=xo;E.end=bo;E.Terminal=Fi;E.Range=Ni;E.Param=Bi;E.Alt=St;E.Extend=vi;E.Splice=ki;E.Seq=Ii;E.Iter=it;E.Star=rt;E.Plus=nt;E.Opt=ut;E.Not=wi;E.Lookahead=Pi;E.Lex=Oi;E.Apply=Ri;E.UnicodeChar=Hi;To=x,K=E;K.PExpr.prototype.allowsSkippingPrecedingSpace=To.abstract("allowsSkippingPrecedingSpace");K.any.allowsSkippingPrecedingSpace=K.end.allowsSkippingPrecedingSpace=K.Apply.prototype.allowsSkippingPrecedingSpace=K.Terminal.prototype.allowsSkippingPrecedingSpace=K.Range.prototype.allowsSkippingPrecedingSpace=K.UnicodeChar.prototype.allowsSkippingPrecedingSpace=function(){return!0};K.Alt.prototype.allowsSkippingPrecedingSpace=K.Iter.prototype.allowsSkippingPrecedingSpace=K.Lex.prototype.allowsSkippingPrecedingSpace=K.Lookahead.prototype.allowsSkippingPrecedingSpace=K.Not.prototype.allowsSkippingPrecedingSpace=K.Param.prototype.allowsSkippingPrecedingSpace=K.Seq.prototype.allowsSkippingPrecedingSpace=function(){return!1};te.prototype=Object.create(null);te.asNamespace=function(e){return e instanceof te?e:te.createNamespace(e)};te.createNamespace=function(e){return te.extend(te.prototype,e)};te.extend=function(e,t){if(e!==te.prototype&&!(e instanceof te))throw new TypeError("not a Namespace object: "+e);let i=Object.create(e,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}});return Object.assign(i,t)};te.toString=function(e){return Object.prototype.toString.call(e)};Bn=te,{assert:qo}=x,Fo=Bn,No=E;Wo="NOTE: A _syntactic rule_ is a rule whose name begins with a capital letter. See https://ohmjs.org/d/svl for more details.";xe={applicationOfSyntacticRuleFromLexicalContext:jo,applySyntacticWithLexicalRuleApplication:Go,cannotExtendUndeclaredRule:Oo,cannotOverrideUndeclaredRule:Po,duplicateGrammarDeclaration:Io,duplicateParameterNames:Mo,duplicatePropertyNames:Jo,duplicateRuleDeclaration:Ro,inconsistentArity:Yo,incorrectArgumentType:Uo,intervalSourcesDontMatch:Bo,invalidCodePoint:zo,invalidConstructorCall:Zo,invalidParameter:Vo,grammarSyntaxError:vo,kleeneExprHasNullableOperand:Ko,missingSemanticAction:es,multipleSuperSplices:Qo,undeclaredGrammar:ko,undeclaredRule:wo,unnecessaryExperimentalApplySyntactic:$o,wrongNumberOfArguments:_o,wrongNumberOfParameters:Ho,throwErrors(e){if(e.length===1)throw e[0];if(e.length>1)throw Xo(e)}},ve={};(function(e){let t=x;function i(a){let o=0;return a.map(d=>{let l=d.toString();return o=Math.max(o,l.length),l}).map(d=>t.padLeft(d,o))}function n(a,o,p){let d=a.length,l=a.slice(0,p),c=a.slice(p+o.length);return(l+o+c).substr(0,d)}function r(...a){let o=this,{offset:p}=o,{repeatStr:d}=t,l=new t.StringBuffer;l.append("Line "+o.lineNum+", col "+o.colNum+`:
`);let c=i([o.prevLine==null?0:o.lineNum-1,o.lineNum,o.nextLine==null?0:o.lineNum+1]),m=(y,s,f)=>{l.append(f+c[y]+" | "+s+`
`)};o.prevLine!=null&&m(0,o.prevLine,"  "),m(1,o.line,"> ");let g=o.line.length,h=d(" ",g+1);for(let y=0;y<a.length;++y){let s=a[y][0],f=a[y][1];t.assert(s>=0&&s<=f,"range start must be >= 0 and <= end");let S=p-o.colNum+1;s=Math.max(0,s-S),f=Math.min(f-S,g),h=n(h,d("~",f-s),s)}let A=2+c[1].length+3;return l.append(d(" ",A)),h=n(h,"^",o.colNum-1),l.append(h.replace(/ +$/,"")+`
`),o.nextLine!=null&&m(2,o.nextLine,"  "),l.contents()}let u=[];e.awaitBuiltInRules=a=>{u.push(a)},e.announceBuiltInRules=a=>{u.forEach(o=>{o(a)}),u=null},e.getLineAndColumn=(a,o)=>{let p=1,d=1,l=0,c=0,m=null,g=null,h=-1;for(;l<o;){let s=a.charAt(l++);s===`
`?(p++,d=1,h=c,c=l):s!=="\r"&&d++}let A=a.indexOf(`
`,c);if(A===-1)A=a.length;else{let s=a.indexOf(`
`,A+1);m=s===-1?a.slice(A):a.slice(A,s),m=m.replace(/^\r?\n/,"").replace(/\r$/,"")}h>=0&&(g=a.slice(h,c).replace(/\r?\n$/,""));let y=a.slice(c,A).replace(/\r$/,"");return{offset:o,lineNum:p,colNum:d,line:y,prevLine:g,nextLine:m,toString:r}},e.getLineAndColumnMessage=function(a,o,...p){return e.getLineAndColumn(a,o).toString(...p)},e.uniqueId=(()=>{let a=0;return o=>""+o+a++})()})(ve);({abstract:ts,isSyntactic:Si}=x),Ne=xe,P=E,is=ve;is.awaitBuiltInRules(e=>{At=e});P.PExpr.prototype.assertAllApplicationsAreValid=function(e,t){Wt=0,this._assertAllApplicationsAreValid(e,t)};P.PExpr.prototype._assertAllApplicationsAreValid=ts("_assertAllApplicationsAreValid");P.any._assertAllApplicationsAreValid=P.end._assertAllApplicationsAreValid=P.Terminal.prototype._assertAllApplicationsAreValid=P.Range.prototype._assertAllApplicationsAreValid=P.Param.prototype._assertAllApplicationsAreValid=P.UnicodeChar.prototype._assertAllApplicationsAreValid=function(e,t){};P.Lex.prototype._assertAllApplicationsAreValid=function(e,t){Wt++,this.expr._assertAllApplicationsAreValid(e,t),Wt--};P.Alt.prototype._assertAllApplicationsAreValid=function(e,t){for(let i=0;i<this.terms.length;i++)this.terms[i]._assertAllApplicationsAreValid(e,t)};P.Seq.prototype._assertAllApplicationsAreValid=function(e,t){for(let i=0;i<this.factors.length;i++)this.factors[i]._assertAllApplicationsAreValid(e,t)};P.Iter.prototype._assertAllApplicationsAreValid=P.Not.prototype._assertAllApplicationsAreValid=P.Lookahead.prototype._assertAllApplicationsAreValid=function(e,t){this.expr._assertAllApplicationsAreValid(e,t)};P.Apply.prototype._assertAllApplicationsAreValid=function(e,t,i=!1){let n=t.rules[this.ruleName],r=Si(e)&&Wt===0;if(!n)throw Ne.undeclaredRule(this.ruleName,t.name,this.source);if(!i&&Si(this.ruleName)&&!r)throw Ne.applicationOfSyntacticRuleFromLexicalContext(this.ruleName,this);let u=this.args.length,a=n.formals.length;if(u!==a)throw Ne.wrongNumberOfArguments(this.ruleName,a,u,this.source);let o=At&&n===At.rules.applySyntactic;if(At&&n===At.rules.caseInsensitive&&!(this.args[0]instanceof P.Terminal))throw Ne.incorrectArgumentType('a Terminal (e.g. "abc")',this.args[0]);if(o){let d=this.args[0];if(!(d instanceof P.Apply))throw Ne.incorrectArgumentType("a syntactic rule application",d);if(!Si(d.ruleName))throw Ne.applySyntacticWithLexicalRuleApplication(d);if(r)throw Ne.unnecessaryExperimentalApplySyntactic(this)}this.args.forEach(d=>{if(d._assertAllApplicationsAreValid(e,t,o),d.getArity()!==1)throw Ne.invalidParameter(this.ruleName,d)})};rs=x,vn=xe,j=E;j.PExpr.prototype.assertChoicesHaveUniformArity=rs.abstract("assertChoicesHaveUniformArity");j.any.assertChoicesHaveUniformArity=j.end.assertChoicesHaveUniformArity=j.Terminal.prototype.assertChoicesHaveUniformArity=j.Range.prototype.assertChoicesHaveUniformArity=j.Param.prototype.assertChoicesHaveUniformArity=j.Lex.prototype.assertChoicesHaveUniformArity=j.UnicodeChar.prototype.assertChoicesHaveUniformArity=function(e){};j.Alt.prototype.assertChoicesHaveUniformArity=function(e){if(this.terms.length===0)return;let t=this.terms[0].getArity();for(let i=0;i<this.terms.length;i++){let n=this.terms[i];n.assertChoicesHaveUniformArity();let r=n.getArity();if(t!==r)throw vn.inconsistentArity(e,t,r,n)}};j.Extend.prototype.assertChoicesHaveUniformArity=function(e){let t=this.terms[0].getArity(),i=this.terms[1].getArity();if(t!==i)throw vn.inconsistentArity(e,i,t,this.terms[0])};j.Seq.prototype.assertChoicesHaveUniformArity=function(e){for(let t=0;t<this.factors.length;t++)this.factors[t].assertChoicesHaveUniformArity(e)};j.Iter.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)};j.Not.prototype.assertChoicesHaveUniformArity=function(e){};j.Lookahead.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)};j.Apply.prototype.assertChoicesHaveUniformArity=function(e){};ns=x,us=xe,G=E;G.PExpr.prototype.assertIteratedExprsAreNotNullable=ns.abstract("assertIteratedExprsAreNotNullable");G.any.assertIteratedExprsAreNotNullable=G.end.assertIteratedExprsAreNotNullable=G.Terminal.prototype.assertIteratedExprsAreNotNullable=G.Range.prototype.assertIteratedExprsAreNotNullable=G.Param.prototype.assertIteratedExprsAreNotNullable=G.UnicodeChar.prototype.assertIteratedExprsAreNotNullable=function(e){};G.Alt.prototype.assertIteratedExprsAreNotNullable=function(e){for(let t=0;t<this.terms.length;t++)this.terms[t].assertIteratedExprsAreNotNullable(e)};G.Seq.prototype.assertIteratedExprsAreNotNullable=function(e){for(let t=0;t<this.factors.length;t++)this.factors[t].assertIteratedExprsAreNotNullable(e)};G.Iter.prototype.assertIteratedExprsAreNotNullable=function(e){if(this.expr.assertIteratedExprsAreNotNullable(e),this.expr.isNullable(e))throw us.kleeneExprHasNullableOperand(this,[])};G.Opt.prototype.assertIteratedExprsAreNotNullable=G.Not.prototype.assertIteratedExprsAreNotNullable=G.Lookahead.prototype.assertIteratedExprsAreNotNullable=G.Lex.prototype.assertIteratedExprsAreNotNullable=function(e){this.expr.assertIteratedExprsAreNotNullable(e)};G.Apply.prototype.assertIteratedExprsAreNotNullable=function(e){this.args.forEach(t=>{t.assertIteratedExprsAreNotNullable(e)})};({assert:as}=x),_i=xe,mn=ve;W.coverage=function(e,...t){let{startIdx:i,endIdx:n}=e;for(let r of t){if(r.sourceString!==e.sourceString)throw _i.intervalSourcesDontMatch();i=Math.min(i,r.startIdx),n=Math.max(n,r.endIdx)}return new W(e.sourceString,i,n)};W.prototype={coverageWith(...e){return W.coverage(...e,this)},collapsedLeft(){return new W(this.sourceString,this.startIdx,this.startIdx)},collapsedRight(){return new W(this.sourceString,this.endIdx,this.endIdx)},getLineAndColumn(){return mn.getLineAndColumn(this.sourceString,this.startIdx)},getLineAndColumnMessage(){let e=[this.startIdx,this.endIdx];return mn.getLineAndColumnMessage(this.sourceString,this.startIdx,e)},minus(e){if(this.sourceString!==e.sourceString)throw _i.intervalSourcesDontMatch();return this.startIdx===e.startIdx&&this.endIdx===e.endIdx?[]:this.startIdx<e.startIdx&&e.endIdx<this.endIdx?[new W(this.sourceString,this.startIdx,e.startIdx),new W(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.endIdx&&e.endIdx<this.endIdx?[new W(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.startIdx&&e.startIdx<this.endIdx?[new W(this.sourceString,this.startIdx,e.startIdx)]:[this]},relativeTo(e){if(this.sourceString!==e.sourceString)throw _i.intervalSourcesDontMatch();return as(this.startIdx>=e.startIdx&&this.endIdx<=e.endIdx,"other interval does not cover this one"),new W(this.sourceString,this.startIdx-e.startIdx,this.endIdx-e.startIdx)},trimmed(){let{contents:e}=this,t=this.startIdx+e.match(/^\s*/)[0].length,i=this.endIdx-e.match(/\s*$/)[0].length;return new W(this.sourceString,t,i)},subInterval(e,t){let i=this.startIdx+e;return new W(this.sourceString,i,i+t)}};Object.defineProperties(W.prototype,{contents:{get(){return this._contents===void 0&&(this._contents=this.sourceString.slice(this.startIdx,this.endIdx)),this._contents},enumerable:!0},length:{get(){return this.endIdx-this.startIdx},enumerable:!0}});Qi=W,os=Qi,zi=x,ss="\u2717",ls="\u2713",cs="\u22C5",ps="\u21D2",ds="\u2409",ms="\u240A",gs="\u240D",Mi={succeeded:1,isRootNode:2,isImplicitSpaces:4,isMemoized:8,isHeadOfLeftRecursion:16,terminatesLR:32};ae.prototype.SKIP={};Object.defineProperty(ae.prototype,"displayString",{get(){return this.expr.toDisplayString()}});Object.keys(Mi).forEach(e=>{let t=Mi[e];Object.defineProperty(ae.prototype,e,{get(){return(this._flags&t)!==0},set(i){i?this._flags|=t:this._flags&=~t}})});ae.prototype.clone=function(){return this.cloneWithExpr(this.expr)};ae.prototype.cloneWithExpr=function(e){let t=new ae(this.input,this.pos,this.pos2,e,this.succeeded,this.bindings,this.children);return t.isHeadOfLeftRecursion=this.isHeadOfLeftRecursion,t.isImplicitSpaces=this.isImplicitSpaces,t.isMemoized=this.isMemoized,t.isRootNode=this.isRootNode,t.terminatesLR=this.terminatesLR,t.terminatingLREntry=this.terminatingLREntry,t};ae.prototype.recordLRTermination=function(e,t){this.terminatingLREntry=new ae(this.input,this.pos,this.pos2,this.expr,!1,[t],[e]),this.terminatingLREntry.terminatesLR=!0};ae.prototype.walk=function(e,t){let i=e;typeof i=="function"&&(i={enter:i});function n(r,u,a){let o=!0;i.enter&&i.enter.call(t,r,u,a)===ae.prototype.SKIP&&(o=!1),o&&(r.children.forEach(p=>{n(p,r,a+1)}),i.exit&&i.exit.call(t,r,u,a))}this.isRootNode?this.children.forEach(r=>{n(r,null,0)}):n(this,null,0)};ae.prototype.toString=function(){let e=new zi.StringBuffer;return this.walk((t,i,n)=>{if(!t)return this.SKIP;if(t.expr.constructor.name!=="Alt"){if(e.append(fs(t.input,t.pos,10)+hs(n*2+1)),e.append((t.succeeded?ls:ss)+" "+t.displayString),t.isHeadOfLeftRecursion&&e.append(" (LR)"),t.succeeded){let u=kn(t.source.contents);e.append(" "+ps+"  "),e.append(typeof u=="string"?'"'+u+'"':u)}e.append(`
`)}}),e.contents()};In=ae,Ds=In,wn=x,Cs=xe,Ki=Ui,k=E,{TerminalNode:xt}=Ki,{NonterminalNode:As}=Ki,{IterationNode:ys}=Ki;k.PExpr.prototype.eval=wn.abstract("eval");k.any.eval=function(e){let{inputStream:t}=e,i=t.pos,n=t.next();return n?(e.pushBinding(new xt(n.length),i),!0):(e.processFailure(i,this),!1)};k.end.eval=function(e){let{inputStream:t}=e,i=t.pos;return t.atEnd()?(e.pushBinding(new xt(0),i),!0):(e.processFailure(i,this),!1)};k.Terminal.prototype.eval=function(e){let{inputStream:t}=e,i=t.pos;return t.matchString(this.obj)?(e.pushBinding(new xt(this.obj.length),i),!0):(e.processFailure(i,this),!1)};k.Range.prototype.eval=function(e){let{inputStream:t}=e,i=t.pos,n=this.matchCodePoint?t.nextCodePoint():t.nextCharCode();return n!==void 0&&this.from.codePointAt(0)<=n&&n<=this.to.codePointAt(0)?(e.pushBinding(new xt(String.fromCodePoint(n).length),i),!0):(e.processFailure(i,this),!1)};k.Param.prototype.eval=function(e){return e.eval(e.currentApplication().args[this.index])};k.Lex.prototype.eval=function(e){e.enterLexifiedContext();let t=e.eval(this.expr);return e.exitLexifiedContext(),t};k.Alt.prototype.eval=function(e){for(let t=0;t<this.terms.length;t++)if(e.eval(this.terms[t]))return!0;return!1};k.Seq.prototype.eval=function(e){for(let t=0;t<this.factors.length;t++){let i=this.factors[t];if(!e.eval(i))return!1}return!0};k.Iter.prototype.eval=function(e){let{inputStream:t}=e,i=t.pos,n=this.getArity(),r=[],u=[];for(;r.length<n;)r.push([]),u.push([]);let a=0,o=i,p;for(;a<this.maxNumMatches&&e.eval(this.expr);){if(t.pos===o)throw Cs.kleeneExprHasNullableOperand(this,e._applicationStack);o=t.pos,a++;let m=e._bindings.splice(e._bindings.length-n,n),g=e._bindingOffsets.splice(e._bindingOffsets.length-n,n);for(p=0;p<m.length;p++)r[p].push(m[p]),u[p].push(g[p])}if(a<this.minNumMatches)return!1;let d=e.posToOffset(i),l=0;if(a>0){let m=r[n-1],g=u[n-1],h=g[g.length-1]+m[m.length-1].matchLength;d=u[0][0],l=h-d}let c=this instanceof k.Opt;for(p=0;p<r.length;p++)e._bindings.push(new ys(r[p],u[p],l,c)),e._bindingOffsets.push(d);return!0};k.Not.prototype.eval=function(e){let{inputStream:t}=e,i=t.pos;e.pushFailuresInfo();let n=e.eval(this.expr);return e.popFailuresInfo(),n?(e.processFailure(i,this),!1):(t.pos=i,!0)};k.Lookahead.prototype.eval=function(e){let{inputStream:t}=e,i=t.pos;return e.eval(this.expr)?(t.pos=i,!0):!1};k.Apply.prototype.eval=function(e){let t=e.currentApplication(),i=t?t.args:[],n=this.substituteParams(i),r=e.getCurrentPosInfo();if(r.isActive(n))return n.handleCycle(e);let u=n.toMemoKey(),a=r.memo[u];if(a&&r.shouldUseMemoizedResult(a)){if(e.hasNecessaryInfo(a))return e.useMemoizedResult(e.inputStream.pos,a);delete r.memo[u]}return n.reallyEval(e)};k.Apply.prototype.handleCycle=function(e){let t=e.getCurrentPosInfo(),{currentLeftRecursion:i}=t,n=this.toMemoKey(),r=t.memo[n];return i&&i.headApplication.toMemoKey()===n?r.updateInvolvedApplicationMemoKeys():r||(r=t.memoize(n,{matchLength:0,examinedLength:0,value:!1,rightmostFailureOffset:-1}),t.startLeftRecursion(this,r)),e.useMemoizedResult(e.inputStream.pos,r)};k.Apply.prototype.reallyEval=function(e){let{inputStream:t}=e,i=t.pos,n=e.getCurrentPosInfo(),r=e.grammar.rules[this.ruleName],{body:u}=r,{description:a}=r;e.enterApplication(n,this),a&&e.pushFailuresInfo();let o=t.examinedLength;t.examinedLength=0;let p=this.evalOnce(u,e),d=n.currentLeftRecursion,l=this.toMemoKey(),c=d&&d.headApplication.toMemoKey()===l,m;c?(p=this.growSeedResult(u,e,i,d,p),n.endLeftRecursion(),m=d,m.examinedLength=t.examinedLength-i,m.rightmostFailureOffset=e._getRightmostFailureOffset(),n.memoize(l,m)):(!d||!d.isInvolved(l))&&(m=n.memoize(l,{matchLength:t.pos-i,examinedLength:t.examinedLength-i,value:p,failuresAtRightmostPosition:e.cloneRecordedFailures(),rightmostFailureOffset:e._getRightmostFailureOffset()}));let g=!!p;if(a&&(e.popFailuresInfo(),g||e.processFailure(i,this),m&&(m.failuresAtRightmostPosition=e.cloneRecordedFailures())),e.isTracing()&&m){let h=e.getTraceEntry(i,this,g,g?[p]:[]);c&&(wn.assert(h.terminatingLREntry!=null||!g),h.isHeadOfLeftRecursion=!0),m.traceEntry=h}return t.examinedLength=Math.max(t.examinedLength,o),e.exitApplication(n,p),g};k.Apply.prototype.evalOnce=function(e,t){let{inputStream:i}=t,n=i.pos;if(t.eval(e)){let r=e.getArity(),u=t._bindings.splice(t._bindings.length-r,r),a=t._bindingOffsets.splice(t._bindingOffsets.length-r,r),o=i.pos-n;return new As(this.ruleName,u,a,o)}else return!1};k.Apply.prototype.growSeedResult=function(e,t,i,n,r){if(!r)return!1;let{inputStream:u}=t;for(;;){if(n.matchLength=u.pos-i,n.value=r,n.failuresAtRightmostPosition=t.cloneRecordedFailures(),t.isTracing()){let a=t.trace[t.trace.length-1];n.traceEntry=new Ds(t.input,i,u.pos,this,!0,[r],[a.clone()])}if(u.pos=i,r=this.evalOnce(e,t),u.pos-i<=n.matchLength)break;t.isTracing()&&t.trace.splice(-2,1)}return t.isTracing()&&n.traceEntry.recordLRTermination(t.trace.pop(),r),u.pos=i+n.matchLength,n.value};k.UnicodeChar.prototype.eval=function(e){let{inputStream:t}=e,i=t.pos,n=t.next();return n&&this.pattern.test(n)?(e.pushBinding(new xt(n.length),i),!0):(e.processFailure(i,this),!1)};Es=x,Y=E;Y.PExpr.prototype.getArity=Es.abstract("getArity");Y.any.getArity=Y.end.getArity=Y.Terminal.prototype.getArity=Y.Range.prototype.getArity=Y.Param.prototype.getArity=Y.Apply.prototype.getArity=Y.UnicodeChar.prototype.getArity=function(){return 1};Y.Alt.prototype.getArity=function(){return this.terms.length===0?0:this.terms[0].getArity()};Y.Seq.prototype.getArity=function(){let e=0;for(let t=0;t<this.factors.length;t++)e+=this.factors[t].getArity();return e};Y.Iter.prototype.getArity=function(){return this.expr.getArity()};Y.Not.prototype.getArity=function(){return 0};Y.Lookahead.prototype.getArity=Y.Lex.prototype.getArity=function(){return this.expr.getArity()};Ss=x,w=E;w.PExpr.prototype.outputRecipe=Ss.abstract("outputRecipe");w.any.outputRecipe=function(e,t){return["any",me(this,t)]};w.end.outputRecipe=function(e,t){return["end",me(this,t)]};w.Terminal.prototype.outputRecipe=function(e,t){return["terminal",me(this,t),this.obj]};w.Range.prototype.outputRecipe=function(e,t){return["range",me(this,t),this.from,this.to]};w.Param.prototype.outputRecipe=function(e,t){return["param",me(this,t),this.index]};w.Alt.prototype.outputRecipe=function(e,t){return["alt",me(this,t)].concat(this.terms.map(i=>i.outputRecipe(e,t)))};w.Extend.prototype.outputRecipe=function(e,t){return this.terms[0].outputRecipe(e,t)};w.Splice.prototype.outputRecipe=function(e,t){let i=this.terms.slice(0,this.expansionPos),n=this.terms.slice(this.expansionPos+1);return["splice",me(this,t),i.map(r=>r.outputRecipe(e,t)),n.map(r=>r.outputRecipe(e,t))]};w.Seq.prototype.outputRecipe=function(e,t){return["seq",me(this,t)].concat(this.factors.map(i=>i.outputRecipe(e,t)))};w.Star.prototype.outputRecipe=w.Plus.prototype.outputRecipe=w.Opt.prototype.outputRecipe=w.Not.prototype.outputRecipe=w.Lookahead.prototype.outputRecipe=w.Lex.prototype.outputRecipe=function(e,t){return[this.constructor.name.toLowerCase(),me(this,t),this.expr.outputRecipe(e,t)]};w.Apply.prototype.outputRecipe=function(e,t){return["app",me(this,t),this.ruleName,this.args.map(i=>i.outputRecipe(e,t))]};w.UnicodeChar.prototype.outputRecipe=function(e,t){return["unicodeChar",me(this,t),this.category]};Ls=x,$=E;$.PExpr.prototype.introduceParams=Ls.abstract("introduceParams");$.any.introduceParams=$.end.introduceParams=$.Terminal.prototype.introduceParams=$.Range.prototype.introduceParams=$.Param.prototype.introduceParams=$.UnicodeChar.prototype.introduceParams=function(e){return this};$.Alt.prototype.introduceParams=function(e){return this.terms.forEach((t,i,n)=>{n[i]=t.introduceParams(e)}),this};$.Seq.prototype.introduceParams=function(e){return this.factors.forEach((t,i,n)=>{n[i]=t.introduceParams(e)}),this};$.Iter.prototype.introduceParams=$.Not.prototype.introduceParams=$.Lookahead.prototype.introduceParams=$.Lex.prototype.introduceParams=function(e){return this.expr=this.expr.introduceParams(e),this};$.Apply.prototype.introduceParams=function(e){let t=e.indexOf(this.ruleName);if(t>=0){if(this.args.length>0)throw new Error("Parameterized rules cannot be passed as arguments to another rule.");return new $.Param(t).withSource(this.source)}else return this.args.forEach((i,n,r)=>{r[n]=i.introduceParams(e)}),this};xs=x,O=E;O.PExpr.prototype.isNullable=function(e){return this._isNullable(e,Object.create(null))};O.PExpr.prototype._isNullable=xs.abstract("_isNullable");O.any._isNullable=O.Range.prototype._isNullable=O.Param.prototype._isNullable=O.Plus.prototype._isNullable=O.UnicodeChar.prototype._isNullable=function(e,t){return!1};O.end._isNullable=function(e,t){return!0};O.Terminal.prototype._isNullable=function(e,t){return typeof this.obj=="string"?this.obj==="":!1};O.Alt.prototype._isNullable=function(e,t){return this.terms.length===0||this.terms.some(i=>i._isNullable(e,t))};O.Seq.prototype._isNullable=function(e,t){return this.factors.every(i=>i._isNullable(e,t))};O.Star.prototype._isNullable=O.Opt.prototype._isNullable=O.Not.prototype._isNullable=O.Lookahead.prototype._isNullable=function(e,t){return!0};O.Lex.prototype._isNullable=function(e,t){return this.expr._isNullable(e,t)};O.Apply.prototype._isNullable=function(e,t){let i=this.toMemoKey();if(!Object.prototype.hasOwnProperty.call(t,i)){let{body:n}=e.rules[this.ruleName],r=n.substituteParams(this.args);t[i]=!1,t[i]=r._isNullable(e,t)}return t[i]};bs=x,R=E;R.PExpr.prototype.substituteParams=bs.abstract("substituteParams");R.any.substituteParams=R.end.substituteParams=R.Terminal.prototype.substituteParams=R.Range.prototype.substituteParams=R.UnicodeChar.prototype.substituteParams=function(e){return this};R.Param.prototype.substituteParams=function(e){return e[this.index]};R.Alt.prototype.substituteParams=function(e){return new R.Alt(this.terms.map(t=>t.substituteParams(e)))};R.Seq.prototype.substituteParams=function(e){return new R.Seq(this.factors.map(t=>t.substituteParams(e)))};R.Iter.prototype.substituteParams=R.Not.prototype.substituteParams=R.Lookahead.prototype.substituteParams=R.Lex.prototype.substituteParams=function(e){return new this.constructor(this.expr.substituteParams(e))};R.Apply.prototype.substituteParams=function(e){if(this.args.length===0)return this;{let t=this.args.map(i=>i.substituteParams(e));return new R.Apply(this.ruleName,t)}};Pn=x,Q=E,{copyWithoutDuplicates:Ts}=Pn;Q.PExpr.prototype.toArgumentNameList=Pn.abstract("toArgumentNameList");Q.any.toArgumentNameList=function(e,t){return["any"]};Q.end.toArgumentNameList=function(e,t){return["end"]};Q.Terminal.prototype.toArgumentNameList=function(e,t){return typeof this.obj=="string"&&/^[_a-zA-Z0-9]+$/.test(this.obj)?["_"+this.obj]:["$"+e]};Q.Range.prototype.toArgumentNameList=function(e,t){let i=this.from+"_to_"+this.to;return gn(i)||(i="_"+i),gn(i)||(i="$"+e),[i]};Q.Alt.prototype.toArgumentNameList=function(e,t){let i=this.terms.map(u=>u.toArgumentNameList(e,!0)),n=[],r=i[0].length;for(let u=0;u<r;u++){let a=[];for(let p=0;p<this.terms.length;p++)a.push(i[p][u]);let o=Ts(a);n.push(o.join("_or_"))}return t||Yi(n),n};Q.Seq.prototype.toArgumentNameList=function(e,t){let i=[];return this.factors.forEach(n=>{let r=n.toArgumentNameList(e,!0);i=i.concat(r),e+=r.length}),t||Yi(i),i};Q.Iter.prototype.toArgumentNameList=function(e,t){let i=this.expr.toArgumentNameList(e,t).map(n=>n[n.length-1]==="s"?n+"es":n+"s");return t||Yi(i),i};Q.Opt.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t).map(i=>"opt"+i[0].toUpperCase()+i.slice(1))};Q.Not.prototype.toArgumentNameList=function(e,t){return[]};Q.Lookahead.prototype.toArgumentNameList=Q.Lex.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t)};Q.Apply.prototype.toArgumentNameList=function(e,t){return[this.ruleName]};Q.UnicodeChar.prototype.toArgumentNameList=function(e,t){return["$"+e]};Q.Param.prototype.toArgumentNameList=function(e,t){return["param"+this.index]};qs=x,z=E;z.PExpr.prototype.toDisplayString=qs.abstract("toDisplayString");z.Alt.prototype.toDisplayString=z.Seq.prototype.toDisplayString=function(){return this.source?this.source.trimmed().contents:"["+this.constructor.name+"]"};z.any.toDisplayString=z.end.toDisplayString=z.Iter.prototype.toDisplayString=z.Not.prototype.toDisplayString=z.Lookahead.prototype.toDisplayString=z.Lex.prototype.toDisplayString=z.Terminal.prototype.toDisplayString=z.Range.prototype.toDisplayString=z.Param.prototype.toDisplayString=function(){return this.toString()};z.Apply.prototype.toDisplayString=function(){if(this.args.length>0){let e=this.args.map(t=>t.toDisplayString());return this.ruleName+"<"+e.join(",")+">"}else return this.ruleName};z.UnicodeChar.prototype.toDisplayString=function(){return"Unicode ["+this.category+"] character"};Ce=Nn,Fs=x,ie=E;ie.PExpr.prototype.toFailure=Fs.abstract("toFailure");ie.any.toFailure=function(e){return new Ce(this,"any object","description")};ie.end.toFailure=function(e){return new Ce(this,"end of input","description")};ie.Terminal.prototype.toFailure=function(e){return new Ce(this,this.obj,"string")};ie.Range.prototype.toFailure=function(e){return new Ce(this,JSON.stringify(this.from)+".."+JSON.stringify(this.to),"code")};ie.Not.prototype.toFailure=function(e){let t=this.expr===ie.any?"nothing":"not "+this.expr.toFailure(e);return new Ce(this,t,"description")};ie.Lookahead.prototype.toFailure=function(e){return this.expr.toFailure(e)};ie.Apply.prototype.toFailure=function(e){let{description:t}=e.rules[this.ruleName];return t||(t=(/^[aeiouAEIOU]/.test(this.ruleName)?"an":"a")+" "+this.ruleName),new Ce(this,t,"description")};ie.UnicodeChar.prototype.toFailure=function(e){return new Ce(this,"a Unicode ["+this.category+"] character","description")};ie.Alt.prototype.toFailure=function(e){let i="("+this.terms.map(n=>n.toFailure(e)).join(" or ")+")";return new Ce(this,i,"description")};ie.Seq.prototype.toFailure=function(e){let i="("+this.factors.map(n=>n.toFailure(e)).join(" ")+")";return new Ce(this,i,"description")};ie.Iter.prototype.toFailure=function(e){let t="("+this.expr.toFailure(e)+this.operator+")";return new Ce(this,t,"description")};Ns=x,J=E;J.PExpr.prototype.toString=Ns.abstract("toString");J.any.toString=function(){return"any"};J.end.toString=function(){return"end"};J.Terminal.prototype.toString=function(){return JSON.stringify(this.obj)};J.Range.prototype.toString=function(){return JSON.stringify(this.from)+".."+JSON.stringify(this.to)};J.Param.prototype.toString=function(){return"$"+this.index};J.Lex.prototype.toString=function(){return"#("+this.expr.toString()+")"};J.Alt.prototype.toString=function(){return this.terms.length===1?this.terms[0].toString():"("+this.terms.map(e=>e.toString()).join(" | ")+")"};J.Seq.prototype.toString=function(){return this.factors.length===1?this.factors[0].toString():"("+this.factors.map(e=>e.toString()).join(" ")+")"};J.Iter.prototype.toString=function(){return this.expr+this.operator};J.Not.prototype.toString=function(){return"~"+this.expr};J.Lookahead.prototype.toString=function(){return"&"+this.expr};J.Apply.prototype.toString=function(){if(this.args.length>0){let e=this.args.map(t=>t.toString());return this.ruleName+"<"+e.join(",")+">"}else return this.ruleName};J.UnicodeChar.prototype.toString=function(){return"\\p{"+this.category+"}"};$e=E,Bs=Nn,{TerminalNode:vs}=Ui,{assert:ks}=x,{PExpr:Is,Terminal:ws}=$e,Vi=class e extends Is{constructor(t){super(),this.obj=t}_getString(t){let i=t.currentApplication().args[this.obj.index];return ks(i instanceof ws,"expected a Terminal expression"),i.obj}allowsSkippingPrecedingSpace(){return!0}eval(t){let{inputStream:i}=t,n=i.pos,r=this._getString(t);return i.matchString(r,!0)?(t.pushBinding(new vs(r.length),n),!0):(t.processFailure(n,this),!1)}getArity(){return 1}substituteParams(t){return new e(this.obj.substituteParams(t))}toDisplayString(){return this.obj.toDisplayString()+" (case-insensitive)"}toFailure(t){return new Bs(this,this.obj.toFailure(t)+" (case-insensitive)","description")}_isNullable(t,i){return this.obj._isNullable(t,i)}},Ps=Vi,Os=Qi;On.prototype={atEnd(){let e=this.pos===this.source.length;return this.examinedLength=Math.max(this.examinedLength,this.pos+1),e},next(){let e=this.source[this.pos++];return this.examinedLength=Math.max(this.examinedLength,this.pos),e},nextCharCode(){let e=this.next();return e&&e.charCodeAt(0)},nextCodePoint(){let e=this.source.slice(this.pos++).codePointAt(0);return e>65535&&(this.pos+=1),this.examinedLength=Math.max(this.examinedLength,this.pos),e},matchString(e,t){let i;if(t){for(i=0;i<e.length;i++){let n=this.next(),r=e[i];if(n==null||n.toUpperCase()!==r.toUpperCase())return!1}return!0}for(i=0;i<e.length;i++)if(this.next()!==e[i])return!1;return!0},sourceSlice(e,t){return this.source.slice(e,t)},interval(e,t){return new Os(this.source,e,t||this.pos)}};Ji=On,Wi=x,hn=ve,Rs=Qi;ke.prototype.succeeded=function(){return!!this._cst};ke.prototype.failed=function(){return!this.succeeded()};ke.prototype.getRightmostFailurePosition=function(){return this._rightmostFailurePosition};ke.prototype.getRightmostFailures=function(){if(!this._rightmostFailures){this.matcher.setInput(this.input);let e=this.matcher._match(this.startExpr,!1,this.getRightmostFailurePosition());this._rightmostFailures=e.getRightmostFailures()}return this._rightmostFailures};ke.prototype.toString=function(){return this.succeeded()?"[match succeeded]":"[match failed at position "+this.getRightmostFailurePosition()+"]"};ke.prototype.getExpectedText=function(){if(this.succeeded())throw new Error("cannot get expected text of a successful MatchResult");let e=new Wi.StringBuffer,t=this.getRightmostFailures();t=t.filter(i=>!i.isFluffy());for(let i=0;i<t.length;i++)i>0&&(i===t.length-1?e.append(t.length>2?", or ":" or "):e.append(", ")),e.append(t[i].toString());return e.contents()};ke.prototype.getInterval=function(){let e=this.getRightmostFailurePosition();return new Rs(this.input,e,e)};Rn=ke;Hn.prototype={isActive(e){return this.applicationMemoKeyStack.indexOf(e.toMemoKey())>=0},enter(e){this.applicationMemoKeyStack.push(e.toMemoKey())},exit(){this.applicationMemoKeyStack.pop()},startLeftRecursion(e,t){t.isLeftRecursion=!0,t.headApplication=e,t.nextLeftRecursion=this.currentLeftRecursion,this.currentLeftRecursion=t;let{applicationMemoKeyStack:i}=this,n=i.indexOf(e.toMemoKey())+1,r=i.slice(n);t.isInvolved=function(u){return r.indexOf(u)>=0},t.updateInvolvedApplicationMemoKeys=function(){for(let u=n;u<i.length;u++){let a=i[u];this.isInvolved(a)||r.push(a)}}},endLeftRecursion(){this.currentLeftRecursion=this.currentLeftRecursion.nextLeftRecursion},shouldUseMemoizedResult(e){if(!e.isLeftRecursion)return!0;let{applicationMemoKeyStack:t}=this;for(let i=0;i<t.length;i++){let n=t[i];if(e.isInvolved(n))return!1}return!0},memoize(e,t){return this.memo[e]=t,this.maxExaminedLength=Math.max(this.maxExaminedLength,t.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,t.rightmostFailureOffset),t},clearObsoleteEntries(e,t){if(e+this.maxExaminedLength<=t)return;let{memo:i}=this;this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,Object.keys(i).forEach(n=>{let r=i[n];e+r.examinedLength>t?delete i[n]:(this.maxExaminedLength=Math.max(this.maxExaminedLength,r.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,r.rightmostFailureOffset))})}};Hs=Hn,_s=Ji,Ms=Rn,Vs=Hs,Ws=In,ji=$e,js=ve;js.awaitBuiltInRules(e=>{_n=e.rules.applySyntactic.body});Li=new ji.Apply("spaces");Mn.prototype={posToOffset(e){return e-this._posStack[this._posStack.length-1]},enterApplication(e,t){this._posStack.push(this.inputStream.pos),this._applicationStack.push(t),this.inLexifiedContextStack.push(!1),e.enter(t),this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this.rightmostFailurePosition=-1},exitApplication(e,t){let i=this._posStack.pop();this._applicationStack.pop(),this.inLexifiedContextStack.pop(),e.exit(),this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,this._rightmostFailurePositionStack.pop()),t&&this.pushBinding(t,i)},enterLexifiedContext(){this.inLexifiedContextStack.push(!0)},exitLexifiedContext(){this.inLexifiedContextStack.pop()},currentApplication(){return this._applicationStack[this._applicationStack.length-1]},inSyntacticContext(){let e=this.currentApplication();return e?e.isSyntactic()&&!this.inLexifiedContext():this.startExpr.factors[0].isSyntactic()},inLexifiedContext(){return this.inLexifiedContextStack[this.inLexifiedContextStack.length-1]},skipSpaces(){return this.pushFailuresInfo(),this.eval(Li),this.popBinding(),this.popFailuresInfo(),this.inputStream.pos},skipSpacesIfInSyntacticContext(){return this.inSyntacticContext()?this.skipSpaces():this.inputStream.pos},maybeSkipSpacesBefore(e){return e.allowsSkippingPrecedingSpace()&&e!==Li?this.skipSpacesIfInSyntacticContext():this.inputStream.pos},pushBinding(e,t){this._bindings.push(e),this._bindingOffsets.push(this.posToOffset(t))},popBinding(){this._bindings.pop(),this._bindingOffsets.pop()},numBindings(){return this._bindings.length},truncateBindings(e){for(;this._bindings.length>e;)this.popBinding()},getCurrentPosInfo(){return this.getPosInfo(this.inputStream.pos)},getPosInfo(e){let t=this.memoTable[e];return t||(t=this.memoTable[e]=new Vs),t},processFailure(e,t){if(this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,e),this.recordedFailures&&e===this.positionToRecordFailures){let i=this.currentApplication();i&&(t=t.substituteParams(i.args)),this.recordFailure(t.toFailure(this.grammar),!1)}},recordFailure(e,t){let i=e.toKey();this.recordedFailures[i]?this.recordedFailures[i].isFluffy()&&!e.isFluffy()&&this.recordedFailures[i].clearFluffy():this.recordedFailures[i]=t?e.clone():e},recordFailures(e,t){Object.keys(e).forEach(i=>{this.recordFailure(e[i],t)})},cloneRecordedFailures(){if(!this.recordedFailures)return;let e=Object.create(null);return Object.keys(this.recordedFailures).forEach(t=>{e[t]=this.recordedFailures[t].clone()}),e},getRightmostFailurePosition(){return this.rightmostFailurePosition},_getRightmostFailureOffset(){return this.rightmostFailurePosition>=0?this.posToOffset(this.rightmostFailurePosition):-1},getMemoizedTraceEntry(e,t){let i=this.memoTable[e];if(i&&t instanceof ji.Apply){let n=i.memo[t.toMemoKey()];if(n&&n.traceEntry){let r=n.traceEntry.cloneWithExpr(t);return r.isMemoized=!0,r}}return null},getTraceEntry(e,t,i,n){if(t instanceof ji.Apply){let r=this.currentApplication(),u=r?r.args:[];t=t.substituteParams(u)}return this.getMemoizedTraceEntry(e,t)||new Ws(this.input,e,this.inputStream.pos,t,i,n,this.trace)},isTracing(){return!!this.trace},hasNecessaryInfo(e){return this.trace&&!e.traceEntry?!1:this.recordedFailures&&this.inputStream.pos+e.rightmostFailureOffset===this.positionToRecordFailures?!!e.failuresAtRightmostPosition:!0},useMemoizedResult(e,t){this.trace&&this.trace.push(t.traceEntry);let i=this.inputStream.pos+t.rightmostFailureOffset;return this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,i),this.recordedFailures&&this.positionToRecordFailures===i&&t.failuresAtRightmostPosition&&this.recordFailures(t.failuresAtRightmostPosition,!0),this.inputStream.examinedLength=Math.max(this.inputStream.examinedLength,t.examinedLength+e),t.value?(this.inputStream.pos+=t.matchLength,this.pushBinding(t.value,e),!0):!1},eval(e){let{inputStream:t}=this,i=this._bindings.length,n;this.recordedFailures&&(n=this.recordedFailures,this.recordedFailures=Object.create(null));let r=t.pos,u=this.maybeSkipSpacesBefore(e),a;this.trace&&(a=this.trace,this.trace=[]);let o=e.eval(this);if(this.trace){let p=this._bindings.slice(i),d=this.getTraceEntry(u,e,o,p);d.isImplicitSpaces=e===Li,d.isRootNode=e===this.startExpr,a.push(d),this.trace=a}return o?this.recordedFailures&&t.pos===this.positionToRecordFailures&&Object.keys(this.recordedFailures).forEach(p=>{this.recordedFailures[p].makeFluffy()}):(t.pos=r,this.truncateBindings(i)),this.recordedFailures&&this.recordFailures(n,!1),e===_n&&this.skipSpaces(),o},getMatchResult(){this.eval(this.startExpr);let e;this.recordedFailures&&(e=Object.keys(this.recordedFailures).map(i=>this.recordedFailures[i]));let t=this._bindings[0];return t&&(t.grammar=this.grammar),new Ms(this.matcher,this.input,this.startExpr,t,this._bindingOffsets[0],this.rightmostFailurePosition,e)},getTrace(){this.trace=[];let e=this.getMatchResult(),t=this.trace[this.trace.length-1];return t.result=e,t},pushFailuresInfo(){this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this._recordedFailuresStack.push(this.recordedFailures)},popFailuresInfo(){this.rightmostFailurePosition=this._rightmostFailurePositionStack.pop(),this.recordedFailures=this._recordedFailuresStack.pop()}};Gs=Mn,$s=Gs,fn=$e;Ie.prototype.getInput=function(){return this.input};Ie.prototype.setInput=function(e){return this.input!==e&&this.replaceInputRange(0,this.input.length,e),this};Ie.prototype.replaceInputRange=function(e,t,i){let n=this.input;if(e<0||e>n.length||t<0||t>n.length||e>t)throw new Error("Invalid indices: "+e+" and "+t);this.input=n.slice(0,e)+i+n.slice(t);let r=this.memoTable.slice(t);this.memoTable.length=e;for(let u=0;u<i.length;u++)this.memoTable.push(void 0);r.forEach(function(u){this.memoTable.push(u)},this);for(let u=0;u<e;u++){let a=this.memoTable[u];a&&a.clearObsoleteEntries(u,e)}return this};Ie.prototype.match=function(e){return this._match(this._getStartExpr(e),!1)};Ie.prototype.trace=function(e){return this._match(this._getStartExpr(e),!0)};Ie.prototype._match=function(e,t,i){let n=new $s(this,e,i);return t?n.getTrace():n.getMatchResult()};Ie.prototype._getStartExpr=function(e){let t=e||this.grammar.defaultStartRule;if(!t)throw new Error("Missing start rule argument -- the grammar has no default start rule.");let i=this.grammar.parseApplication(t);return new fn.Seq([i,fn.end])};Us=Ie,Qs=Ji,{IterationNode:zs}=Ui,Ks=Rn,Zi=x,Ys=xe,Vn=ve,yt=[],Xi=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),jt=class{constructor(t,i,n){this._node=t,this.source=i,this._baseInterval=n,t.isNonterminal()&&Zi.assert(i===n),this._childWrappers=[]}toString(){return"[semantics wrapper for "+this._node.grammar.name+"]"}_forgetMemoizedResultFor(t){delete this._node[this._semantics.attributeKeys[t]],this.children.forEach(i=>{i._forgetMemoizedResultFor(t)})}child(t){if(!(0<=t&&t<this._node.numChildren()))return;let i=this._childWrappers[t];if(!i){let n=this._node.childAt(t),r=this._node.childOffsets[t],u=this._baseInterval.subInterval(r,n.matchLength),a=n.isNonterminal()?u:this._baseInterval;i=this._childWrappers[t]=this._semantics.wrap(n,u,a)}return i}_children(){for(let t=0;t<this._node.numChildren();t++)this.child(t);return this._childWrappers}isIteration(){return this._node.isIteration()}isTerminal(){return this._node.isTerminal()}isNonterminal(){return this._node.isNonterminal()}isSyntactic(){return this.isNonterminal()&&this._node.isSyntactic()}isLexical(){return this.isNonterminal()&&this._node.isLexical()}isOptional(){return this._node.isOptional()}iteration(t){let i=t||[],n=i.map(a=>a._node),r=new zs(n,[],-1,!1),u=this._semantics.wrap(r,null,null);return u._childWrappers=i,u}get children(){return this._children()}get ctorName(){return this._node.ctorName}get interval(){throw new Error("The `interval` property is deprecated -- use `source` instead")}get numChildren(){return this._node.numChildren()}get sourceString(){return this.source.contents}};_.prototype.toString=function(){return"[semantics for "+this.grammar.name+"]"};_.prototype.checkActionDictsIfHaventAlready=function(){this.checkedActionDicts||(this.checkActionDicts(),this.checkedActionDicts=!0)};_.prototype.checkActionDicts=function(){let e;for(e in this.operations)this.operations[e].checkActionDict(this.grammar);for(e in this.attributes)this.attributes[e].checkActionDict(this.grammar)};_.prototype.toRecipe=function(e){function t(n){return n.super!==_.BuiltInSemantics._getSemantics()}let i=`(function(g) {
`;if(t(this)){i+="  var semantics = "+this.super.toRecipe(!0)+"(g";let n=this.super.grammar,r=this.grammar;for(;r!==n;)i+=".superGrammar",r=r.superGrammar;i+=`);
`,i+="  return g.extendSemantics(semantics)"}else i+="  return g.createSemantics()";return["Operation","Attribute"].forEach(n=>{let r=this[n.toLowerCase()+"s"];Object.keys(r).forEach(u=>{let{actionDict:a,formals:o,builtInDefault:p}=r[u],d=u;o.length>0&&(d+="("+o.join(", ")+")");let l;t(this)&&this.super[n.toLowerCase()+"s"][u]?l="extend"+n:l="add"+n,i+=`
    .`+l+"("+JSON.stringify(d)+", {";let c=[];Object.keys(a).forEach(m=>{if(a[m]!==p){let g=a[m].toString().trim();g=g.replace(/^.*\(/,"function("),c.push(`
      `+JSON.stringify(m)+": "+g)}}),i+=c.join(",")+`
    })`})}),i+=`;
  })`,e||(i=`(function() {
  var grammar = this.fromRecipe(`+this.grammar.toRecipe()+`);
  var semantics = `+i+`(grammar);
  return semantics;
});
`),i};_.prototype.addOperationOrAttribute=function(e,t,i){let n=e+"s",r=Wn(t,e),{name:u}=r,{formals:a}=r;this.assertNewName(u,e);let o=Js(e,u,l),p={_default:o};Object.keys(i).forEach(c=>{p[c]=i[c]});let d=e==="operation"?new Ge(u,a,p,o):new Lt(u,p,o);d.checkActionDict(this.grammar),this[n][u]=d;function l(...c){let m=this._semantics[n][u];if(arguments.length!==m.formals.length)throw new Error("Invalid number of arguments passed to "+u+" "+e+" (expected "+m.formals.length+", got "+arguments.length+")");let g=Object.create(null);for(let[y,s]of Object.entries(c)){let f=m.formals[y];g[f]=s}let h=this.args;this.args=g;let A=m.execute(this._semantics,this);return this.args=h,A}e==="operation"?(this.Wrapper.prototype[u]=l,this.Wrapper.prototype[u].toString=function(){return"["+u+" operation]"}):(Object.defineProperty(this.Wrapper.prototype,u,{get:l,configurable:!0}),Object.defineProperty(this.attributeKeys,u,{value:Vn.uniqueId(u)}))};_.prototype.extendOperationOrAttribute=function(e,t,i){let n=e+"s";if(Wn(t,"attribute"),!(this.super&&t in this.super[n]))throw new Error("Cannot extend "+e+" '"+t+"': did not inherit an "+e+" with that name");if(Xi(this[n],t))throw new Error("Cannot extend "+e+" '"+t+"' again");let r=this[n][t].formals,u=this[n][t].actionDict,a=Object.create(u);Object.keys(i).forEach(o=>{a[o]=i[o]}),this[n][t]=e==="operation"?new Ge(t,r,a):new Lt(t,a),this[n][t].checkActionDict(this.grammar)};_.prototype.assertNewName=function(e,t){if(Xi(jt.prototype,e))throw new Error("Cannot add "+t+" '"+e+"': that's a reserved name");if(e in this.operations)throw new Error("Cannot add "+t+" '"+e+"': an operation with that name already exists");if(e in this.attributes)throw new Error("Cannot add "+t+" '"+e+"': an attribute with that name already exists")};_.prototype.wrap=function(e,t,i){let n=i||t;return e instanceof this.Wrapper?e:new this.Wrapper(e,t,n)};_.createSemantics=function(e,t){let i=new _(e,t!==void 0?t:_.BuiltInSemantics._getSemantics()),n=function(u){if(!(u instanceof Ks))throw new TypeError("Semantics expected a MatchResult, but got "+Zi.unexpectedObjToString(u));if(u.failed())throw new TypeError("cannot apply Semantics to "+u.toString());let a=u._cst;if(a.grammar!==e)throw new Error("Cannot use a MatchResult from grammar '"+a.grammar.name+"' with a semantics for '"+e.name+"'");let o=new Qs(u.input);return i.wrap(a,o.interval(u._cstOffset,u.input.length))};return n.addOperation=function(r,u){return i.addOperationOrAttribute("operation",r,u),n},n.extendOperation=function(r,u){return i.extendOperationOrAttribute("operation",r,u),n},n.addAttribute=function(r,u){return i.addOperationOrAttribute("attribute",r,u),n},n.extendAttribute=function(r,u){return i.extendOperationOrAttribute("attribute",r,u),n},n._getActionDict=function(r){let u=i.operations[r]||i.attributes[r];if(!u)throw new Error('"'+r+'" is not a valid operation or attribute name in this semantics for "'+e.name+'"');return u.actionDict},n._remove=function(r){let u;return r in i.operations?(u=i.operations[r],delete i.operations[r]):r in i.attributes&&(u=i.attributes[r],delete i.attributes[r]),delete i.Wrapper.prototype[r],u},n.getOperationNames=function(){return Object.keys(i.operations)},n.getAttributeNames=function(){return Object.keys(i.attributes)},n.getGrammar=function(){return i.grammar},n.toRecipe=function(r){return i.toRecipe(r)},n.toString=i.toString.bind(i),n._getSemantics=function(){return i},n};Ge=class{constructor(t,i,n,r){this.name=t,this.formals=i,this.actionDict=n,this.builtInDefault=r}checkActionDict(t){t._checkTopDownActionDict(this.typeName,this.name,this.actionDict)}execute(t,i){try{let{ctorName:n}=i._node,r=this.actionDict[n];return r?(yt.push([this,n]),r.apply(i,i._children())):i.isNonterminal()&&(r=this.actionDict._nonterminal,r)?(yt.push([this,"_nonterminal",n]),r.apply(i,i._children())):(yt.push([this,"default action",n]),this.actionDict._default.apply(i,i._children()))}finally{yt.pop()}}};Ge.prototype.typeName="operation";Lt=class extends Ge{constructor(t,i,n){super(t,[],i,n)}execute(t,i){let n=i._node,r=t.attributeKeys[this.name];return Xi(n,r)||(n[r]=Ge.prototype.execute.call(this,t,i)),n[r]}};Lt.prototype.typeName="attribute";jn=_,Zs=Ps,Xs=Us,Dn=jn,Cn=x,An=xe,de=$e,yn=["_iter","_terminal","_nonterminal","_default"];el=e=>e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029");We.initApplicationParser=function(e,t){Gn=e,$n=t};We.prototype={matcher(){return new Xs(this)},isBuiltIn(){return this===We.ProtoBuiltInRules||this===We.BuiltInRules},equals(e){if(this===e)return!0;if(e==null||this.name!==e.name||this.defaultStartRule!==e.defaultStartRule||!(this.superGrammar===e.superGrammar||this.superGrammar.equals(e.superGrammar)))return!1;let t=En(this),i=En(e);return t.length===i.length&&t.every((n,r)=>n.description===i[r].description&&n.formals.join(",")===i[r].formals.join(",")&&n.body.toString()===i[r].body.toString())},match(e,t){let i=this.matcher();return i.replaceInputRange(0,0,e),i.match(t)},trace(e,t){let i=this.matcher();return i.replaceInputRange(0,0,e),i.trace(t)},createSemantics(){return Dn.createSemantics(this)},extendSemantics(e){return Dn.createSemantics(this,e._getSemantics())},_checkTopDownActionDict(e,t,i){let n=[];for(let r in i){let u=i[r];if(!yn.includes(r)&&!(r in this.rules)){n.push(`'${r}' is not a valid semantic action for '${this.name}'`);continue}if(typeof u!="function"){n.push(`'${r}' must be a function in an action dictionary for '${this.name}'`);continue}let o=u.length,p=this._topDownActionArity(r);if(o!==p){let d;r==="_iter"||r==="_nonterminal"?d=`it should use a rest parameter, e.g. \`${r}(...children) {}\`. NOTE: this is new in Ohm v16 \u2014 see https://ohmjs.org/d/ati for details.`:d=`expected ${p}, got ${o}`,n.push(`Semantic action '${r}' has the wrong arity: ${d}`)}}if(n.length>0){let r=n.map(a=>"- "+a),u=new Error([`Found errors in the action dictionary of the '${t}' ${e}:`,...r].join(`
`));throw u.problems=n,u}},_topDownActionArity(e){return yn.includes(e)?0:this.rules[e].body.getArity()},_inheritsFrom(e){let t=this.superGrammar;for(;t;){if(t.equals(e,!0))return!0;t=t.superGrammar}return!1},toRecipe(e=void 0){let t={};this.source&&(t.source=this.source.contents);let i=null;this.defaultStartRule&&(i=this.defaultStartRule);let n={};Object.keys(this.rules).forEach(a=>{let o=this.rules[a],{body:p}=o,d=!this.superGrammar||!this.superGrammar.rules[a],l;d?l="define":l=p instanceof de.Extend?"extend":"override";let c={};if(o.source&&this.source){let h=o.source.relativeTo(this.source);c.sourceInterval=[h.startIdx,h.endIdx]}let m=d?o.description:null,g=p.outputRecipe(o.formals,this.source);n[a]=[l,c,m,o.formals,g]});let r="null";e?r=e:this.superGrammar&&!this.superGrammar.isBuiltIn()&&(r=this.superGrammar.toRecipe());let u=[...["grammar",t,this.name].map(JSON.stringify),r,...[i,n].map(JSON.stringify)];return el(`[${u.join(",")}]`)},toOperationActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()},toAttributeActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()},_toOperationOrAttributeActionDictionaryTemplate(){let e=new Cn.StringBuffer;e.append("{");let t=!0;for(let i in this.rules){let{body:n}=this.rules[i];t?t=!1:e.append(","),e.append(`
`),e.append("  "),this.addSemanticActionTemplate(i,n,e)}return e.append(`
}`),e.contents()},addSemanticActionTemplate(e,t,i){i.append(e),i.append(": function(");let n=this._topDownActionArity(e);i.append(Cn.repeat("_",n).join(", ")),i.append(`) {
`),i.append("  }")},parseApplication(e){let t;if(e.indexOf("<")===-1)t=new de.Apply(e);else{let n=Gn.match(e,"Base_application");t=$n(n,{})}if(!(t.ruleName in this.rules))throw An.undeclaredRule(t.ruleName,this.name);let{formals:i}=this.rules[t.ruleName];if(i.length!==t.args.length){let{source:n}=this.rules[t.ruleName];throw An.wrongNumberOfParameters(t.ruleName,i.length,t.args.length,n)}return t}};We.ProtoBuiltInRules=new We("ProtoBuiltInRules",void 0,{any:{body:de.any,formals:[],description:"any character",primitive:!0},end:{body:de.end,formals:[],description:"end of input",primitive:!0},caseInsensitive:{body:new Zs(new de.Param(0)),formals:["str"],primitive:!0},lower:{body:new de.UnicodeChar("Ll"),formals:[],description:"a lowercase letter",primitive:!0},upper:{body:new de.UnicodeChar("Lu"),formals:[],description:"an uppercase letter",primitive:!0},unicodeLtmo:{body:new de.UnicodeChar("Ltmo"),formals:[],description:"a Unicode character in Lt, Lm, or Lo",primitive:!0},spaces:{body:new de.Star(new de.Apply("space")),formals:[]},space:{body:new de.Range("\0"," "),formals:[],description:"a space"}});Ut=We,Gi=Ut,tl=Ji,Un=x,Be=xe,il=$e;re.prototype.sourceInterval=function(e,t){return this.source.subInterval(e,t-e)};re.prototype.ensureSuperGrammar=function(){return this.superGrammar||this.withSuperGrammar(this.name==="BuiltInRules"?Gi.ProtoBuiltInRules:Gi.BuiltInRules),this.superGrammar};re.prototype.ensureSuperGrammarRuleForOverriding=function(e,t){let i=this.ensureSuperGrammar().rules[e];if(!i)throw Be.cannotOverrideUndeclaredRule(e,this.superGrammar.name,t);return i};re.prototype.installOverriddenOrExtendedRule=function(e,t,i,n){let r=Un.getDuplicates(t);if(r.length>0)throw Be.duplicateParameterNames(e,r,n);let u=this.ensureSuperGrammar().rules[e],a=u.formals,o=a?a.length:0;if(t.length!==o)throw Be.wrongNumberOfParameters(e,o,t.length,n);return this.install(e,t,i,u.description,n)};re.prototype.install=function(e,t,i,n,r){return this.rules[e]={body:i.introduceParams(t),formals:t,description:n,source:r},this};re.prototype.withSuperGrammar=function(e){if(this.superGrammar)throw new Error("the super grammar of a GrammarDecl cannot be set more than once");return this.superGrammar=e,this.rules=Object.create(e.rules),e.isBuiltIn()||(this.defaultStartRule=e.defaultStartRule),this};re.prototype.withDefaultStartRule=function(e){return this.defaultStartRule=e,this};re.prototype.withSource=function(e){return this.source=new tl(e).interval(0,e.length),this};re.prototype.build=function(){let e=new Gi(this.name,this.ensureSuperGrammar(),this.rules,this.defaultStartRule),t=[],i=!1;return Object.keys(e.rules).forEach(n=>{let{body:r}=e.rules[n];try{r.assertChoicesHaveUniformArity(n)}catch(u){t.push(u)}try{r.assertAllApplicationsAreValid(n,e)}catch(u){t.push(u),i=!0}}),i||Object.keys(e.rules).forEach(n=>{let{body:r}=e.rules[n];try{r.assertIteratedExprsAreNotNullable(e,[])}catch(u){t.push(u)}}),t.length>0&&Be.throwErrors(t),this.source&&(e.source=this.source),e};re.prototype.define=function(e,t,i,n,r){if(this.ensureSuperGrammar(),this.superGrammar.rules[e])throw Be.duplicateRuleDeclaration(e,this.name,this.superGrammar.name,r);if(this.rules[e])throw Be.duplicateRuleDeclaration(e,this.name,this.name,r);let u=Un.getDuplicates(t);if(u.length>0)throw Be.duplicateParameterNames(e,u,r);return this.install(e,t,i,n,r)};re.prototype.override=function(e,t,i,n,r){return this.ensureSuperGrammarRuleForOverriding(e,r),this.installOverriddenOrExtendedRule(e,t,i,r),this};re.prototype.extend=function(e,t,i,n,r){if(!this.ensureSuperGrammar().rules[e])throw Be.cannotExtendUndeclaredRule(e,this.superGrammar.name,r);let a=new il.Extend(this.superGrammar,e,i);return a.source=i.source,this.installOverriddenOrExtendedRule(e,t,a,r),this};rl=re,nl=Ut,Sn=rl,q=$e;Qn.prototype={currentDecl:null,currentRuleName:null,newGrammar(e){return new Sn(e)},grammar(e,t,i,n,r){let u=new Sn(t);return i&&u.withSuperGrammar(i instanceof nl?i:this.fromRecipe(i)),n&&u.withDefaultStartRule(n),e&&e.source&&u.withSource(e.source),this.currentDecl=u,Object.keys(r).forEach(a=>{this.currentRuleName=a;let o=r[a],p=o[0],d=o[1],l=o[2],c=o[3],m=this.fromRecipe(o[4]),g;u.source&&d&&d.sourceInterval&&(g=u.source.subInterval(d.sourceInterval[0],d.sourceInterval[1]-d.sourceInterval[0])),u[p](a,c,m,l,g)}),this.currentRuleName=this.currentDecl=null,u.build()},terminal(e){return new q.Terminal(e)},range(e,t){return new q.Range(e,t)},param(e){return new q.Param(e)},alt(...e){let t=[];for(let i of e)i instanceof q.PExpr||(i=this.fromRecipe(i)),i instanceof q.Alt?t=t.concat(i.terms):t.push(i);return t.length===1?t[0]:new q.Alt(t)},seq(...e){let t=[];for(let i of e)i instanceof q.PExpr||(i=this.fromRecipe(i)),i instanceof q.Seq?t=t.concat(i.factors):t.push(i);return t.length===1?t[0]:new q.Seq(t)},star(e){return e instanceof q.PExpr||(e=this.fromRecipe(e)),new q.Star(e)},plus(e){return e instanceof q.PExpr||(e=this.fromRecipe(e)),new q.Plus(e)},opt(e){return e instanceof q.PExpr||(e=this.fromRecipe(e)),new q.Opt(e)},not(e){return e instanceof q.PExpr||(e=this.fromRecipe(e)),new q.Not(e)},la(e){return this.lookahead(e)},lookahead(e){return e instanceof q.PExpr||(e=this.fromRecipe(e)),new q.Lookahead(e)},lex(e){return e instanceof q.PExpr||(e=this.fromRecipe(e)),new q.Lex(e)},app(e,t){return t&&t.length>0&&(t=t.map(function(i){return i instanceof q.PExpr?i:this.fromRecipe(i)},this)),new q.Apply(e,t)},splice(e,t){return new q.Splice(this.currentDecl.superGrammar,this.currentRuleName,e.map(i=>this.fromRecipe(i)),t.map(i=>this.fromRecipe(i)))},fromRecipe(e){let t=e[0]==="grammar"?e.slice(1):e.slice(2),i=this[e[0]](...t),n=e[1];return n&&n.sourceInterval&&this.currentDecl&&i.withSource(this.currentDecl.sourceInterval(...n.sourceInterval)),i}};zn=Qn,ul="ohm-js",al="16.6.0",ol="An object-oriented language for parsing and pattern matching",sl="https://github.com/harc/ohm",ll=["parser","compiler","pattern matching","pattern-matching","ometa","ometa/js","ometa-js","ometajs","rapid","prototyping"],cl="https://ohmjs.org",pl="https://github.com/harc/ohm/issues",dl="index.js",ml="dist/ohm.esm.js",gl=["src","dist","extras","third_party","index.d.ts"],hl="index.d.ts",fl={prebootstrap:"bash scripts/prebootstrap",bootstrap:"bash scripts/bootstrap --test || (echo 'Bootstrap failed.' && mv -v dist/ohm-grammar.js.old dist/ohm-grammar.js && mv -v dist/built-in-rules.js.old dist/built-in-rules.js && mv -v dist/operations-and-attributes.js.old dist/operations-and-attributes.js)",build:"yarn build-debug && webpack --mode=production","build-debug":"webpack --mode=development && yarn build-esm && node scripts/generate-types.mjs","build-esm":"rollup -c rollup.config.mjs",clean:"rm -f dist/ohm.js dist/ohm.min.js",lint:"eslint . --ignore-path ../.eslintignore",format:"prettier . --write --ignore-path ../.prettierignore --config ../.prettierrc && eslint . --ignore-path ../.eslintignore --fix",test:"ava && ava --config ava-ts.config.js test/test-typings.ts","test-watch":"ava --watch","pre-commit":"yarn run lint && yarn run build && yarn run test",prepublishOnly:"bash scripts/prepublishOnly",prepack:"cp ../../README.md . && yarn build",postpack:"rm README.md",postpublish:"echo '\u{1F449}  Now go to https://github.com/harc/ohm/releases and create a release.'","unsafe-bootstrap":"bash scripts/bootstrap","update-contributors":"bash scripts/update-contributors",watch:"webpack --mode=development --watch"},Dl="MIT",Cl="Alex Warth <alexwarth@gmail.com> (http://tinlizzie.org/~awarth)",Al=["Patrick Dubroy <pdubroy@gmail.com>","Meixian Li <lmeixian@gmail.com>","Marko R\xF6der <m.roeder@photon-software.de>","Tony Garnock-Jones <tonygarnockjones@gmail.com>","Saketh Kasibatla <sake.kasi@gmail.com>","Lionel Landwerlin <llandwerlin@gmail.com>","Jason Merrill <jwmerrill@gmail.com>","Ray Toal <rtoal@lmu.edu>","Yoshiki Ohshima <Yoshiki.Ohshima@acm.org>","megabuz <3299889+megabuz@users.noreply.github.com>","Jonathan Edwards <JonathanMEdwards@gmail.com>","Milan Lajto\u0161 <milan.lajtos@me.com>","Neil Jewers <njjewers@uwaterloo.ca>","stagas <gstagas@gmail.com>","AngryPowman <angrypowman@qq.com>","Arthur Carabott <arthurc@gmail.com>","Casey Olson <casey.m.olson@gmail.com>","Daniel Tomlinson <DanielTomlinson@me.com>","Ian Harris <ian@fofgof.xyz>","Justin Chase <justin.m.chase@gmail.com>","Leslie Ying <acetophore@users.noreply.github.com>","Luca Guzzon <luca.guzzon@gmail.com>","Mike Niebling <(none)>","Patrick Dubroy <patrick@sourcegraph.com>","Pierre Donias <pierre.donias@gmail.com>","Stan Rozenraukh <stan@stanistan.com>","Stephan Seidt <stephan.seidt@gmail.com>","Steve Phillips <steve@tryingtobeawesome.com>","Szymon Kaliski <kaliskiszymon@gmail.com>","Thomas Nyberg <tomnyberg@gmail.com>","Vse Mozhet Byt <vsemozhetbyt@gmail.com>","Wil Chung <10446+iamwilhelm@users.noreply.github.com>","Zachary Sakowitz <zsakowitz@gmail.com>","abego <ub@abego-software.de>","acslk <d_vd415@hotmail.com>","codeZeilen <codeZeilen@users.noreply.github.com>","kassadin <kassadin@foxmail.com>","owch <bowenrainyday@gmail.com>","sfinnie <scott.finnie@gmail.com>"],yl={},El={"@ohm-js/cli":"^1.0.0","@rollup/plugin-commonjs":"^21.0.1","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^13.1.3",ava:"^3.15.0","ava-spec":"^1.1.1",dedent:"^0.7.0",eslint:"^7.9.0","eslint-config-google":"^0.14.0","eslint-plugin-ava":"^11.0.0","eslint-plugin-camelcase-ohm":"^0.2.1","eslint-plugin-no-extension-in-require":"^0.2.0",husky:"^4.2.5",jsdom:"^9.9.1",json:"^9.0.6",markscript:"^0.5.0","node-static":"^0.7.11","ohm-grammar-ecmascript":"^1.0.0",rollup:"^2.63.0","ts-loader":"^8.0.4","ts-node":"^9.0.0",typescript:"^4.0.3","walk-sync":"^2.2.0",webpack:"^4.44.2","webpack-cli":"^3.3.12"},Sl={node:">=0.12.1"},Ll={name:ul,version:al,description:ol,repository:sl,keywords:ll,homepage:cl,bugs:pl,main:dl,module:ml,files:gl,types:hl,scripts:fl,license:Dl,author:Cl,contributors:Al,dependencies:yl,devDependencies:El,engines:Sl},xl=typeof __GLOBAL_OHM_VERSION__=="string"?__GLOBAL_OHM_VERSION__:Ll.version,bt={},Ln=zn;bt.makeRecipe=bl;({makeRecipe:Tl}=bt),ql=Tl(["grammar",{source:`BuiltInRules {

  alnum  (an alpha-numeric character)
    = letter
    | digit

  letter  (a letter)
    = lower
    | upper
    | unicodeLtmo

  digit  (a digit)
    = "0".."9"

  hexDigit  (a hexadecimal digit)
    = digit
    | "a".."f"
    | "A".."F"

  ListOf<elem, sep>
    = NonemptyListOf<elem, sep>
    | EmptyListOf<elem, sep>

  NonemptyListOf<elem, sep>
    = elem (sep elem)*

  EmptyListOf<elem, sep>
    = /* nothing */

  listOf<elem, sep>
    = nonemptyListOf<elem, sep>
    | emptyListOf<elem, sep>

  nonemptyListOf<elem, sep>
    = elem (sep elem)*

  emptyListOf<elem, sep>
    = /* nothing */

  // Allows a syntactic rule application within a lexical context.
  applySyntactic<app> = app
}`},"BuiltInRules",null,null,{alnum:["define",{sourceInterval:[18,78]},"an alpha-numeric character",[],["alt",{sourceInterval:[60,78]},["app",{sourceInterval:[60,66]},"letter",[]],["app",{sourceInterval:[73,78]},"digit",[]]]],letter:["define",{sourceInterval:[82,142]},"a letter",[],["alt",{sourceInterval:[107,142]},["app",{sourceInterval:[107,112]},"lower",[]],["app",{sourceInterval:[119,124]},"upper",[]],["app",{sourceInterval:[131,142]},"unicodeLtmo",[]]]],digit:["define",{sourceInterval:[146,177]},"a digit",[],["range",{sourceInterval:[169,177]},"0","9"]],hexDigit:["define",{sourceInterval:[181,254]},"a hexadecimal digit",[],["alt",{sourceInterval:[219,254]},["app",{sourceInterval:[219,224]},"digit",[]],["range",{sourceInterval:[231,239]},"a","f"],["range",{sourceInterval:[246,254]},"A","F"]]],ListOf:["define",{sourceInterval:[258,336]},null,["elem","sep"],["alt",{sourceInterval:[282,336]},["app",{sourceInterval:[282,307]},"NonemptyListOf",[["param",{sourceInterval:[297,301]},0],["param",{sourceInterval:[303,306]},1]]],["app",{sourceInterval:[314,336]},"EmptyListOf",[["param",{sourceInterval:[326,330]},0],["param",{sourceInterval:[332,335]},1]]]]],NonemptyListOf:["define",{sourceInterval:[340,388]},null,["elem","sep"],["seq",{sourceInterval:[372,388]},["param",{sourceInterval:[372,376]},0],["star",{sourceInterval:[377,388]},["seq",{sourceInterval:[378,386]},["param",{sourceInterval:[378,381]},1],["param",{sourceInterval:[382,386]},0]]]]],EmptyListOf:["define",{sourceInterval:[392,434]},null,["elem","sep"],["seq",{sourceInterval:[438,438]}]],listOf:["define",{sourceInterval:[438,516]},null,["elem","sep"],["alt",{sourceInterval:[462,516]},["app",{sourceInterval:[462,487]},"nonemptyListOf",[["param",{sourceInterval:[477,481]},0],["param",{sourceInterval:[483,486]},1]]],["app",{sourceInterval:[494,516]},"emptyListOf",[["param",{sourceInterval:[506,510]},0],["param",{sourceInterval:[512,515]},1]]]]],nonemptyListOf:["define",{sourceInterval:[520,568]},null,["elem","sep"],["seq",{sourceInterval:[552,568]},["param",{sourceInterval:[552,556]},0],["star",{sourceInterval:[557,568]},["seq",{sourceInterval:[558,566]},["param",{sourceInterval:[558,561]},1],["param",{sourceInterval:[562,566]},0]]]]],emptyListOf:["define",{sourceInterval:[572,682]},null,["elem","sep"],["seq",{sourceInterval:[685,685]}]],applySyntactic:["define",{sourceInterval:[685,710]},null,["app"],["param",{sourceInterval:[707,710]},0]]}]),Fl=Ut;Fl.BuiltInRules=ql;({makeRecipe:Nl}=bt),Bl=Nl(["grammar",{source:`OperationsAndAttributes {

  AttributeSignature =
    name

  OperationSignature =
    name Formals?

  Formals
    = "(" ListOf<name, ","> ")"

  name  (a name)
    = nameFirst nameRest*

  nameFirst
    = "_"
    | letter

  nameRest
    = "_"
    | alnum

}`},"OperationsAndAttributes",null,"AttributeSignature",{AttributeSignature:["define",{sourceInterval:[29,58]},null,[],["app",{sourceInterval:[54,58]},"name",[]]],OperationSignature:["define",{sourceInterval:[62,100]},null,[],["seq",{sourceInterval:[87,100]},["app",{sourceInterval:[87,91]},"name",[]],["opt",{sourceInterval:[92,100]},["app",{sourceInterval:[92,99]},"Formals",[]]]]],Formals:["define",{sourceInterval:[104,143]},null,[],["seq",{sourceInterval:[118,143]},["terminal",{sourceInterval:[118,121]},"("],["app",{sourceInterval:[122,139]},"ListOf",[["app",{sourceInterval:[129,133]},"name",[]],["terminal",{sourceInterval:[135,138]},","]]],["terminal",{sourceInterval:[140,143]},")"]]],name:["define",{sourceInterval:[147,187]},"a name",[],["seq",{sourceInterval:[168,187]},["app",{sourceInterval:[168,177]},"nameFirst",[]],["star",{sourceInterval:[178,187]},["app",{sourceInterval:[178,186]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[191,223]},null,[],["alt",{sourceInterval:[207,223]},["terminal",{sourceInterval:[207,210]},"_"],["app",{sourceInterval:[217,223]},"letter",[]]]],nameRest:["define",{sourceInterval:[227,257]},null,[],["alt",{sourceInterval:[242,257]},["terminal",{sourceInterval:[242,245]},"_"],["app",{sourceInterval:[252,257]},"alnum",[]]]]}]),Gt=jn,vl=ve;vl.awaitBuiltInRules(e=>{let t=Bl;kl(e),Il(t)});({makeRecipe:wl}=bt),Pl=wl(["grammar",{source:`Ohm {

  Grammars
    = Grammar*

  Grammar
    = ident SuperGrammar? "{" Rule* "}"

  SuperGrammar
    = "<:" ident

  Rule
    = ident Formals? ruleDescr? "="  RuleBody  -- define
    | ident Formals?            ":=" OverrideRuleBody  -- override
    | ident Formals?            "+=" RuleBody  -- extend

  RuleBody
    = "|"? NonemptyListOf<TopLevelTerm, "|">

  TopLevelTerm
    = Seq caseName  -- inline
    | Seq

  OverrideRuleBody
    = "|"? NonemptyListOf<OverrideTopLevelTerm, "|">

  OverrideTopLevelTerm
    = "..."  -- superSplice
    | TopLevelTerm

  Formals
    = "<" ListOf<ident, ","> ">"

  Params
    = "<" ListOf<Seq, ","> ">"

  Alt
    = NonemptyListOf<Seq, "|">

  Seq
    = Iter*

  Iter
    = Pred "*"  -- star
    | Pred "+"  -- plus
    | Pred "?"  -- opt
    | Pred

  Pred
    = "~" Lex  -- not
    | "&" Lex  -- lookahead
    | Lex

  Lex
    = "#" Base  -- lex
    | Base

  Base
    = ident Params? ~(ruleDescr? "=" | ":=" | "+=")  -- application
    | oneCharTerminal ".." oneCharTerminal           -- range
    | terminal                                       -- terminal
    | "(" Alt ")"                                    -- paren

  ruleDescr  (a rule description)
    = "(" ruleDescrText ")"

  ruleDescrText
    = (~")" any)*

  caseName
    = "--" (~"\\n" space)* name (~"\\n" space)* ("\\n" | &"}")

  name  (a name)
    = nameFirst nameRest*

  nameFirst
    = "_"
    | letter

  nameRest
    = "_"
    | alnum

  ident  (an identifier)
    = name

  terminal
    = "\\"" terminalChar* "\\""

  oneCharTerminal
    = "\\"" terminalChar "\\""

  terminalChar
    = escapeChar
      | ~"\\\\" ~"\\"" ~"\\n" "\\u{0}".."\\u{10FFFF}"

  escapeChar  (an escape sequence)
    = "\\\\\\\\"                                     -- backslash
    | "\\\\\\""                                     -- doubleQuote
    | "\\\\\\'"                                     -- singleQuote
    | "\\\\b"                                      -- backspace
    | "\\\\n"                                      -- lineFeed
    | "\\\\r"                                      -- carriageReturn
    | "\\\\t"                                      -- tab
    | "\\\\u{" hexDigit hexDigit? hexDigit?
             hexDigit? hexDigit? hexDigit? "}"   -- unicodeCodePoint
    | "\\\\u" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape
    | "\\\\x" hexDigit hexDigit                    -- hexEscape

  space
   += comment

  comment
    = "//" (~"\\n" any)* &("\\n" | end)  -- singleLine
    | "/*" (~"*/" any)* "*/"  -- multiLine

  tokens = token*

  token = caseName | comment | ident | operator | punctuation | terminal | any

  operator = "<:" | "=" | ":=" | "+=" | "*" | "+" | "?" | "~" | "&"

  punctuation = "<" | ">" | "," | "--"
}`},"Ohm",null,"Grammars",{Grammars:["define",{sourceInterval:[9,32]},null,[],["star",{sourceInterval:[24,32]},["app",{sourceInterval:[24,31]},"Grammar",[]]]],Grammar:["define",{sourceInterval:[36,83]},null,[],["seq",{sourceInterval:[50,83]},["app",{sourceInterval:[50,55]},"ident",[]],["opt",{sourceInterval:[56,69]},["app",{sourceInterval:[56,68]},"SuperGrammar",[]]],["terminal",{sourceInterval:[70,73]},"{"],["star",{sourceInterval:[74,79]},["app",{sourceInterval:[74,78]},"Rule",[]]],["terminal",{sourceInterval:[80,83]},"}"]]],SuperGrammar:["define",{sourceInterval:[87,116]},null,[],["seq",{sourceInterval:[106,116]},["terminal",{sourceInterval:[106,110]},"<:"],["app",{sourceInterval:[111,116]},"ident",[]]]],Rule_define:["define",{sourceInterval:[131,181]},null,[],["seq",{sourceInterval:[131,170]},["app",{sourceInterval:[131,136]},"ident",[]],["opt",{sourceInterval:[137,145]},["app",{sourceInterval:[137,144]},"Formals",[]]],["opt",{sourceInterval:[146,156]},["app",{sourceInterval:[146,155]},"ruleDescr",[]]],["terminal",{sourceInterval:[157,160]},"="],["app",{sourceInterval:[162,170]},"RuleBody",[]]]],Rule_override:["define",{sourceInterval:[188,248]},null,[],["seq",{sourceInterval:[188,235]},["app",{sourceInterval:[188,193]},"ident",[]],["opt",{sourceInterval:[194,202]},["app",{sourceInterval:[194,201]},"Formals",[]]],["terminal",{sourceInterval:[214,218]},":="],["app",{sourceInterval:[219,235]},"OverrideRuleBody",[]]]],Rule_extend:["define",{sourceInterval:[255,305]},null,[],["seq",{sourceInterval:[255,294]},["app",{sourceInterval:[255,260]},"ident",[]],["opt",{sourceInterval:[261,269]},["app",{sourceInterval:[261,268]},"Formals",[]]],["terminal",{sourceInterval:[281,285]},"+="],["app",{sourceInterval:[286,294]},"RuleBody",[]]]],Rule:["define",{sourceInterval:[120,305]},null,[],["alt",{sourceInterval:[131,305]},["app",{sourceInterval:[131,170]},"Rule_define",[]],["app",{sourceInterval:[188,235]},"Rule_override",[]],["app",{sourceInterval:[255,294]},"Rule_extend",[]]]],RuleBody:["define",{sourceInterval:[309,362]},null,[],["seq",{sourceInterval:[324,362]},["opt",{sourceInterval:[324,328]},["terminal",{sourceInterval:[324,327]},"|"]],["app",{sourceInterval:[329,362]},"NonemptyListOf",[["app",{sourceInterval:[344,356]},"TopLevelTerm",[]],["terminal",{sourceInterval:[358,361]},"|"]]]]],TopLevelTerm_inline:["define",{sourceInterval:[385,408]},null,[],["seq",{sourceInterval:[385,397]},["app",{sourceInterval:[385,388]},"Seq",[]],["app",{sourceInterval:[389,397]},"caseName",[]]]],TopLevelTerm:["define",{sourceInterval:[366,418]},null,[],["alt",{sourceInterval:[385,418]},["app",{sourceInterval:[385,397]},"TopLevelTerm_inline",[]],["app",{sourceInterval:[415,418]},"Seq",[]]]],OverrideRuleBody:["define",{sourceInterval:[422,491]},null,[],["seq",{sourceInterval:[445,491]},["opt",{sourceInterval:[445,449]},["terminal",{sourceInterval:[445,448]},"|"]],["app",{sourceInterval:[450,491]},"NonemptyListOf",[["app",{sourceInterval:[465,485]},"OverrideTopLevelTerm",[]],["terminal",{sourceInterval:[487,490]},"|"]]]]],OverrideTopLevelTerm_superSplice:["define",{sourceInterval:[522,543]},null,[],["terminal",{sourceInterval:[522,527]},"..."]],OverrideTopLevelTerm:["define",{sourceInterval:[495,562]},null,[],["alt",{sourceInterval:[522,562]},["app",{sourceInterval:[522,527]},"OverrideTopLevelTerm_superSplice",[]],["app",{sourceInterval:[550,562]},"TopLevelTerm",[]]]],Formals:["define",{sourceInterval:[566,606]},null,[],["seq",{sourceInterval:[580,606]},["terminal",{sourceInterval:[580,583]},"<"],["app",{sourceInterval:[584,602]},"ListOf",[["app",{sourceInterval:[591,596]},"ident",[]],["terminal",{sourceInterval:[598,601]},","]]],["terminal",{sourceInterval:[603,606]},">"]]],Params:["define",{sourceInterval:[610,647]},null,[],["seq",{sourceInterval:[623,647]},["terminal",{sourceInterval:[623,626]},"<"],["app",{sourceInterval:[627,643]},"ListOf",[["app",{sourceInterval:[634,637]},"Seq",[]],["terminal",{sourceInterval:[639,642]},","]]],["terminal",{sourceInterval:[644,647]},">"]]],Alt:["define",{sourceInterval:[651,685]},null,[],["app",{sourceInterval:[661,685]},"NonemptyListOf",[["app",{sourceInterval:[676,679]},"Seq",[]],["terminal",{sourceInterval:[681,684]},"|"]]]],Seq:["define",{sourceInterval:[689,704]},null,[],["star",{sourceInterval:[699,704]},["app",{sourceInterval:[699,703]},"Iter",[]]]],Iter_star:["define",{sourceInterval:[719,736]},null,[],["seq",{sourceInterval:[719,727]},["app",{sourceInterval:[719,723]},"Pred",[]],["terminal",{sourceInterval:[724,727]},"*"]]],Iter_plus:["define",{sourceInterval:[743,760]},null,[],["seq",{sourceInterval:[743,751]},["app",{sourceInterval:[743,747]},"Pred",[]],["terminal",{sourceInterval:[748,751]},"+"]]],Iter_opt:["define",{sourceInterval:[767,783]},null,[],["seq",{sourceInterval:[767,775]},["app",{sourceInterval:[767,771]},"Pred",[]],["terminal",{sourceInterval:[772,775]},"?"]]],Iter:["define",{sourceInterval:[708,794]},null,[],["alt",{sourceInterval:[719,794]},["app",{sourceInterval:[719,727]},"Iter_star",[]],["app",{sourceInterval:[743,751]},"Iter_plus",[]],["app",{sourceInterval:[767,775]},"Iter_opt",[]],["app",{sourceInterval:[790,794]},"Pred",[]]]],Pred_not:["define",{sourceInterval:[809,824]},null,[],["seq",{sourceInterval:[809,816]},["terminal",{sourceInterval:[809,812]},"~"],["app",{sourceInterval:[813,816]},"Lex",[]]]],Pred_lookahead:["define",{sourceInterval:[831,852]},null,[],["seq",{sourceInterval:[831,838]},["terminal",{sourceInterval:[831,834]},"&"],["app",{sourceInterval:[835,838]},"Lex",[]]]],Pred:["define",{sourceInterval:[798,862]},null,[],["alt",{sourceInterval:[809,862]},["app",{sourceInterval:[809,816]},"Pred_not",[]],["app",{sourceInterval:[831,838]},"Pred_lookahead",[]],["app",{sourceInterval:[859,862]},"Lex",[]]]],Lex_lex:["define",{sourceInterval:[876,892]},null,[],["seq",{sourceInterval:[876,884]},["terminal",{sourceInterval:[876,879]},"#"],["app",{sourceInterval:[880,884]},"Base",[]]]],Lex:["define",{sourceInterval:[866,903]},null,[],["alt",{sourceInterval:[876,903]},["app",{sourceInterval:[876,884]},"Lex_lex",[]],["app",{sourceInterval:[899,903]},"Base",[]]]],Base_application:["define",{sourceInterval:[918,979]},null,[],["seq",{sourceInterval:[918,963]},["app",{sourceInterval:[918,923]},"ident",[]],["opt",{sourceInterval:[924,931]},["app",{sourceInterval:[924,930]},"Params",[]]],["not",{sourceInterval:[932,963]},["alt",{sourceInterval:[934,962]},["seq",{sourceInterval:[934,948]},["opt",{sourceInterval:[934,944]},["app",{sourceInterval:[934,943]},"ruleDescr",[]]],["terminal",{sourceInterval:[945,948]},"="]],["terminal",{sourceInterval:[951,955]},":="],["terminal",{sourceInterval:[958,962]},"+="]]]]],Base_range:["define",{sourceInterval:[986,1041]},null,[],["seq",{sourceInterval:[986,1022]},["app",{sourceInterval:[986,1001]},"oneCharTerminal",[]],["terminal",{sourceInterval:[1002,1006]},".."],["app",{sourceInterval:[1007,1022]},"oneCharTerminal",[]]]],Base_terminal:["define",{sourceInterval:[1048,1106]},null,[],["app",{sourceInterval:[1048,1056]},"terminal",[]]],Base_paren:["define",{sourceInterval:[1113,1168]},null,[],["seq",{sourceInterval:[1113,1124]},["terminal",{sourceInterval:[1113,1116]},"("],["app",{sourceInterval:[1117,1120]},"Alt",[]],["terminal",{sourceInterval:[1121,1124]},")"]]],Base:["define",{sourceInterval:[907,1168]},null,[],["alt",{sourceInterval:[918,1168]},["app",{sourceInterval:[918,963]},"Base_application",[]],["app",{sourceInterval:[986,1022]},"Base_range",[]],["app",{sourceInterval:[1048,1056]},"Base_terminal",[]],["app",{sourceInterval:[1113,1124]},"Base_paren",[]]]],ruleDescr:["define",{sourceInterval:[1172,1231]},"a rule description",[],["seq",{sourceInterval:[1210,1231]},["terminal",{sourceInterval:[1210,1213]},"("],["app",{sourceInterval:[1214,1227]},"ruleDescrText",[]],["terminal",{sourceInterval:[1228,1231]},")"]]],ruleDescrText:["define",{sourceInterval:[1235,1266]},null,[],["star",{sourceInterval:[1255,1266]},["seq",{sourceInterval:[1256,1264]},["not",{sourceInterval:[1256,1260]},["terminal",{sourceInterval:[1257,1260]},")"]],["app",{sourceInterval:[1261,1264]},"any",[]]]]],caseName:["define",{sourceInterval:[1270,1338]},null,[],["seq",{sourceInterval:[1285,1338]},["terminal",{sourceInterval:[1285,1289]},"--"],["star",{sourceInterval:[1290,1304]},["seq",{sourceInterval:[1291,1302]},["not",{sourceInterval:[1291,1296]},["terminal",{sourceInterval:[1292,1296]},`
`]],["app",{sourceInterval:[1297,1302]},"space",[]]]],["app",{sourceInterval:[1305,1309]},"name",[]],["star",{sourceInterval:[1310,1324]},["seq",{sourceInterval:[1311,1322]},["not",{sourceInterval:[1311,1316]},["terminal",{sourceInterval:[1312,1316]},`
`]],["app",{sourceInterval:[1317,1322]},"space",[]]]],["alt",{sourceInterval:[1326,1337]},["terminal",{sourceInterval:[1326,1330]},`
`],["lookahead",{sourceInterval:[1333,1337]},["terminal",{sourceInterval:[1334,1337]},"}"]]]]],name:["define",{sourceInterval:[1342,1382]},"a name",[],["seq",{sourceInterval:[1363,1382]},["app",{sourceInterval:[1363,1372]},"nameFirst",[]],["star",{sourceInterval:[1373,1382]},["app",{sourceInterval:[1373,1381]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[1386,1418]},null,[],["alt",{sourceInterval:[1402,1418]},["terminal",{sourceInterval:[1402,1405]},"_"],["app",{sourceInterval:[1412,1418]},"letter",[]]]],nameRest:["define",{sourceInterval:[1422,1452]},null,[],["alt",{sourceInterval:[1437,1452]},["terminal",{sourceInterval:[1437,1440]},"_"],["app",{sourceInterval:[1447,1452]},"alnum",[]]]],ident:["define",{sourceInterval:[1456,1489]},"an identifier",[],["app",{sourceInterval:[1485,1489]},"name",[]]],terminal:["define",{sourceInterval:[1493,1531]},null,[],["seq",{sourceInterval:[1508,1531]},["terminal",{sourceInterval:[1508,1512]},'"'],["star",{sourceInterval:[1513,1526]},["app",{sourceInterval:[1513,1525]},"terminalChar",[]]],["terminal",{sourceInterval:[1527,1531]},'"']]],oneCharTerminal:["define",{sourceInterval:[1535,1579]},null,[],["seq",{sourceInterval:[1557,1579]},["terminal",{sourceInterval:[1557,1561]},'"'],["app",{sourceInterval:[1562,1574]},"terminalChar",[]],["terminal",{sourceInterval:[1575,1579]},'"']]],terminalChar:["define",{sourceInterval:[1583,1660]},null,[],["alt",{sourceInterval:[1602,1660]},["app",{sourceInterval:[1602,1612]},"escapeChar",[]],["seq",{sourceInterval:[1621,1660]},["not",{sourceInterval:[1621,1626]},["terminal",{sourceInterval:[1622,1626]},"\\"]],["not",{sourceInterval:[1627,1632]},["terminal",{sourceInterval:[1628,1632]},'"']],["not",{sourceInterval:[1633,1638]},["terminal",{sourceInterval:[1634,1638]},`
`]],["range",{sourceInterval:[1639,1660]},"\0","\u{10FFFF}"]]]],escapeChar_backslash:["define",{sourceInterval:[1703,1758]},null,[],["terminal",{sourceInterval:[1703,1709]},"\\\\"]],escapeChar_doubleQuote:["define",{sourceInterval:[1765,1822]},null,[],["terminal",{sourceInterval:[1765,1771]},'\\"']],escapeChar_singleQuote:["define",{sourceInterval:[1829,1886]},null,[],["terminal",{sourceInterval:[1829,1835]},"\\'"]],escapeChar_backspace:["define",{sourceInterval:[1893,1948]},null,[],["terminal",{sourceInterval:[1893,1898]},"\\b"]],escapeChar_lineFeed:["define",{sourceInterval:[1955,2009]},null,[],["terminal",{sourceInterval:[1955,1960]},"\\n"]],escapeChar_carriageReturn:["define",{sourceInterval:[2016,2076]},null,[],["terminal",{sourceInterval:[2016,2021]},"\\r"]],escapeChar_tab:["define",{sourceInterval:[2083,2132]},null,[],["terminal",{sourceInterval:[2083,2088]},"\\t"]],escapeChar_unicodeCodePoint:["define",{sourceInterval:[2139,2243]},null,[],["seq",{sourceInterval:[2139,2221]},["terminal",{sourceInterval:[2139,2145]},"\\u{"],["app",{sourceInterval:[2146,2154]},"hexDigit",[]],["opt",{sourceInterval:[2155,2164]},["app",{sourceInterval:[2155,2163]},"hexDigit",[]]],["opt",{sourceInterval:[2165,2174]},["app",{sourceInterval:[2165,2173]},"hexDigit",[]]],["opt",{sourceInterval:[2188,2197]},["app",{sourceInterval:[2188,2196]},"hexDigit",[]]],["opt",{sourceInterval:[2198,2207]},["app",{sourceInterval:[2198,2206]},"hexDigit",[]]],["opt",{sourceInterval:[2208,2217]},["app",{sourceInterval:[2208,2216]},"hexDigit",[]]],["terminal",{sourceInterval:[2218,2221]},"}"]]],escapeChar_unicodeEscape:["define",{sourceInterval:[2250,2309]},null,[],["seq",{sourceInterval:[2250,2291]},["terminal",{sourceInterval:[2250,2255]},"\\u"],["app",{sourceInterval:[2256,2264]},"hexDigit",[]],["app",{sourceInterval:[2265,2273]},"hexDigit",[]],["app",{sourceInterval:[2274,2282]},"hexDigit",[]],["app",{sourceInterval:[2283,2291]},"hexDigit",[]]]],escapeChar_hexEscape:["define",{sourceInterval:[2316,2371]},null,[],["seq",{sourceInterval:[2316,2339]},["terminal",{sourceInterval:[2316,2321]},"\\x"],["app",{sourceInterval:[2322,2330]},"hexDigit",[]],["app",{sourceInterval:[2331,2339]},"hexDigit",[]]]],escapeChar:["define",{sourceInterval:[1664,2371]},"an escape sequence",[],["alt",{sourceInterval:[1703,2371]},["app",{sourceInterval:[1703,1709]},"escapeChar_backslash",[]],["app",{sourceInterval:[1765,1771]},"escapeChar_doubleQuote",[]],["app",{sourceInterval:[1829,1835]},"escapeChar_singleQuote",[]],["app",{sourceInterval:[1893,1898]},"escapeChar_backspace",[]],["app",{sourceInterval:[1955,1960]},"escapeChar_lineFeed",[]],["app",{sourceInterval:[2016,2021]},"escapeChar_carriageReturn",[]],["app",{sourceInterval:[2083,2088]},"escapeChar_tab",[]],["app",{sourceInterval:[2139,2221]},"escapeChar_unicodeCodePoint",[]],["app",{sourceInterval:[2250,2291]},"escapeChar_unicodeEscape",[]],["app",{sourceInterval:[2316,2339]},"escapeChar_hexEscape",[]]]],space:["extend",{sourceInterval:[2375,2394]},null,[],["app",{sourceInterval:[2387,2394]},"comment",[]]],comment_singleLine:["define",{sourceInterval:[2412,2458]},null,[],["seq",{sourceInterval:[2412,2443]},["terminal",{sourceInterval:[2412,2416]},"//"],["star",{sourceInterval:[2417,2429]},["seq",{sourceInterval:[2418,2427]},["not",{sourceInterval:[2418,2423]},["terminal",{sourceInterval:[2419,2423]},`
`]],["app",{sourceInterval:[2424,2427]},"any",[]]]],["lookahead",{sourceInterval:[2430,2443]},["alt",{sourceInterval:[2432,2442]},["terminal",{sourceInterval:[2432,2436]},`
`],["app",{sourceInterval:[2439,2442]},"end",[]]]]]],comment_multiLine:["define",{sourceInterval:[2465,2501]},null,[],["seq",{sourceInterval:[2465,2487]},["terminal",{sourceInterval:[2465,2469]},"/*"],["star",{sourceInterval:[2470,2482]},["seq",{sourceInterval:[2471,2480]},["not",{sourceInterval:[2471,2476]},["terminal",{sourceInterval:[2472,2476]},"*/"]],["app",{sourceInterval:[2477,2480]},"any",[]]]],["terminal",{sourceInterval:[2483,2487]},"*/"]]],comment:["define",{sourceInterval:[2398,2501]},null,[],["alt",{sourceInterval:[2412,2501]},["app",{sourceInterval:[2412,2443]},"comment_singleLine",[]],["app",{sourceInterval:[2465,2487]},"comment_multiLine",[]]]],tokens:["define",{sourceInterval:[2505,2520]},null,[],["star",{sourceInterval:[2514,2520]},["app",{sourceInterval:[2514,2519]},"token",[]]]],token:["define",{sourceInterval:[2524,2600]},null,[],["alt",{sourceInterval:[2532,2600]},["app",{sourceInterval:[2532,2540]},"caseName",[]],["app",{sourceInterval:[2543,2550]},"comment",[]],["app",{sourceInterval:[2553,2558]},"ident",[]],["app",{sourceInterval:[2561,2569]},"operator",[]],["app",{sourceInterval:[2572,2583]},"punctuation",[]],["app",{sourceInterval:[2586,2594]},"terminal",[]],["app",{sourceInterval:[2597,2600]},"any",[]]]],operator:["define",{sourceInterval:[2604,2669]},null,[],["alt",{sourceInterval:[2615,2669]},["terminal",{sourceInterval:[2615,2619]},"<:"],["terminal",{sourceInterval:[2622,2625]},"="],["terminal",{sourceInterval:[2628,2632]},":="],["terminal",{sourceInterval:[2635,2639]},"+="],["terminal",{sourceInterval:[2642,2645]},"*"],["terminal",{sourceInterval:[2648,2651]},"+"],["terminal",{sourceInterval:[2654,2657]},"?"],["terminal",{sourceInterval:[2660,2663]},"~"],["terminal",{sourceInterval:[2666,2669]},"&"]]],punctuation:["define",{sourceInterval:[2673,2709]},null,[],["alt",{sourceInterval:[2687,2709]},["terminal",{sourceInterval:[2687,2690]},"<"],["terminal",{sourceInterval:[2693,2696]},">"],["terminal",{sourceInterval:[2699,2702]},","],["terminal",{sourceInterval:[2705,2709]},"--"]]]}]),Ol=zn,er=Ut,$i=Bn,Kn=x,Et=xe,tr=$e,ir=ve,Rl=xl,{makeRecipe:Hl}=bt,xi=Object.create(tr.PExpr.prototype),_l=e=>!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e);$t.exports={createNamespace:$i.createNamespace,grammar:Vl,grammars:Yn,grammarFromScriptElement:Wl,grammarsFromScriptElements:jl,makeRecipe:Hl,ohmGrammar:null,pexprs:tr,util:ir,version:Rl};$t.exports._buildGrammar=rr;ir.announceBuiltInRules(er.BuiltInRules);$t.exports.ohmGrammar=Qt=Pl;er.initApplicationParser(Qt,rr);Jn=$t.exports,{assert:je}=x;zt.prototype.wrap=function(e){return this._wrap(e)};zt.prototype._checkActionDict=function(e){Object.keys(e).forEach(t=>{je(t in this._getChildren,"Unrecognized action name '"+t+"'");let i=e[t];if(je(typeof i=="function","Key '"+t+"': expected function, got "+i),t in this._arities){let n=this._arities[t],r=e[t].length;je(r===n,"Action '"+t+"' has the wrong arity: expected "+n+", got "+r)}})};zt.prototype.addOperation=function(e,t){let i=Ql(e),{name:n}=i;this._checkActionDict(t),this.operations[n]={name:n,formals:i.formals,actions:t};let r=this;return this.Adapter.prototype[n]=function(...u){let a=r._getTag(this._adaptee);je(a in r._getChildren,"getTag returned unrecognized tag '"+a+"'"),je(a in t,"No action for '"+a+"' in operation '"+n+"'");let o=Object.create(null);for(let[l,c]of Object.entries(u))o[i.formals[l]]=c;let p=this.args;this.args=o;let d=t[a].apply(this,r._getChildren[a](this._adaptee,r._wrap));return this.args=p,d},this};zl=zt,Zn={_terminal(){return this.sourceString},_nonterminal(...e){let{ctorName:t}=this._node,{mapping:i}=this.args;if(!Object.prototype.hasOwnProperty.call(i,t)){if(this.isLexical())return this.sourceString;let u=e.filter(a=>!a.isTerminal());if(u.length===1)return u[0].toAST(i)}if(typeof i[t]=="number")return e[i[t]].toAST(i);let n=i[t]||e,r={type:t};for(let u in n){let a=i[t]&&i[t][u];typeof a=="number"?r[u]=e[a].toAST(i):typeof a=="string"||typeof a=="boolean"||a===null?r[u]=a:typeof a=="object"&&a instanceof Number?r[u]=Number(a):typeof a=="function"?r[u]=a.call(this,e):a===void 0&&(e[u]&&!e[u].isTerminal()?r[u]=e[u].toAST(i):delete r[u])}return r},_iter(...e){return this._node.isOptional()?this.numChildren===0?null:e[0].toAST(this.args.mapping):e.map(function(t){return t.toAST(this.args.mapping)},this)},NonemptyListOf(e,t,i){return[e.toAST(this.args.mapping)].concat(i.toAST(this.args.mapping))},EmptyListOf(){return[]}};Fn={helper:Kl,semantics:Yl},md={VisitorFamily:zl,semanticsForToAST:Fn.semantics,toAST:Fn.helper}});var tu=pe((fd,eu)=>{"use strict";eu.exports=String.raw`Helpers {
  Node = TextNode*
  TextNode = AnyExceptPlus<openControl>
  openControl = end

  empty = /* nothing */
  anyExcept<lit> = (~ lit any)
  anyExceptStar<lit> = (~ lit any)*
  anyExceptPlus<lit> = (~ lit any)+
  AnyExcept<lit> = (~ lit any)
  AnyExceptPlus<lit> = (~ lit any)+
  AnyExceptStar<lit> = (~ lit any)*
  identifierCharacter = alnum | "_" | "-"

  orderedListOf<a, b, sep> =
    | nonemptyOrderedListOf<a, b, sep>
    | emptyListOf<a, sep>
  nonemptyOrderedListOf<a, b, sep> =
    | nonemptyListOf<b, sep>
    | nonemptyOrderedListOfBoth<a, b, sep>
    | nonemptyListOf<a, sep>
  nonemptyOrderedListOfBoth<a, b, sep> =
    nonemptyListOf<a, sep> (sep nonemptyListOf<b, sep>)

  singleQuote = "'" | "‘" | "’"
  doubleQuote = "\"" | "“" | "”"
  controls = "\u{007F}".."\u{009F}"
  noncharacters = "\u{FDD0}".."\u{FDEF}"
  newline = "\r"? "\n"
}

Liquid <: Helpers {
  Node := (liquidNode | TextNode)*
  openControl := "{{" | "{%"
  endOfTagName = &("-%}" | "-}}" | "%}" | "}}")
  endOfVarName = ~identifierCharacter
  endOfIdentifier = endOfTagName | endOfVarName

  liquidNode =
  	| liquidDoc
    | liquidBlockComment
    | liquidRawTag
    | liquidDrop
    | liquidTagClose
    | liquidTagOpen
    | liquidTag
    | liquidInlineComment

  liquidTagStrict =
    | liquidTagAssign
    | liquidTagBreak
    | liquidTagContinue
    | liquidTagCycle
    | liquidTagContentFor
    | liquidTagDecrement
    | liquidTagEcho
    | liquidTagElse
    | liquidTagElsif
    | liquidTagInclude
    | liquidTagIncrement
    | liquidTagLayout
    | liquidTagLiquid
    | liquidTagRender
    | liquidTagSection
    | liquidTagSections
    | liquidTagWhen

  liquidTag =
    | liquidTagStrict
    | liquidTagBaseCase

  liquidTagOpenStrict =
    | liquidTagOpenCase
    | liquidTagOpenCapture
    | liquidTagOpenForm
    | liquidTagOpenFor
    | liquidTagOpenTablerow
    | liquidTagOpenIf
    | liquidTagOpenPaginate
    | liquidTagOpenUnless

  liquidTagOpen =
    | liquidTagOpenStrict
    | liquidTagOpenBaseCase

  liquidTagClose = "{%" "-"? space* "end" blockName space* tagMarkup "-"? "%}"

  // These two are the same but transformed differently
  liquidTagRule<name, markup> =
    "{%" "-"? space* (name endOfIdentifier) space* markup "-"? "%}"
  liquidTagOpenRule<name, markup> =
    "{%" "-"? space* (name endOfIdentifier) space* markup "-"? "%}"

  liquidTagBaseCase = liquidTagRule<liquidTagName, tagMarkup>

  liquidTagEcho = liquidTagRule<"echo", liquidTagEchoMarkup>
  liquidTagEchoMarkup = liquidVariable<delimTag>

  liquidTagAssign = liquidTagRule<"assign", liquidTagAssignMarkup>
  liquidTagAssignMarkup = variableSegment space* "=" space* liquidVariable<delimTag>

  liquidTagCycle = liquidTagRule<"cycle", liquidTagCycleMarkup>
  liquidTagCycleMarkup = (liquidExpression<delimTag> ":")? space* nonemptyListOf<liquidExpression<delimTag>, argumentSeparator> space*

  liquidTagIncrement = liquidTagRule<"increment", variableSegmentAsLookupMarkup>
  liquidTagDecrement = liquidTagRule<"decrement", variableSegmentAsLookupMarkup>
  liquidTagOpenCapture = liquidTagOpenRule<"capture", variableSegmentAsLookupMarkup>
  variableSegmentAsLookupMarkup = variableSegmentAsLookup space*

  liquidTagSection = liquidTagRule<"section", liquidTagSectionMarkup>
  liquidTagSectionMarkup = liquidString<delimTag> space*

  liquidTagSections = liquidTagRule<"sections", liquidTagSectionsMarkup>
  liquidTagSectionsMarkup = liquidString<delimTag> space*

  liquidTagLayout = liquidTagRule<"layout", liquidTagLayoutMarkup>
  liquidTagLayoutMarkup = liquidExpression<delimTag> space*

  // We'll black hole the statement and switch parser in the cst builder
  // We do this because it's technically the same grammar (with minor redefinitions)
  // and it would be a huge chore and maintenance hell to rewrite all the rules with
  // hspace = " " | "\t"
  //
  // The alternative is that this grammar parses the {% liquid tagMarkup %} as its own string,
  // and then we switch to the LiquidStatement grammar that
  // redefines liquidTagOpenRule, liquidTagRule, and space.
  liquidTagLiquid = liquidTagRule<"liquid", liquidTagLiquidMarkup>
  liquidTagLiquidMarkup = tagMarkup

  liquidTagContentFor = liquidTagRule<"content_for", liquidTagContentForMarkup>

  liquidTagContentForMarkup =
    contentForType (argumentSeparatorOptionalComma contentForTagArgument) (space* ",")? space*

  contentForTagArgument = listOf<contentForNamedArgument<delimTag>, argumentSeparatorOptionalComma>
  completionModeContentForTagArgument = listOf<contentForNamedArgument<delimTag>, argumentSeparatorOptionalComma> (argumentSeparator? (liquidVariableLookup<delimTag>))?
  contentForNamedArgument<delim> = (variableSegment ("." variableSegment)*) space* ":" space* (liquidExpression<delim>)

  contentForType = liquidString<delimTag>

  liquidTagInclude = liquidTagRule<"include", liquidTagRenderMarkup>
  liquidTagRender = liquidTagRule<"render", liquidTagRenderMarkup>
  liquidTagRenderMarkup =
    snippetExpression renderVariableExpression? renderAliasExpression? renderArguments

  renderArguments = (argumentSeparatorOptionalComma tagArguments) (space* ",")? space*
  completionModeRenderArguments = (argumentSeparatorOptionalComma tagArguments) (space* ",")? space* (argumentSeparator? liquidVariableLookup<delimTag> space*)?
  snippetExpression = liquidString<delimTag> | variableSegmentAsLookup
  renderVariableExpression = space+ ("for" | "with") space+ liquidExpression<delimTag>
  renderAliasExpression = space+ "as" space+ variableSegment

  liquidTagOpenBaseCase = liquidTagOpenRule<blockName, tagMarkup>

  liquidTagOpenForm = liquidTagOpenRule<"form", liquidTagOpenFormMarkup>
  liquidTagOpenFormMarkup = arguments<delimTag> (space* ",")? space*

  liquidTagOpenFor = liquidTagOpenRule<"for", liquidTagOpenForMarkup>
  liquidTagOpenForMarkup =
    variableSegment space* "in" space* liquidExpression<delimTag>
    (space* "reversed")? argumentSeparatorOptionalComma
    tagArguments (space* ",")? space*

  // It's the same, the difference is support for different named arguments<delim>
  liquidTagOpenTablerow = liquidTagOpenRule<"tablerow", liquidTagOpenForMarkup>

  liquidTagOpenCase = liquidTagOpenRule<"case", liquidTagOpenCaseMarkup>
  liquidTagOpenCaseMarkup = liquidExpression<delimTag> space*

  liquidTagWhen = liquidTagRule<"when", liquidTagWhenMarkup>
  liquidTagWhenMarkup = nonemptyListOf<liquidExpression<delimTag>, whenMarkupSep> space*
  whenMarkupSep = space* ("," | "or" ~identifier) space*

  liquidTagOpenIf = liquidTagOpenRule<"if", liquidTagOpenConditionalMarkup>
  liquidTagOpenUnless = liquidTagOpenRule<"unless", liquidTagOpenConditionalMarkup>
  liquidTagElsif = liquidTagRule<"elsif", liquidTagOpenConditionalMarkup>

  liquidTagBreak = liquidTagRule<"break", empty>
  liquidTagContinue = liquidTagRule<"continue", empty>
  liquidTagElse = liquidTagRule<"else", empty>

  liquidTagOpenConditionalMarkup = nonemptyListOf<condition<delimTag>, conditionSeparator> space*
  conditionSeparator = &logicalOperator
  condition<delim> = logicalOperator? space* (comparison<delim> | liquidExpression<delim>) space*
  logicalOperator = ("and" | "or") ~identifier
  comparison<delim> = liquidExpression<delim> space* comparator space* liquidExpression<delim>
  comparator =
    ( "=="
    | "!="
    | ">="
    | "<="
    | ">"
    | "<")
    | ("contains" ~identifier)

  liquidTagOpenPaginate = liquidTagOpenRule<"paginate", liquidTagOpenPaginateMarkup>
  liquidTagOpenPaginateMarkup =
    liquidExpression<delimTag> space+ "by" space+ liquidExpression<delimTag> argumentSeparatorOptionalComma tagArguments (space* ",")? space*

  liquidDrop = "{{" "-"? space* liquidDropCases "-"? "}}"
  liquidDropCases = liquidVariable<delimVO> | liquidDropBaseCase
  liquidDropBaseCase = anyExceptStar<delimVO>
  liquidInlineComment = "{%" "-"? space* "#" space? tagMarkup "-"? "%}"

  liquidRawTag =
    | liquidRawTagImpl<"raw">
    | liquidRawTagImpl<"javascript">
    | liquidRawTagImpl<"schema">
    | liquidRawTagImpl<"stylesheet">
    | liquidRawTagImpl<"style">
  liquidRawTagImpl<name> =
    "{%" "-"? space* (name endOfIdentifier) space* tagMarkup "-"? "%}"
    anyExceptStar<liquidRawTagClose<name>>
    "{%" "-"? space* "end" (name endOfIdentifier) space* "-"? "%}"
  liquidRawTagClose<name> =
    "{%" "-"? space* "end" (name endOfIdentifier) space* "-"? "%}"

  liquidBlockComment =
    commentBlockStart
      (liquidBlockComment | anyExceptPlus<(commentBlockStart | commentBlockEnd)>)*
    commentBlockEnd
  commentBlockStart = "{%" "-"? space* ("comment"    endOfIdentifier) space* tagMarkup "-"? "%}"
  commentBlockEnd   = "{%" "-"? space* ("endcomment" endOfIdentifier) space* tagMarkup "-"? "%}"

  liquidDoc =
    liquidDocStart
      liquidDocBody
    liquidDocEnd

  liquidDocStart = "{%" "-"? space* ("doc" endOfIdentifier) space* tagMarkup "-"? "%}"
  liquidDocEnd = "{%" "-"? space* ("enddoc" endOfIdentifier) space* tagMarkup "-"? "%}"
  liquidDocBody = anyExceptStar<(liquidDocStart | liquidDocEnd)>

  // In order for the grammar to "fallback" to the base case, this
  // rule must pass if and only if we support what we parse. This
  // implies that—since we don't support filters yet—we have a
  // positive lookahead on "-}}" or "}}" in the rule. We do this
  // because we'd otherwise positively match the following string
  // instead of falling back to the other rule:
  // {{ 'string' | some_filter }}
  liquidVariable<delim> = liquidExpression<delim> liquidFilter<delim>* space* &delim

  liquidExpression<delim> =
    | liquidString<delim>
    | liquidNumber
    | liquidLiteral
    | liquidRange<delim>
    | liquidVariableLookup<delim>

  liquidString<delim> = liquidSingleQuotedString<delim> | liquidDoubleQuotedString<delim>
  liquidSingleQuotedString<delim> = "'" anyExceptStar<("'"| delim)> "'"
  liquidDoubleQuotedString<delim> = "\"" anyExceptStar<("\""| delim)> "\""

  liquidNumber = liquidFloat | liquidInteger
  liquidInteger = "-"? digit+
  liquidFloat = "-"? digit+ "." digit+

  liquidLiteral =
    ( "true"
    | "false"
    | "blank"
    | "empty"
    | "nil"
    | "null"
    ) endOfIdentifier

  liquidRange<delim> =
    "(" space* liquidExpression<delim> space* ".." space* liquidExpression<delim> space* ")"

  liquidVariableLookup<delim> =
    | variableSegment lookup<delim>*
    | empty lookup<delim>+
  lookup<delim> =
    | indexLookup<delim>
    | dotLookup
  indexLookup<delim> = space* "[" space* liquidExpression<delim> space* "]"
  dotLookup = space* "." space* identifier

  liquidFilter<delim> = space* "|" space* identifier (space* ":" space* arguments<delim> (space* ",")?)?

  arguments<delim> = nonemptyOrderedListOf<positionalArgument<delim>, namedArgument<delim>, argumentSeparator>
  argumentSeparator = space* "," space*
  argumentSeparatorOptionalComma = space* ","? space*
  positionalArgument<delim> = liquidExpression<delim> ~(space* ":")
  namedArgument<delim> = variableSegment space* ":" space* liquidExpression<delim>
  tagArguments = listOf<namedArgument<delimTag>, argumentSeparatorOptionalComma>
  filterArguments<delim> =
    | complexArguments<delim>
    | simpleArgument<delim>
  complexArguments<delim> = arguments<delim> (space* "," space* simpleArgument<delim>)?
  simpleArgument<delim> = liquidVariableLookup<delim>

  variableSegment = (letter | "_") (~endOfTagName identifierCharacter)*
  variableSegmentAsLookup = variableSegment
  identifier = variableSegment "?"?

  tagMarkup = anyExceptStar<delimTag>

  liquidTagName =
    letter (alnum | "_")*

  blockName =
    // Shopify blocks
    ( "form"
    | "paginate"
    // Base blocks
    | "capture"
    | "case"
    | "for"
    | "ifchanged"
    | "if"
    | "unless"
    | "tablerow"
    ) endOfIdentifier

  delimTag = "-%}" | "%}"
  delimVO = "-}}" | "}}"
}

LiquidStatement <: Liquid {
  Node := listOf<LiquidStatement, statementSep> (space | newline)*

  // This is the big brains moment: we redefine space to exclude newlines.
  //
  // Which means that all our other Liquid rules can be reused
  // without modification(!)
  //
  // We don't need to maintain rules like this:
  // - liquidVariable<space>
  // - liquidExpression<space>
  // - variableLookup<space>
  // - ... long list of stuff that takes space as param
  // - liquidString<space>
  //
  // All we need is this little, VERY IMPORTANT, part right here that
  // make it so we can parse the same way in Liquid tags.
  //
  // I'm putting in this huge comment so that it's more obvious.
  space := " " | "\t"

  LiquidStatement =
    | liquidBlockComment
    | liquidRawTag
    | liquidTagClose
    | liquidTagOpen
    | liquidTag
    | liquidInlineComment

  liquidTagOpenRule<name, markup>
    := (name ~identifierCharacter) space* markup &liquidStatementEnd

  liquidTagRule<name, markup>
    := (name ~identifierCharacter) space* markup &liquidStatementEnd

  liquidTagClose
    := "end" (blockName ~identifierCharacter) space* tagMarkup &liquidStatementEnd

  liquidRawTagImpl<name>
    := (name ~identifierCharacter) space* tagMarkup newline
      anyExceptStar<liquidRawTagClose<name>>
      "end" name space* &liquidStatementEnd

  liquidRawTagClose<name>
    := "end" name space* &liquidStatementEnd

  liquidBlockComment :=
    commentBlockStart statementSep
      (listOf<liquidCommentBlockStatement, statementSep> statementSep)?
    commentBlockEnd

  liquidCommentBlockStatement =
    | liquidBlockComment
    | nonTerminalCommentLine

  commentBlockStart
    := ("comment" ~identifierCharacter) space* tagMarkup

  commentBlockEnd
    := ("endcomment" ~identifierCharacter) space* tagMarkup

  nonTerminalCommentLine
    = ~commentBlockEnd anyExceptPlus<newline>

  liquidInlineComment
    := "#" space? tagMarkup &liquidStatementEnd

  tagMarkup := anyExceptStar<liquidStatementEnd>

  // trailing whitespace, newline, + anything else before the next tag
  statementSep = space* newline (space | newline)*

  liquidStatementEnd = newline | end
  delimTag := liquidStatementEnd
}

LiquidDoc <: Helpers {
  Node := ImplicitDescription (LiquidDocNode | TextNode)*
  LiquidDocNode =
    | paramNode
    | exampleNode
    | descriptionNode
    | fallbackNode
  
  endOfDescription = strictSpace* openControl
  descriptionContent = anyExceptStar<endOfDescription>
  ImplicitDescription = descriptionContent
    
  // By default, space matches new lines as well. We override it here to make writing rules easier.
  strictSpace = " " | "\t"
  // We use this as an escape hatch to stop matching TextNode and try again when one of these characters is encountered
  openControl:= "@" | end

  descriptionNode = "@description" strictSpace* descriptionContent

  paramNode = "@param" strictSpace* paramType? strictSpace* (optionalParamName | paramName) (strictSpace* "-")? strictSpace* paramDescription
  paramType = "{" strictSpace* paramTypeContent strictSpace* "}"
  paramTypeContent = anyExceptStar<("}"| strictSpace)>

  paramName = textValue
  optionalParamName = "[" strictSpace* textValue strictSpace* "]"
  textValue = identifierCharacter+

  paramDescription = (~"]" anyExceptStar<endOfParam>)
  endOfParam = strictSpace* (newline | end)

  exampleNode = "@example" strictSpace* exampleContent
  exampleContent = anyExceptStar<endOfExample>
  endOfExample =  strictSpace* ("@" | end)

  fallbackNode = "@" anyExceptStar<endOfParam>
}

LiquidHTML <: Liquid {
  Node := yamlFrontmatter? (HtmlNode | liquidNode | TextNode)*
  openControl += "<"

  yamlFrontmatter =
    "---" newline anyExceptStar<"---"> "---" newline

  HtmlNode =
    | HtmlDoctype
    | HtmlComment
    | HtmlRawTag
    | HtmlVoidElement
    | HtmlSelfClosingElement
    | HtmlTagClose
    | HtmlTagOpen

  // https://html.spec.whatwg.org/multipage/syntax.html#the-doctype
  HtmlDoctype =
    #("<!" caseInsensitive<"doctype"> space+ caseInsensitive<"html">) legacyDoctypeString? ">"
  legacyDoctypeString
    = anyExceptPlus<">">

  HtmlComment = "<!--" #(anyExceptStar<"-->"> "-->")

  // These are black holes, we'll ignore what's in them
  HtmlRawTag =
    | HtmlRawTagImpl<"script">
    | HtmlRawTagImpl<"style">
    | HtmlRawTagImpl<"svg">

  HtmlRawTagImpl<name> =
    TagStart<name>
      (HtmlRawTagImpl<name> | AnyExceptPlus<(TagStart<name> | TagEnd<name>)>)*
    TagEnd<name>
  TagStart<name> = "<" name AttrList ">"
  TagEnd<name> = "</" name ">"

  HtmlVoidElement =
    #("<" voidElementName &(space | "/" | ">")) AttrList "/"? ">"

  HtmlSelfClosingElement =
    #("<" tagName) AttrList "/>"

  HtmlTagOpen =
    #("<" tagName) AttrList ">"

  HtmlTagClose =
    #("</" tagName) ">"

  tagName = leadingTagNamePart trailingTagNamePart*

  // The difference here is that the first text part must start
  // with a letter, but trailing text parts don't have that
  // requirement
  leadingTagNamePart =
    | liquidDrop
    | leadingTagNameTextNode

  trailingTagNamePart =
    | liquidDrop
    | trailingTagNameTextNode

  leadingTagNameTextNode = letter (alnum | "-" | ":")*
  trailingTagNameTextNode = (alnum | "-" | ":")+

  AttrList = Attr*

  Attr =
    AttrSingleQuoted | AttrDoubleQuoted | AttrUnquoted | liquidNode | attrEmpty

  attrEmpty = attrName

  AttrUnquoted = attrName "=" attrUnquotedValue
  AttrSingleQuoted = attrName "=" singleQuote #(attrSingleQuotedValue singleQuote)
  AttrDoubleQuoted = attrName "=" doubleQuote #(attrDoubleQuotedValue doubleQuote)

  attrName = (liquidDrop | attrNameTextNode)+

  // https://html.spec.whatwg.org/#attributes-2
  attrNameTextNode = anyExceptPlus<(space | quotes | "=" | ">" | "/>" | "{{" | "{%" | controls | noncharacters)>
  attrUnquotedValue = (liquidDrop | attrUnquotedTextNode)*
  attrSingleQuotedValue = (liquidNode | attrSingleQuotedTextNode)*
  attrDoubleQuotedValue = (liquidNode | attrDoubleQuotedTextNode)*

  attrUnquotedTextNode = anyExceptPlus<(space | quotes | "=" | "<" | ">" | "${"`"}" | "{{" | "{%")>
  attrSingleQuotedTextNode = anyExceptPlus<(singleQuote | "{{" | "{%")>
  attrDoubleQuotedTextNode = anyExceptPlus<(doubleQuote | "{{" | "{%")>

  quotes = singleQuote | doubleQuote

  // https://www.w3.org/TR/2011/WD-html-markup-20110113/syntax.html#void-element
  voidElementName =
    ( caseInsensitive<"area">
    | caseInsensitive<"base">
    | caseInsensitive<"br">
    | caseInsensitive<"col">
    | caseInsensitive<"command">
    | caseInsensitive<"embed">
    | caseInsensitive<"hr">
    | caseInsensitive<"img">
    | caseInsensitive<"input">
    | caseInsensitive<"keygen">
    | caseInsensitive<"link">
    | caseInsensitive<"meta">
    | caseInsensitive<"param">
    | caseInsensitive<"source">
    | caseInsensitive<"track">
    | caseInsensitive<"wbr">
    ) ~identifierCharacter
}

StrictLiquid <: Liquid {
  liquidTag := liquidTagStrict
  liquidTagOpen := liquidTagOpenStrict
}

StrictLiquidStatement <: LiquidStatement {
  liquidTag := liquidTagStrict
  liquidTagOpen := liquidTagOpenStrict
}

StrictLiquidHTML <: LiquidHTML {
  liquidTag := liquidTagStrict
  liquidTagOpen := liquidTagOpenStrict
}

WithPlaceholderLiquid <: Liquid {
  liquidFilter<delim> := space* "|" space* identifier (space* ":" space* filterArguments<delim> (space* ",")?)?
  liquidTagContentForMarkup :=
    contentForType (argumentSeparatorOptionalComma completionModeContentForTagArgument) (space* ",")? space*
  liquidTagRenderMarkup :=
    snippetExpression renderVariableExpression? renderAliasExpression? completionModeRenderArguments
  liquidTagName := (letter | "█") (alnum | "_")*
  variableSegment := (letter | "_" | "█") (identifierCharacter | "█")*
  liquidDoc :=
    liquidDocStart
      liquidDocBody
    liquidDocEnd?
}

WithPlaceholderLiquidStatement <: LiquidStatement {
  liquidFilter<delim> := space* "|" space* identifier (space* ":" space* filterArguments<delim> (space* ",")?)?
  liquidTagContentForMarkup :=
    contentForType (argumentSeparatorOptionalComma completionModeContentForTagArgument) (space* ",")? space*
  liquidTagRenderMarkup :=
    snippetExpression renderVariableExpression? renderAliasExpression? completionModeRenderArguments
  liquidTagName := (letter | "█") (alnum | "_")*
  variableSegment := (letter | "_" | "█") (identifierCharacter | "█")*
  liquidDoc :=
    liquidDocStart
      liquidDocBody
    liquidDocEnd?
}

WithPlaceholderLiquidHTML <: LiquidHTML {
  liquidFilter<delim> := space* "|" space* identifier (space* ":" space* filterArguments<delim> (space* ",")?)?
  liquidTagContentForMarkup :=
    contentForType (argumentSeparatorOptionalComma completionModeContentForTagArgument) (space* ",")? space*
  liquidTagRenderMarkup :=
    snippetExpression renderVariableExpression? renderAliasExpression? completionModeRenderArguments
  liquidTagName := (letter | "█") (alnum | "_")*
  variableSegment := (letter | "_" | "█") (identifierCharacter | "█")*
  leadingTagNameTextNode := (letter | "█") (alnum | "-" | ":" | "█")*
  trailingTagNameTextNode := (alnum | "-" | ":" | "█")+
  liquidDoc :=
    liquidDocStart
      liquidDocBody
    liquidDocEnd?
}
`});var ge,Tt,iu,qt,ru,nu,Jl,Zl,Xl,nr,Kt=L(()=>{"use strict";Xn();ge=Jn.grammars(tu()),Tt=ge.Helpers,iu=ge.LiquidDoc,qt={Liquid:ge.StrictLiquid,LiquidHTML:ge.StrictLiquidHTML,LiquidStatement:ge.StrictLiquidStatement},ru={Liquid:ge.Liquid,LiquidHTML:ge.LiquidHTML,LiquidStatement:ge.LiquidStatement},nu={Liquid:ge.WithPlaceholderLiquid,LiquidHTML:ge.WithPlaceholderLiquidHTML,LiquidStatement:ge.WithPlaceholderLiquidStatement},Jl=qt.LiquidHTML.rules.blockName.body.factors[0].terms.map(e=>e.obj),Zl=qt.LiquidHTML.rules.liquidRawTag.body.terms.map(e=>e.args[0].obj).concat("comment"),Xl=qt.LiquidHTML.rules.voidElementName.body.factors[0].terms.map(e=>e.args[0].obj),nr=["style","schema","javascript","else","break","continue","comment","raw","doc"]});var ur=pe((Ad,uu)=>{var ec={}.toString;uu.exports=Array.isArray||function(e){return ec.call(e)=="[object Array]"}});var ou=pe((yd,au)=>{"use strict";var tc=ur();au.exports=function(t){return t!=null&&typeof t=="object"&&tc(t)===!1}});var lu=pe((Sd,su)=>{"use strict";var ic=ur(),rc=ou(),Ed=Array.prototype.slice;su.exports=at;function at(e,t){if(!(this instanceof at))return typeof t=="number"?new at(e).fromIndex(t):new at(e,t);this.str=e||"",this.lineToIndex=nc(this.str),t=t||{},this.origin=typeof t.origin>"u"?1:t.origin}at.prototype.fromIndex=function(e){if(e<0||e>=this.str.length||isNaN(e))return null;var t=uc(e,this.lineToIndex);return{line:t+this.origin,col:e-this.lineToIndex[t]+this.origin}};at.prototype.toIndex=function(e,t){if(typeof t>"u")return ic(e)&&e.length>=2?this.toIndex(e[0],e[1]):rc(e)&&"line"in e&&("col"in e||"column"in e)?this.toIndex(e.line,"col"in e?e.col:e.column):-1;if(isNaN(e)||isNaN(t))return-1;if(e-=this.origin,t-=this.origin,e>=0&&t>=0&&e<this.lineToIndex.length){var i=this.lineToIndex[e],n=e===this.lineToIndex.length-1?this.str.length:this.lineToIndex[e+1];if(t<n-i)return i+t}return-1};function nc(e){for(var t=e.split(`
`),i=new Array(t.length),n=0,r=0,u=t.length;r<u;r++)i[r]=n,n+=t[r].length+1;return i}function uc(e,t){if(e>=t[t.length-1])return t.length-1;for(var i=0,n=t.length-2,r;i<n;)if(r=i+(n-i>>1),e<t[r])n=r-1;else if(e>=t[r+1])i=r+1;else{i=r;break}return i}});var ar,Ft,Ue,Yt=L(()=>{"use strict";ar=Xr(lu()),Ft=class extends SyntaxError{constructor(t){super(t.shortMessage),this.name="LiquidHTMLParsingError";let i=t.input,n=t._rightmostFailurePosition,r=(0,ar.default)(i).fromIndex(Math.min(n,i.length-1));r&&(this.loc={start:{line:r.line,column:r.col},end:{line:r.line,column:r.col}})}},Ue=class extends SyntaxError{constructor(t,i,n,r,u){super(t),this.name="LiquidHTMLParsingError",this.unclosed=u??null;let a=(0,ar.default)(i),o=a.fromIndex(n),p=a.fromIndex(Math.min(r,i.length-1));this.loc={start:{line:o.line,column:o.col},end:{line:p.line,column:p.col}}}}});var Z,we,Jt,Zt,cu,Xt=L(()=>{"use strict";Z=(C=>(C.Document="Document",C.LiquidRawTag="LiquidRawTag",C.LiquidTag="LiquidTag",C.LiquidBranch="LiquidBranch",C.LiquidVariableOutput="LiquidVariableOutput",C.HtmlSelfClosingElement="HtmlSelfClosingElement",C.HtmlVoidElement="HtmlVoidElement",C.HtmlDoctype="HtmlDoctype",C.HtmlComment="HtmlComment",C.HtmlElement="HtmlElement",C.HtmlDanglingMarkerClose="HtmlDanglingMarkerClose",C.HtmlRawNode="HtmlRawNode",C.AttrSingleQuoted="AttrSingleQuoted",C.AttrDoubleQuoted="AttrDoubleQuoted",C.AttrUnquoted="AttrUnquoted",C.AttrEmpty="AttrEmpty",C.TextNode="TextNode",C.YAMLFrontmatter="YAMLFrontmatter",C.LiquidVariable="LiquidVariable",C.LiquidFilter="LiquidFilter",C.NamedArgument="NamedArgument",C.LiquidLiteral="LiquidLiteral",C.String="String",C.Number="Number",C.Range="Range",C.VariableLookup="VariableLookup",C.Comparison="Comparison",C.LogicalExpression="LogicalExpression",C.AssignMarkup="AssignMarkup",C.ContentForMarkup="ContentForMarkup",C.CycleMarkup="CycleMarkup",C.ForMarkup="ForMarkup",C.PaginateMarkup="PaginateMarkup",C.RawMarkup="RawMarkup",C.RenderMarkup="RenderMarkup",C.RenderVariableExpression="RenderVariableExpression",C.LiquidDocDescriptionNode="LiquidDocDescriptionNode",C.LiquidDocParamNode="LiquidDocParamNode",C.LiquidDocExampleNode="LiquidDocExampleNode",C))(Z||{}),we=(b=>(b.assign="assign",b.capture="capture",b.case="case",b.content_for="content_for",b.cycle="cycle",b.decrement="decrement",b.echo="echo",b.elsif="elsif",b.for="for",b.form="form",b.if="if",b.include="include",b.increment="increment",b.layout="layout",b.liquid="liquid",b.paginate="paginate",b.render="render",b.section="section",b.sections="sections",b.tablerow="tablerow",b.unless="unless",b.when="when",b))(we||{}),Jt=["HtmlElement","HtmlDanglingMarkerClose","HtmlRawNode","HtmlVoidElement","HtmlSelfClosingElement"],Zt=["LiquidTag","LiquidVariableOutput","LiquidBranch","LiquidRawTag"],cu=new Set(["parentNode","prev","next","firstChild","lastChild"])});function du(e,t={mode:"tolerant"}){let i=sc[t.mode],n=i.LiquidHTML;return Pe(e,i,n,["HelperMappings","LiquidMappings","LiquidHTMLMappings"])}function Pe(e,t,i,n,r=e,u=0){let a=s=>u+s[0].source.startIdx,o=s=>u+s[s.length-1].source.endIdx,p=s=>u+s[s.length-2].source.endIdx,d={type:"TextNode",value:function(){return this.sourceString},locStart:a,locEnd:o,source:e},l=i.match(r,"Node");if(l.failed())throw new Ft(l);let c={Node:0,TextNode:d,orderedListOf:0,listOf:0,empty:()=>null,emptyListOf:()=>[],nonemptyListOf(s,f,S){let ce=this;return[s.toAST(ce.args.mapping)].concat(S.toAST(ce.args.mapping))},nonemptyOrderedListOf:0,nonemptyOrderedListOfBoth(s,f,S){let ce=this;return s.toAST(ce.args.mapping).concat(S.toAST(ce.args.mapping))}},m={liquidNode:0,liquidRawTag:0,liquidRawTagImpl:{type:"LiquidRawTag",name:3,body:9,children:s=>{let f=s[3],S=s[9];switch(f.sourceString){case"raw":return Pe(e,t,Tt,["HelperMappings"],S.sourceString,u+S.source.startIdx);default:return Pe(e,t,t.Liquid,["HelperMappings","LiquidMappings"],S.sourceString,u+S.source.startIdx)}},markup:6,whitespaceStart:1,whitespaceEnd:7,delimiterWhitespaceStart:11,delimiterWhitespaceEnd:17,locStart:a,locEnd:o,source:e,blockStartLocStart:s=>s[0].source.startIdx,blockStartLocEnd:s=>s[8].source.endIdx,blockEndLocStart:s=>s[10].source.startIdx,blockEndLocEnd:s=>s[18].source.endIdx},liquidBlockComment:{type:"LiquidRawTag",name:"comment",body:s=>s[1].sourceString,children:s=>Pe(e,t,Tt,["HelperMappings"],s[1].sourceString,u+s[1].source.startIdx),whitespaceStart:s=>s[0].children[1].sourceString,whitespaceEnd:s=>s[0].children[7].sourceString,delimiterWhitespaceStart:s=>s[2].children[1].sourceString,delimiterWhitespaceEnd:s=>s[2].children[7].sourceString,locStart:a,locEnd:o,source:e,blockStartLocStart:s=>s[0].source.startIdx,blockStartLocEnd:s=>s[0].source.endIdx,blockEndLocStart:s=>s[2].source.startIdx,blockEndLocEnd:s=>s[2].source.endIdx},liquidDoc:{type:"LiquidRawTag",name:"doc",body:s=>s[1].sourceString,children:s=>{let f=s[1];return lc(e,f.sourceString,u+f.source.startIdx)},whitespaceStart:s=>s[0].children[1].sourceString,whitespaceEnd:s=>s[0].children[7].sourceString,delimiterWhitespaceStart:s=>s[2].children[1]?.sourceString||"",delimiterWhitespaceEnd:s=>s[2].children[7]?.sourceString||"",locStart:a,locEnd:o,source:e,blockStartLocStart:s=>s[0].source.startIdx,blockStartLocEnd:s=>s[0].source.endIdx,blockEndLocStart:s=>s[2].source.startIdx,blockEndLocEnd:s=>s[2].source.endIdx},liquidInlineComment:{type:"LiquidTag",name:3,markup:pu(5),whitespaceStart:1,whitespaceEnd:6,locStart:a,locEnd:o,source:e},liquidTagOpen:0,liquidTagOpenStrict:0,liquidTagOpenBaseCase:0,liquidTagOpenRule:{type:"LiquidTagOpen",name:3,markup(s){let f=s[6],S=s[3];return we.hasOwnProperty(S.sourceString)?f.toAST(this.args.mapping):f.sourceString.trim()},whitespaceStart:1,whitespaceEnd:7,locStart:a,locEnd:o,source:e},liquidTagOpenCapture:0,liquidTagOpenForm:0,liquidTagOpenFormMarkup:0,liquidTagOpenFor:0,liquidTagOpenForMarkup:{type:"ForMarkup",variableName:0,collection:4,reversed:6,args:8,locStart:a,locEnd:o,source:e},liquidTagBreak:0,liquidTagContinue:0,liquidTagOpenTablerow:0,liquidTagOpenPaginate:0,liquidTagOpenPaginateMarkup:{type:"PaginateMarkup",collection:0,pageSize:4,args:6,locStart:a,locEnd:o,source:e},liquidTagOpenCase:0,liquidTagOpenCaseMarkup:0,liquidTagWhen:0,liquidTagWhenMarkup:0,liquidTagOpenIf:0,liquidTagOpenUnless:0,liquidTagElsif:0,liquidTagElse:0,liquidTagOpenConditionalMarkup:0,condition:{type:"Condition",relation:0,expression:2,locStart:a,locEnd:o,source:e},comparison:{type:"Comparison",comparator:2,left:0,right:4,locStart:a,locEnd:o,source:e},liquidTagClose:{type:"LiquidTagClose",name:4,whitespaceStart:1,whitespaceEnd:7,locStart:a,locEnd:o,source:e},liquidTag:0,liquidTagStrict:0,liquidTagBaseCase:0,liquidTagAssign:0,liquidTagEcho:0,liquidTagContentFor:0,liquidTagCycle:0,liquidTagIncrement:0,liquidTagDecrement:0,liquidTagRender:0,liquidTagInclude:0,liquidTagSection:0,liquidTagSections:0,liquidTagLayout:0,liquidTagRule:{type:"LiquidTag",name:3,markup(s){let f=s[6],S=s[3];return we.hasOwnProperty(S.sourceString)?f.toAST(this.args.mapping):f.sourceString.trim()},whitespaceStart:1,whitespaceEnd:7,source:e,locStart:a,locEnd:o},liquidTagLiquid:0,liquidTagLiquidMarkup(s){return Pe(e,t,t.LiquidStatement,["HelperMappings","LiquidMappings","LiquidStatement"],s.sourceString,u+s.source.startIdx)},liquidTagEchoMarkup:0,liquidTagSectionMarkup:0,liquidTagSectionsMarkup:0,liquidTagLayoutMarkup:0,liquidTagAssignMarkup:{type:"AssignMarkup",name:0,value:4,locStart:a,locEnd:o,source:e},liquidTagCycleMarkup:{type:"CycleMarkup",groupName:0,args:3,locStart:a,locEnd:o,source:e},liquidTagContentForMarkup:{type:"ContentForMarkup",contentForType:0,args:2,locStart:a,locEnd:o,source:e},contentForType:0,liquidTagRenderMarkup:{type:"RenderMarkup",snippet:0,variable:1,alias:2,renderArguments:3,locStart:a,locEnd:o,source:e},renderArguments:1,completionModeRenderArguments:function(s,f,S,ce,Ai,b,Yr,od){let Jr=this;return f.toAST(Jr.args.mapping).concat(Yr.sourceString===""?[]:Yr.toAST(Jr.args.mapping))},snippetExpression:0,renderVariableExpression:{type:"RenderVariableExpression",kind:1,name:3,locStart:a,locEnd:o,source:e},renderAliasExpression:3,liquidDrop:{type:"LiquidVariableOutput",markup:3,whitespaceStart:1,whitespaceEnd:4,locStart:a,locEnd:o,source:e},liquidDropCases:0,liquidExpression:0,liquidDropBaseCase:s=>s.sourceString.trimEnd(),liquidVariable:{type:"LiquidVariable",expression:0,filters:1,rawSource:s=>e.slice(a(s),s[s.length-2].source.endIdx).trimEnd(),locStart:a,locEnd:p,source:e},liquidFilter:{type:"LiquidFilter",name:3,locStart:a,locEnd:o,source:e,args(s){return s[7].sourceString===""?[]:s[7].toAST(this.args.mapping)}},filterArguments:0,arguments:0,complexArguments:function(s,f,S,ce,Ai){let b=this;return s.toAST(b.args.mapping).concat(Ai.sourceString===""?[]:Ai.toAST(b.args.mapping))},simpleArgument:0,tagArguments:0,contentForTagArgument:0,completionModeContentForTagArgument:function(s,f,S){let ce=this;return s.toAST(ce.args.mapping).concat(S.sourceString===""?[]:S.toAST(ce.args.mapping))},positionalArgument:0,namedArgument:{type:"NamedArgument",name:0,value:4,locStart:a,locEnd:o,source:e},contentForNamedArgument:{type:"NamedArgument",name:s=>s[0].sourceString+s[1].sourceString,value:6,locStart:a,locEnd:o,source:e},liquidString:0,liquidDoubleQuotedString:{type:"String",single:()=>!1,value:1,locStart:a,locEnd:o,source:e},liquidSingleQuotedString:{type:"String",single:()=>!0,value:1,locStart:a,locEnd:o,source:e},liquidNumber:{type:"Number",value:0,locStart:a,locEnd:o,source:e},liquidLiteral:{type:"LiquidLiteral",value:s=>{let f=s[0].sourceString;return ac[f]},keyword:0,locStart:a,locEnd:o,source:e},liquidRange:{type:"Range",start:2,end:6,locStart:a,locEnd:o,source:e},liquidVariableLookup:{type:"VariableLookup",name:0,lookups:1,locStart:a,locEnd:o,source:e},variableSegmentAsLookupMarkup:0,variableSegmentAsLookup:{type:"VariableLookup",name:0,lookups:()=>[],locStart:a,locEnd:o,source:e},lookup:0,indexLookup:3,dotLookup:{type:"String",value:3,locStart:s=>u+s[2].source.startIdx,locEnd:s=>u+s[s.length-1].source.endIdx,source:e},tagMarkup:s=>s.sourceString.trim()},g={LiquidStatement:0,liquidTagOpenRule:{type:"LiquidTagOpen",name:0,markup(s){let f=s[2],S=s[0];return we.hasOwnProperty(S.sourceString)?f.toAST(this.args.mapping):f.sourceString.trim()},whitespaceStart:null,whitespaceEnd:null,locStart:a,locEnd:p,source:e},liquidTagClose:{type:"LiquidTagClose",name:1,whitespaceStart:null,whitespaceEnd:null,locStart:a,locEnd:p,source:e},liquidTagRule:{type:"LiquidTag",name:0,markup(s){let f=s[2],S=s[0];return we.hasOwnProperty(S.sourceString)?f.toAST(this.args.mapping):f.sourceString.trim()},whitespaceStart:null,whitespaceEnd:null,locStart:a,locEnd:p,source:e},liquidRawTagImpl:{type:"LiquidRawTag",name:0,body:4,children(s){return Pe(e,t,Tt,["HelperMappings"],s[4].sourceString,u+s[4].source.startIdx)},whitespaceStart:null,whitespaceEnd:null,delimiterWhitespaceStart:null,delimiterWhitespaceEnd:null,locStart:a,locEnd:p,source:e,blockStartLocStart:s=>u+s[0].source.startIdx,blockStartLocEnd:s=>u+s[2].source.endIdx,blockEndLocStart:s=>u+s[5].source.startIdx,blockEndLocEnd:s=>u+s[5].source.endIdx},liquidBlockComment:{type:"LiquidRawTag",name:"comment",body:s=>s[1].sourceString.slice(1)+s[2].sourceString,children(s){let f=s[1].sourceString.slice(1)+s[2].sourceString;return Pe(e,t,Tt,["HelperMappings"],f,u+s[1].source.startIdx+1)},whitespaceStart:"",whitespaceEnd:"",delimiterWhitespaceStart:"",delimiterWhitespaceEnd:"",locStart:a,locEnd:o,source:e,blockStartLocStart:s=>u+s[0].source.startIdx,blockStartLocEnd:s=>u+s[0].source.endIdx,blockEndLocStart:s=>u+s[4].source.startIdx,blockEndLocEnd:s=>u+s[4].source.endIdx},liquidInlineComment:{type:"LiquidTag",name:0,markup:pu(2),whitespaceStart:null,whitespaceEnd:null,locStart:a,locEnd:p,source:e}},h={Node(s,f){let S=this;return(s.sourceString.length===0?[]:[s.toAST(S.args.mapping)]).concat(f.toAST(S.args.mapping))},yamlFrontmatter:{type:"YAMLFrontmatter",body:2,locStart:a,locEnd:o,source:e},HtmlDoctype:{type:"HtmlDoctype",legacyDoctypeString:4,locStart:a,locEnd:o,source:e},HtmlComment:{type:"HtmlComment",body:oc(1),locStart:a,locEnd:o,source:e},HtmlRawTagImpl:{type:"HtmlRawTag",name:s=>s[0].children[1].sourceString,attrList(s){let f=this.args.mapping;return s[0].children[2].toAST(f)},body:s=>e.slice(s[0].source.endIdx,s[2].source.startIdx),children:s=>{let f=e.slice(s[0].source.endIdx,s[2].source.startIdx);return Pe(e,t,t.Liquid,["HelperMappings","LiquidMappings"],f,s[0].source.endIdx)},locStart:a,locEnd:o,source:e,blockStartLocStart:s=>s[0].source.startIdx,blockStartLocEnd:s=>s[0].source.endIdx,blockEndLocStart:s=>s[2].source.startIdx,blockEndLocEnd:s=>s[2].source.endIdx},HtmlVoidElement:{type:"HtmlVoidElement",name:1,attrList:3,locStart:a,locEnd:o,source:e},HtmlSelfClosingElement:{type:"HtmlSelfClosingElement",name:1,attrList:2,locStart:a,locEnd:o,source:e},HtmlTagOpen:{type:"HtmlTagOpen",name:1,attrList:2,locStart:a,locEnd:o,source:e},HtmlTagClose:{type:"HtmlTagClose",name:1,locStart:a,locEnd:o,source:e},leadingTagNamePart:0,leadingTagNameTextNode:d,trailingTagNamePart:0,trailingTagNameTextNode:d,tagName(s,f){let S=this.args.mapping;return[s.toAST(S)].concat(f.toAST(S))},AttrUnquoted:{type:"AttrUnquoted",name:0,value:2,locStart:a,locEnd:o,source:e},AttrSingleQuoted:{type:"AttrSingleQuoted",name:0,value:3,locStart:a,locEnd:o,source:e},AttrDoubleQuoted:{type:"AttrDoubleQuoted",name:0,value:3,locStart:a,locEnd:o,source:e},attrEmpty:{type:"AttrEmpty",name:0,locStart:a,locEnd:o,source:e},attrName:0,attrNameTextNode:d,attrDoubleQuotedValue:0,attrSingleQuotedValue:0,attrUnquotedValue:0,attrDoubleQuotedTextNode:d,attrSingleQuotedTextNode:d,attrUnquotedTextNode:d},A={HelperMappings:c,LiquidMappings:m,LiquidHTMLMappings:h,LiquidStatement:g},y=n.reduce((s,f)=>({...s,...A[f]}),{});return(0,or.toAST)(l,y)}function lc(e,t,i){let n=p=>i+p[0].source.startIdx,r=p=>i+p[p.length-1].source.endIdx,u=iu.match(t,"Node");if(u.failed())throw new Ft(u);let a=()=>({type:"TextNode",value:function(){return this.sourceString},locStart:n,locEnd:r,source:e}),o={Node(p,d){let l=this;return(p.sourceString.length===0?[]:[p.toAST(l.args.mapping)]).concat(d.toAST(l.args.mapping))},ImplicitDescription:{type:"LiquidDocDescriptionNode",name:"description",locStart:n,locEnd:r,source:e,content:0,isImplicit:!0},TextNode:a(),paramNode:{type:"LiquidDocParamNode",name:"param",locStart:n,locEnd:r,source:e,paramType:2,paramName:4,paramDescription:8},descriptionNode:{type:"LiquidDocDescriptionNode",name:"description",locStart:n,locEnd:r,source:e,content:2,isImplicit:!1},descriptionContent:{type:"TextNode",value:function(){return this.sourceString.trim()},locStart:n,locEnd:r,source:e},paramType:2,paramTypeContent:a(),paramName:{type:"LiquidDocParamNameNode",content:0,locStart:n,locEnd:r,source:e,required:!0},optionalParamName:{type:"LiquidDocParamNameNode",content:2,locStart:n,locEnd:r,source:e,required:!1},paramDescription:a(),exampleNode:{type:"LiquidDocExampleNode",name:"example",locStart:n,locEnd:r,source:e,content:2},exampleContent:a(),textValue:a(),fallbackNode:a()};return(0,or.toAST)(u,o)}var or,ac,oc,pu,sc,sr=L(()=>{"use strict";or=Xr(pn());Kt();Yt();Xt();ac={nil:null,null:null,true:!0,false:!1,blank:"",empty:""},oc=e=>t=>t[e].sourceString.trim(),pu=e=>t=>t[e].sourceString.trimEnd(),sc={strict:qt,tolerant:ru,completion:nu}});function Nt(e){throw new Error(`Unexpected object: ${e.type}`)}function ot(e,t){return e.reduce((i,n)=>{if(i&&i[n]!==void 0)return i[n]},t)}function lr(e,t){let i=[...t];for(let n=0;n<e;n++)i.pop();return i}var mu=L(()=>{"use strict"});function be(e){return e.type==="LiquidTag"&&["if","for","unless","case"].includes(e.name)}function cc(e){return e.type==="LiquidTag"&&["else","elsif","when"].includes(e.name)}function Eu(e,t={allowUnclosedDocumentNode:!1,mode:"tolerant"}){let i=du(e,{mode:t.mode});return{type:"Document",source:e,_source:e,children:Ae(i,t),name:"#document",position:{start:0,end:e.length}}}function pc(e){return!!e&&e.type==="LiquidBranch"}function ne(e){if(!e)return null;switch(e.type){case"HtmlElement":case"HtmlDanglingMarkerClose":case"HtmlSelfClosingElement":case"HtmlTagClose":return e.name.map(t=>t.type==="TextNode"||t.type=="TextNode"?t.value:typeof t.markup=="string"?`{{${t.markup.trim()}}}`:`{{${t.markup.rawSource}}}`).join("");case"AttrEmpty":case"AttrUnquoted":case"AttrDoubleQuoted":case"AttrSingleQuoted":return e.name.map(t=>typeof t=="string"?t:t.source.slice(t.position.start,t.position.end)).join("");default:return e.name}}function Ae(e,t){if(e.length===0)return[];let i=dc(e,t);if(!t.allowUnclosedDocumentNode&&i.cursor.length!==0)throw new Ue(`Attempting to end parsing before ${i.parent?.type} '${ne(i.parent)}' was closed`,i.source,i.source.length-1,i.source.length,Lu(i.parent,i.grandparent));return i.ast}function dc(e,t){let i=new cr(e[0].source);for(let n=0;n<e.length;n++){let r=e[n];switch(r.type){case"TextNode":{i.push(Bt(r));break}case"LiquidVariableOutput":{i.push(Nc(r));break}case"LiquidTagOpen":{i.open(fu(r,{...t,isBlockTag:!0}));break}case"LiquidTagClose":{i.close(r,"LiquidTag");break}case"LiquidTag":{i.push(fu(r,{...t,isBlockTag:!1}));break}case"LiquidRawTag":{i.push({type:"LiquidRawTag",markup:dr(r.name,r.markup),name:r.name,body:Du(r,t),whitespaceStart:r.whitespaceStart??"",whitespaceEnd:r.whitespaceEnd??"",delimiterWhitespaceStart:r.delimiterWhitespaceStart??"",delimiterWhitespaceEnd:r.delimiterWhitespaceEnd??"",position:D(r),blockStartPosition:{start:r.blockStartLocStart,end:r.blockStartLocEnd},blockEndPosition:{start:r.blockEndLocStart,end:r.blockEndLocEnd},source:r.source});break}case"HtmlTagOpen":{i.open(vc(r,t));break}case"HtmlTagClose":{Pc(i,e,n,t.mode)?i.push(kc(r,t)):i.close(r,"HtmlElement");break}case"HtmlVoidElement":{i.push(Ic(r,t));break}case"HtmlSelfClosingElement":{i.push(wc(r,t));break}case"HtmlDoctype":{i.push({type:"HtmlDoctype",legacyDoctypeString:r.legacyDoctypeString,position:D(r),source:r.source});break}case"HtmlComment":{i.push({type:"HtmlComment",body:r.body,position:D(r),source:r.source});break}case"HtmlRawTag":{i.push({type:"HtmlRawNode",name:r.name,body:Du(r,t),attributes:ti(r.attrList||[],t),position:D(r),source:r.source,blockStartPosition:{start:r.blockStartLocStart,end:r.blockStartLocEnd},blockEndPosition:{start:r.blockEndLocStart,end:r.blockEndLocEnd}});break}case"AttrEmpty":{i.push({type:"AttrEmpty",name:Ae(r.name,t),position:D(r),source:r.source});break}case"AttrSingleQuoted":case"AttrDoubleQuoted":case"AttrUnquoted":{let u={type:r.type,name:Ae(r.name,t),position:D(r),source:r.source,attributePosition:{start:-1,end:-1},value:[]},a=gc(r.value,t);u.value=a,u.attributePosition=mc(r,a),i.push(u);break}case"YAMLFrontmatter":{i.push({type:"YAMLFrontmatter",body:r.body,position:D(r),source:r.source});break}case"LiquidDocParamNode":{i.push({type:"LiquidDocParamNode",name:r.name,position:D(r),source:r.source,paramName:Bt(r.paramName.content),paramDescription:Au(r.paramDescription),paramType:Au(r.paramType),required:r.paramName.required});break}case"LiquidDocDescriptionNode":{i.push({type:"LiquidDocDescriptionNode",name:r.name,position:D(r),source:r.source,content:Bt(r.content),isImplicit:r.isImplicit});break}case"LiquidDocExampleNode":{i.push({type:"LiquidDocExampleNode",name:r.name,position:D(r),source:r.source,content:Bt(r.content)});break}default:Nt(r)}}return i}function gu(e){let t=e.at(0);return e.at(-1).locEnd-t.locStart}function mc(e,t){return t.length===0?{start:e.locStart+gu(e.name)+1+1,end:e.locStart+gu(e.name)+1+1}:{start:t[0].position.start,end:t[t.length-1].position.end}}function gc(e,t){return Ae(e,t)}function ti(e,t){return Ae(e,t)}function H(e){return{type:"LiquidTag",position:D(e),whitespaceStart:e.whitespaceStart??"",whitespaceEnd:e.whitespaceEnd??"",blockStartPosition:D(e),source:e.source}}function hu(e){return{type:"LiquidBranch",children:[],position:D(e),whitespaceStart:e.whitespaceStart??"",whitespaceEnd:e.whitespaceEnd??"",blockStartPosition:D(e),blockEndPosition:{start:-1,end:-1},source:e.source}}function fu(e,t){return typeof e.markup!="string"?hc(e,t):cc(e)?fc(e):t.isBlockTag?{name:e.name,markup:dr(e.name,e.markup),children:t.isBlockTag?[]:void 0,...H(e)}:{name:e.name,markup:dr(e.name,e.markup),...H(e)}}function hc(e,t){switch(e.name){case"echo":return{...H(e),name:"echo",markup:mr(e.markup)};case"assign":return{...H(e),name:"assign",markup:Cc(e.markup)};case"cycle":return{...H(e),name:e.name,markup:Ac(e.markup)};case"increment":case"decrement":return{...H(e),name:e.name,markup:N(e.markup)};case"capture":return{...H(e),name:e.name,markup:N(e.markup),children:[]};case"content_for":return{...H(e),name:e.name,markup:bc(e.markup)};case"include":case"render":return{...H(e),name:e.name,markup:Tc(e.markup)};case"layout":case"section":return{...H(e),name:e.name,markup:N(e.markup)};case"sections":return{...H(e),name:e.name,markup:N(e.markup)};case"form":return{...H(e),name:e.name,markup:e.markup.map(ii),children:[]};case"tablerow":case"for":return{...H(e),name:e.name,markup:yc(e.markup),children:[]};case"paginate":return{...H(e),name:e.name,markup:Ec(e.markup),children:[]};case"if":case"unless":return{...H(e),name:e.name,markup:pr(e.markup),blockEndPosition:{start:-1,end:-1},children:[]};case"elsif":return{...hu(e),name:e.name,markup:pr(e.markup)};case"case":return{...H(e),name:e.name,markup:N(e.markup),children:[]};case"when":return{...hu(e),name:e.name,markup:e.markup.map(N)};case"liquid":return{...H(e),name:e.name,markup:Ae(e.markup,t)};default:return Nt(e)}}function fc(e){return{name:e.name,type:"LiquidBranch",markup:e.name!=="else"?e.markup:"",position:{start:e.locStart,end:e.locEnd},children:[],blockStartPosition:{start:e.locStart,end:e.locEnd},blockEndPosition:{start:-1,end:-1},whitespaceStart:e.whitespaceStart??"",whitespaceEnd:e.whitespaceEnd??"",source:e.source}}function Dc(e){return{type:"LiquidBranch",name:null,markup:"",position:{start:e.position.end,end:e.position.end},blockStartPosition:{start:e.position.end,end:e.position.end},blockEndPosition:{start:-1,end:-1},children:[],whitespaceStart:"",whitespaceEnd:"",source:e.source}}function Cc(e){return{type:"AssignMarkup",name:e.name,value:mr(e.value),position:D(e),source:e.source}}function Ac(e){return{type:"CycleMarkup",groupName:e.groupName?N(e.groupName):null,args:e.args.map(N),position:D(e),source:e.source}}function yc(e){return{type:"ForMarkup",variableName:e.variableName,collection:N(e.collection),args:e.args.map(gr),reversed:!!e.reversed,position:D(e),source:e.source}}function Ec(e){return{type:"PaginateMarkup",collection:N(e.collection),pageSize:N(e.pageSize),position:D(e),args:e.args?e.args.map(gr):[],source:e.source}}function Du(e,t){return{type:"RawMarkup",kind:Sc(e),nodes:Ae(e.children,t),value:e.body,position:{start:e.blockStartLocEnd,end:e.blockEndLocStart},source:e.source}}function Sc(e){switch(e.type){case"HtmlRawTag":return Lc(e);case"LiquidRawTag":return xc(e);default:return Nt(e)}}function Lc(e){switch(e.name){case"script":{let t=e.attrList?.find(n=>"name"in n&&typeof n.name!="string"&&n.name.length===1&&n.name[0].type==="TextNode"&&n.name[0].value==="type");if(!t||!("value"in t)||t.value.length===0||t.value[0].type!=="TextNode")return"javascript";let i=t.value[0].value;return i==="text/markdown"?"markdown":i==="application/x-typescript"?"typescript":i==="text/html"?"html":i&&(i.endsWith("json")||i.endsWith("importmap"))||i==="speculationrules"?"json":"javascript"}case"style":return Su.test(e.body)?"text":"css";default:return"text"}}function xc(e){switch(e.name){case"javascript":return"javascript";case"stylesheet":case"style":return Su.test(e.body)?"text":"css";case"schema":return"json";default:return"text"}}function bc(e){return{type:"ContentForMarkup",contentForType:N(e.contentForType),args:e.args.map(ii),position:D(e),source:e.source}}function Tc(e){return{type:"RenderMarkup",snippet:N(e.snippet),alias:e.alias,variable:qc(e.variable),args:e.renderArguments.map(ii),position:D(e),source:e.source}}function qc(e){return e?{type:"RenderVariableExpression",kind:e.kind,name:N(e.name),position:D(e),source:e.source}:null}function pr(e){if(e.length===1)return Cu(e[0]);let[t,i]=e,[,...n]=e;return{type:"LogicalExpression",relation:i.relation,left:Cu(t),right:pr(n),position:{start:t.locStart,end:e[e.length-1].locEnd},source:t.source}}function Cu(e){let t=e.expression;switch(t.type){case"Comparison":return Fc(t);default:return N(t)}}function Fc(e){return{type:"Comparison",comparator:e.comparator,left:N(e.left),right:N(e.right),position:D(e),source:e.source}}function Nc(e){return{type:"LiquidVariableOutput",markup:typeof e.markup=="string"?e.markup:mr(e.markup),whitespaceStart:e.whitespaceStart??"",whitespaceEnd:e.whitespaceEnd??"",position:D(e),source:e.source}}function mr(e){return{type:"LiquidVariable",expression:N(e.expression),filters:e.filters.map(Bc),position:D(e),rawSource:e.rawSource,source:e.source}}function N(e){switch(e.type){case"String":return{type:"String",position:D(e),single:e.single,value:e.value,source:e.source};case"Number":return{type:"Number",position:D(e),value:e.value,source:e.source};case"LiquidLiteral":return{type:"LiquidLiteral",position:D(e),value:e.value,keyword:e.keyword,source:e.source};case"Range":return{type:"Range",start:N(e.start),end:N(e.end),position:D(e),source:e.source};case"VariableLookup":return{type:"VariableLookup",name:e.name,lookups:e.lookups.map(N),position:D(e),source:e.source};default:return Nt(e)}}function Bc(e){return{type:"LiquidFilter",name:e.name,args:e.args.map(ii),position:D(e),source:e.source}}function ii(e){switch(e.type){case"NamedArgument":return gr(e);default:return N(e)}}function gr(e){return{type:"NamedArgument",name:e.name,value:N(e.value),position:D(e),source:e.source}}function vc(e,t){return{type:"HtmlElement",name:Ae(e.name,t),attributes:ti(e.attrList||[],t),position:D(e),blockStartPosition:D(e),blockEndPosition:{start:-1,end:-1},children:[],source:e.source}}function kc(e,t){return{type:"HtmlDanglingMarkerClose",name:Ae(e.name,t),position:D(e),blockStartPosition:D(e),source:e.source}}function Ic(e,t){return{type:"HtmlVoidElement",name:e.name,attributes:ti(e.attrList||[],t),position:D(e),blockStartPosition:D(e),source:e.source}}function wc(e,t){return{type:"HtmlSelfClosingElement",name:Ae(e.name,t),attributes:ti(e.attrList||[],t),position:D(e),blockStartPosition:D(e),source:e.source}}function Au(e){return!e||e.value===""?null:Bt(e)}function Bt(e){return{type:"TextNode",value:e.value,position:D(e),source:e.source}}function Pc(e,t,i,n){if(n==="completion"){let r=t[i];return!(e.parent&&e.parent.type==="HtmlElement"&&ne(e.parent)===ne(r))}return Oc(e)}function Oc(e){let{parent:t,grandparent:i}=e;return!t||!i?!1:t.type==="LiquidBranch"&&i.type==="LiquidTag"&&["if","unless","case"].includes(i.name)}function dr(e,t){return nr.includes(e)?"":t}function D(e){return{start:e.locStart,end:e.locEnd}}function ei(e,t,i){for(let n of Object.keys(e)){if(cu.has(n))continue;let r=e[n];Array.isArray(r)?r.filter(yu).forEach(u=>ei(u,t,e)):yu(r)&&ei(r,t,e)}t(e,i)}function yu(e){return e!==null&&typeof e=="object"&&"type"in e&&Z.hasOwnProperty(e.type)}function Lu(e,t){if(e)return ne(e)===null&&t&&(e=t),{type:e.type,name:ne(e)??"",blockStartPosition:"blockStartPosition"in e?e.blockStartPosition:e.position}}var cr,Su,xu=L(()=>{"use strict";sr();Xt();mu();Yt();Kt();sr();cr=class{constructor(t){this.ast=[],this.cursor=[],this.source=t}get current(){return ot(this.cursor,this.ast)}get currentPosition(){return(this.current||[]).length-1}get parent(){if(this.cursor.length!=0)return ot(lr(1,this.cursor),this.ast)}get grandparent(){if(!(this.cursor.length<4))return ot(lr(3,this.cursor),this.ast)}open(t){this.current.push(t),this.cursor.push(this.currentPosition),this.cursor.push("children"),be(t)&&this.open(Dc(t))}push(t){if(t.type==="LiquidBranch"){let i=this.findCloseableParentBranch(t);if(i){for(i.blockEndPosition={start:t.position.start,end:t.position.start};this.parent&&this.parent!==i&&this.parent.type==="HtmlElement";)this.parent.blockEndPosition={start:t.position.start,end:t.position.start},this.closeParentWith(t);this.closeParentWith(t)}this.open(t)}else this.current.push(t)}close(t,i){if(pc(this.parent)&&(this.parent.blockEndPosition={start:t.locStart,end:t.locStart},this.closeParentWith(t)),!this.parent)throw new Ue(`Attempting to close ${i} '${ne(t)}' before it was opened`,this.source,t.locStart,t.locEnd);if(ne(this.parent)!==ne(t)||this.parent.type!==i){let n=this.findCloseableParentNode(t);if(this.parent.type==="HtmlElement"&&n)for(;this.parent!==n;)this.parent.blockEndPosition={start:t.locStart,end:t.locStart},this.closeParentWith(t);else throw new Ue(`Attempting to close ${i} '${ne(t)}' before ${this.parent.type} '${ne(this.parent)}' was closed`,this.source,this.parent.position.start,t.locEnd,Lu(this.parent))}this.parent.position.end=t.locEnd,this.parent.blockEndPosition=D(t),this.parent.type=="LiquidTag"&&t.type=="LiquidTagClose"&&(this.parent.delimiterWhitespaceStart=t.whitespaceStart??"",this.parent.delimiterWhitespaceEnd=t.whitespaceEnd??""),this.cursor.pop(),this.cursor.pop()}findCloseableParentBranch(t){for(let i=this.cursor.length-1;i>0;i-=2){let n=ot(this.cursor.slice(0,i),this.ast),r=this.cursor[i],u=n.type==="HtmlElement"&&r==="children";if(n.type==="LiquidBranch")return n;if(!u)throw new Ue(`Attempting to open LiquidBranch '${t.name}' before ${n.type} '${ne(n)}' was closed`,this.source,n.position.start,t.position.end)}return null}findCloseableParentNode(t){for(let i=this.cursor.length-1;i>0;i-=2){let n=ot(this.cursor.slice(0,i),this.ast);if(ne(n)===ne(t)&&n.type==="LiquidTag"&&["if","unless","case"].includes(n.name))return n;if(n.type==="LiquidTag")return null}return null}closeParentWith(t){this.parent&&("locStart"in t?this.parent.position.end=t.locStart:this.parent.position.end=t.position.start),this.cursor.pop(),this.cursor.pop()}};Su=/(\{%|\{\{)-?/g});var Rc,hr,bu=L(()=>{"use strict";Rc=/(<!--\[if[^\]]*]>)((.|\n)*)(<!\[endif\]-->)$/,hr=e=>{let t=e.match(Rc);if(t)return{startTag:t[1],body:t[2].trim(),endTag:t[4]}}});var X=L(()=>{"use strict";xu();Xt();Yt();Kt();bu()});function ye(e){throw new Error(`Unexpected object: ${e.type}`)}function ri(e){return typeof e=="string"?-1:e.position.start}function ni(e){return typeof e=="string"?-1:e.position.end}var st=L(()=>{"use strict"});function Hc(e){return Eu(e)}var ui,fr,_c,qu,Dr=L(()=>{"use strict";X();st();ui="liquid-html-ast",fr="liquid-html",_c={parse:Hc,astFormat:ui,locStart:ri,locEnd:ni},qu={[fr]:_c}});function Fu(e){return e!==null&&typeof e=="object"&&"type"in e&&Z.hasOwnProperty(e.type)}var Cr,Ar=L(()=>{"use strict";X();Cr=new Set(["parentNode","prev","next","firstChild","lastChild"])});import{doc as yr,version as Vc}from"prettier";function wu(e,t){let i=e.parentNode,n=i&&i.type==="LiquidRawTag"&&i.name==="schema"&&!t.indentSchema;return e.kind!=="markdown"&&!n}var Nu,Bu,Oe,vu,ku,Iu,Pu=L(()=>{"use strict";X();({builders:{dedentToRoot:Nu,indent:Bu,hardline:Oe}}=yr),vu={css:"css",html:null,javascript:"babel",json:"json",markdown:"markdown",typescript:"typescript",text:null},ku=(e,t,i,n)=>{let r=e.getValue();switch(r.type){case"RawMarkup":{let u=vu[r.kind];if(u&&r.value.trim()!==""){let a=yr.utils.stripTrailingHardline(i(r.value,{...n,singleQuote:n.embeddedSingleQuote,parser:u,__embeddedInHtml:!0}));return wu(r,n)?[Bu([Oe,a]),Oe]:[Nu([Oe,a]),Oe]}}default:return null}},Iu=(e,t)=>(i=>{let n=e.node;switch(n.type){case"RawMarkup":{let r=vu[n.kind];if(r&&n.value.trim()!=="")return i(n.value,{...t,singleQuote:t.embeddedSingleQuote,parser:r,__embeddedInHtml:!0}).then(u=>{let a=yr.utils.stripTrailingHardline(u);return wu(n,t)?[Bu([Oe,a]),Oe]:[Nu([Oe,a]),Oe]})}default:return}})});var Ou=pe((jm,Wc)=>{Wc.exports=[{selectorText:`[hidden], area, base, basefont, datalist, head, link, meta,
noembed, noframes, param, rp, script, source, style, template, track, title`,type:"CSSStyleRule",style:{display:"none"}},{selectorText:"embed[hidden]",type:"CSSStyleRule",style:{display:"inline",height:"0",width:"0"}},{selectorText:"input[type=hidden i]",type:"CSSStyleRule",style:{display:"none"}},{selectorText:"html, body",type:"CSSStyleRule",style:{display:"block"}},{selectorText:`address, blockquote, center, div, figure, figcaption, footer, form, header, hr,
legend, listing, main, p, plaintext, pre, xmp`,type:"CSSStyleRule",style:{display:"block"}},{selectorText:"blockquote, figure, listing, p, plaintext, pre, xmp",type:"CSSStyleRule",style:{"margin-block-start":"1em","margin-block-end":"1em"}},{selectorText:"blockquote, figure",type:"CSSStyleRule",style:{"margin-inline-start":"40px","margin-inline-end":"40px"}},{selectorText:"address",type:"CSSStyleRule",style:{"font-style":"italic"}},{selectorText:"listing, plaintext, pre, xmp",type:"CSSStyleRule",style:{"font-family":"monospace","white-space":"pre"}},{selectorText:"dialog:not([open])",type:"CSSStyleRule",style:{display:"none"}},{selectorText:"dialog",type:"CSSStyleRule",style:{position:"absolute",left:"0",right:"0",width:"fit-content",height:"fit-content",margin:"auto",border:"solid",padding:"1em",background:"white",color:"black"}},{selectorText:"dialog::backdrop",type:"CSSStyleRule",style:{background:"rgba(0,0,0,0.1)"}},{selectorText:"slot",type:"CSSStyleRule",style:{display:"contents"}},{selectorText:"pre[wrap]",type:"CSSStyleRule",style:{"white-space":"pre-wrap"}},{selectorText:"form",type:"CSSStyleRule",style:{"margin-block-end":"1em"}},{selectorText:"cite, dfn, em, i, var",type:"CSSStyleRule",style:{"font-style":"italic"}},{selectorText:"b, strong",type:"CSSStyleRule",style:{"font-weight":"bolder"}},{selectorText:"code, kbd, samp, tt",type:"CSSStyleRule",style:{"font-family":"monospace"}},{selectorText:"big",type:"CSSStyleRule",style:{"font-size":"larger"}},{selectorText:"small",type:"CSSStyleRule",style:{"font-size":"smaller"}},{selectorText:"sub",type:"CSSStyleRule",style:{"vertical-align":"sub"}},{selectorText:"sup",type:"CSSStyleRule",style:{"vertical-align":"super"}},{selectorText:"sub, sup",type:"CSSStyleRule",style:{"line-height":"normal","font-size":"smaller"}},{selectorText:"ruby",type:"CSSStyleRule",style:{display:"ruby"}},{selectorText:"rt",type:"CSSStyleRule",style:{display:"ruby-text"}},{selectorText:":link",type:"CSSStyleRule",style:{color:"#0000EE"}},{selectorText:":visited",type:"CSSStyleRule",style:{color:"#551A8B"}},{selectorText:":link:active, :visited:active",type:"CSSStyleRule",style:{color:"#FF0000"}},{selectorText:":link, :visited",type:"CSSStyleRule",style:{"text-decoration":"underline",cursor:"pointer"}},{selectorText:`a:link[rel~=help], a:visited[rel~=help],
area:link[rel~=help], area:visited[rel~=help]`,type:"CSSStyleRule",style:{cursor:"help"}},{selectorText:":focus",type:"CSSStyleRule",style:{outline:"auto"}},{selectorText:"mark",type:"CSSStyleRule",style:{background:"yellow",color:"black"}},{selectorText:"abbr[title], acronym[title]",type:"CSSStyleRule",style:{"text-decoration":"dotted underline"}},{selectorText:"ins, u",type:"CSSStyleRule",style:{"text-decoration":"underline"}},{selectorText:"del, s, strike",type:"CSSStyleRule",style:{"text-decoration":"line-through"}},{selectorText:"blink",type:"CSSStyleRule",style:{"text-decoration":"blink"}},{selectorText:"q::before",type:"CSSStyleRule",style:{content:"open-quote"}},{selectorText:"q::after",type:"CSSStyleRule",style:{content:"close-quote"}},{selectorText:"br",type:"CSSStyleRule",style:{"display-outside":"newline"}},{selectorText:"nobr",type:"CSSStyleRule",style:{"white-space":"nowrap"}},{selectorText:"wbr",type:"CSSStyleRule",style:{"display-outside":"break-opportunity"}},{selectorText:"nobr wbr",type:"CSSStyleRule",style:{"white-space":"normal"}},{selectorText:"br[clear=left i]",type:"CSSStyleRule",style:{clear:"left"}},{selectorText:"br[clear=right i]",type:"CSSStyleRule",style:{clear:"right"}},{selectorText:"br[clear=all i], br[clear=both i]",type:"CSSStyleRule",style:{clear:"both"}},{selectorText:"[dir]:dir(ltr), bdi:dir(ltr), input[type=tel i]:dir(ltr)",type:"CSSStyleRule",style:{direction:"ltr"}},{selectorText:"[dir]:dir(rtl), bdi:dir(rtl)",type:"CSSStyleRule",style:{direction:"rtl"}},{selectorText:`address, blockquote, center, div, figure, figcaption, footer, form, header, hr,
legend, listing, main, p, plaintext, pre, summary, xmp, article, aside, h1, h2,
h3, h4, h5, h6, hgroup, nav, section, table, caption, colgroup, col, thead,
tbody, tfoot, tr, td, th, dir, dd, dl, dt, ol, ul, li, bdi, output,
[dir=ltr i], [dir=rtl i], [dir=auto i]`,type:"CSSStyleRule",style:{"unicode-bidi":"isolate"}},{selectorText:"bdo, bdo[dir]",type:"CSSStyleRule",style:{"unicode-bidi":"isolate-override"}},{selectorText:"input[dir=auto i][type=search i], input[dir=auto i][type=tel i], input[dir=auto i][type=url i], input[dir=auto i][type=email i], textarea[dir=auto i], pre[dir=auto i]",type:"CSSStyleRule",style:{"unicode-bidi":"plaintext"}},{selectorText:`address, blockquote, center, div, figure, figcaption, footer, form, header, hr,
legend, listing, main, p, plaintext, pre, summary, xmp, article, aside, h1, h2,
h3, h4, h5, h6, hgroup, nav, section, table, caption, colgroup, col, thead,
tbody, tfoot, tr, td, th, dir, dd, dl, dt, ol, ul, li, [dir=ltr i],
[dir=rtl i], [dir=auto i], *|*`,type:"CSSStyleRule",style:{"unicode-bidi":"bidi-override"}},{selectorText:`input:not([type=submit i]):not([type=reset i]):not([type=button i]),
textarea`,type:"CSSStyleRule",style:{"unicode-bidi":"normal"}},{selectorText:"article, aside, h1, h2, h3, h4, h5, h6, hgroup, nav, section",type:"CSSStyleRule",style:{display:"block"}},{selectorText:"h1",type:"CSSStyleRule",style:{"margin-block-start":"0.67em","margin-block-end":"0.67em","font-size":"2.00em","font-weight":"bold"}},{selectorText:"h2",type:"CSSStyleRule",style:{"margin-block-start":"0.83em","margin-block-end":"0.83em","font-size":"1.50em","font-weight":"bold"}},{selectorText:"h3",type:"CSSStyleRule",style:{"margin-block-start":"1.00em","margin-block-end":"1.00em","font-size":"1.17em","font-weight":"bold"}},{selectorText:"h4",type:"CSSStyleRule",style:{"margin-block-start":"1.33em","margin-block-end":"1.33em","font-size":"1.00em","font-weight":"bold"}},{selectorText:"h5",type:"CSSStyleRule",style:{"margin-block-start":"1.67em","margin-block-end":"1.67em","font-size":"0.83em","font-weight":"bold"}},{selectorText:"h6",type:"CSSStyleRule",style:{"margin-block-start":"2.33em","margin-block-end":"2.33em","font-size":"0.67em","font-weight":"bold"}},{selectorText:"x h1",type:"CSSStyleRule",style:{"margin-block-start":"0.83em","margin-block-end":"0.83em","font-size":"1.50em"}},{selectorText:"x x h1",type:"CSSStyleRule",style:{"margin-block-start":"1.00em","margin-block-end":"1.00em","font-size":"1.17em"}},{selectorText:"x x x h1",type:"CSSStyleRule",style:{"margin-block-start":"1.33em","margin-block-end":"1.33em","font-size":"1.00em"}},{selectorText:"x x x x h1",type:"CSSStyleRule",style:{"margin-block-start":"1.67em","margin-block-end":"1.67em","font-size":"0.83em"}},{selectorText:"x x x x x h1",type:"CSSStyleRule",style:{"margin-block-start":"2.33em","margin-block-end":"2.33em","font-size":"0.67em"}},{selectorText:"x hgroup > h1 ~ h2",type:"CSSStyleRule",style:{"margin-block-start":"1.00em","margin-block-end":"1.00em","font-size":"1.17em"}},{selectorText:"x x hgroup > h1 ~ h2",type:"CSSStyleRule",style:{"margin-block-start":"1.33em","margin-block-end":"1.33em","font-size":"1.00em"}},{selectorText:"x x x hgroup > h1 ~ h2",type:"CSSStyleRule",style:{"margin-block-start":"1.67em","margin-block-end":"1.67em","font-size":"0.83em"}},{selectorText:"x x x x hgroup > h1 ~ h2",type:"CSSStyleRule",style:{"margin-block-start":"2.33em","margin-block-end":"2.33em","font-size":"0.67em"}},{selectorText:"x hgroup > h1 ~ h3",type:"CSSStyleRule",style:{"margin-block-start":"1.33em","margin-block-end":"1.33em","font-size":"1.00em"}},{selectorText:"x x hgroup > h1 ~ h3",type:"CSSStyleRule",style:{"margin-block-start":"1.67em","margin-block-end":"1.67em","font-size":"0.83em"}},{selectorText:"x x x hgroup > h1 ~ h3",type:"CSSStyleRule",style:{"margin-block-start":"2.33em","margin-block-end":"2.33em","font-size":"0.67em"}},{selectorText:"x hgroup > h1 ~ h4",type:"CSSStyleRule",style:{"margin-block-start":"1.67em","margin-block-end":"1.67em","font-size":"0.83em"}},{selectorText:"x x hgroup > h1 ~ h4",type:"CSSStyleRule",style:{"margin-block-start":"2.33em","margin-block-end":"2.33em","font-size":"0.67em"}},{selectorText:"x hgroup > h1 ~ h5",type:"CSSStyleRule",style:{"margin-block-start":"2.33em","margin-block-end":"2.33em","font-size":"0.67em"}},{selectorText:"dir, dd, dl, dt, ol, ul",type:"CSSStyleRule",style:{display:"block"}},{selectorText:"li",type:"CSSStyleRule",style:{display:"list-item"}},{selectorText:"dir, dl, ol, ul",type:"CSSStyleRule",style:{"margin-block-start":"1em","margin-block-end":"1em"}},{selectorText:"dir dir, dl dir, ol dir, ul dir, dir dl, dl dl, ol dl, ul dl, dir ol, dl ol, ol ol, ul ol, dir ul, dl ul, ol ul, ul ul",type:"CSSStyleRule",style:{"margin-block-start":"0","margin-block-end":"0"}},{selectorText:"dd",type:"CSSStyleRule",style:{"margin-inline-start":"40px"}},{selectorText:"dir, ol, ul",type:"CSSStyleRule",style:{"padding-inline-start":"40px"}},{selectorText:"ol",type:"CSSStyleRule",style:{"list-style-type":"decimal"}},{selectorText:"dir, ul",type:"CSSStyleRule",style:{"list-style-type":"disc"}},{selectorText:"dir dir, ol dir, ul dir, dir ul, ol ul, ul ul",type:"CSSStyleRule",style:{"list-style-type":"circle"}},{selectorText:"dir dir dir, ol dir dir, ul dir dir, dir ol dir, ol ol dir, ul ol dir, dir ul dir, ol ul dir, ul ul dir, dir dir ul, ol dir ul, ul dir ul, dir ol ul, ol ol ul, ul ol ul, dir ul ul, ol ul ul, ul ul ul",type:"CSSStyleRule",style:{"list-style-type":"square"}},{selectorText:'ol[type="1"], li[type="1"]',type:"CSSStyleRule",style:{"list-style-type":"decimal"}},{selectorText:"ol[type=a], li[type=a]",type:"CSSStyleRule",style:{"list-style-type":"lower-alpha"}},{selectorText:"ol[type=A], li[type=A]",type:"CSSStyleRule",style:{"list-style-type":"upper-alpha"}},{selectorText:"ol[type=i], li[type=i]",type:"CSSStyleRule",style:{"list-style-type":"lower-roman"}},{selectorText:"ol[type=I], li[type=I]",type:"CSSStyleRule",style:{"list-style-type":"upper-roman"}},{selectorText:"ul[type=none i], li[type=none i]",type:"CSSStyleRule",style:{"list-style-type":"none"}},{selectorText:"ul[type=disc i], li[type=disc i]",type:"CSSStyleRule",style:{"list-style-type":"disc"}},{selectorText:"ul[type=circle i], li[type=circle i]",type:"CSSStyleRule",style:{"list-style-type":"circle"}},{selectorText:"ul[type=square i], li[type=square i]",type:"CSSStyleRule",style:{"list-style-type":"square"}},{selectorText:"table",type:"CSSStyleRule",style:{display:"table"}},{selectorText:"caption",type:"CSSStyleRule",style:{display:"table-caption"}},{selectorText:"colgroup, colgroup[hidden]",type:"CSSStyleRule",style:{display:"table-column-group"}},{selectorText:"col, col[hidden]",type:"CSSStyleRule",style:{display:"table-column"}},{selectorText:"thead, thead[hidden]",type:"CSSStyleRule",style:{display:"table-header-group"}},{selectorText:"tbody, tbody[hidden]",type:"CSSStyleRule",style:{display:"table-row-group"}},{selectorText:"tfoot, tfoot[hidden]",type:"CSSStyleRule",style:{display:"table-footer-group"}},{selectorText:"tr, tr[hidden]",type:"CSSStyleRule",style:{display:"table-row"}},{selectorText:"td, th, td[hidden], th[hidden]",type:"CSSStyleRule",style:{display:"table-cell"}},{selectorText:`colgroup[hidden], col[hidden], thead[hidden], tbody[hidden],
tfoot[hidden], tr[hidden], td[hidden], th[hidden]`,type:"CSSStyleRule",style:{visibility:"collapse"}},{selectorText:"table",type:"CSSStyleRule",style:{"box-sizing":"border-box","border-spacing":"2px","border-collapse":"separate","text-indent":"initial"}},{selectorText:"td, th",type:"CSSStyleRule",style:{padding:"1px"}},{selectorText:"th",type:"CSSStyleRule",style:{"font-weight":"bold"}},{selectorText:"caption",type:"CSSStyleRule",style:{"text-align":"center"}},{selectorText:"thead, tbody, tfoot, table > tr",type:"CSSStyleRule",style:{"vertical-align":"middle"}},{selectorText:"tr, td, th",type:"CSSStyleRule",style:{"vertical-align":"inherit"}},{selectorText:"table, td, th",type:"CSSStyleRule",style:{"border-color":"gray"}},{selectorText:"thead, tbody, tfoot, tr",type:"CSSStyleRule",style:{"border-color":"inherit"}},{selectorText:`table[rules=none i], table[rules=groups i], table[rules=rows i],
table[rules=cols i], table[rules=all i], table[frame=void i],
table[frame=above i], table[frame=below i], table[frame=hsides i],
table[frame=lhs i], table[frame=rhs i], table[frame=vsides i],
table[frame=box i], table[frame=border i],
table[rules=none i] > tr > td, table[rules=none i] > tr > th,
table[rules=groups i] > tr > td, table[rules=groups i] > tr > th,
table[rules=rows i] > tr > td, table[rules=rows i] > tr > th,
table[rules=cols i] > tr > td, table[rules=cols i] > tr > th,
table[rules=all i] > tr > td, table[rules=all i] > tr > th,
table[rules=none i] > thead > tr > td, table[rules=none i] > thead > tr > th,
table[rules=groups i] > thead > tr > td, table[rules=groups i] > thead > tr > th,
table[rules=rows i] > thead > tr > td, table[rules=rows i] > thead > tr > th,
table[rules=cols i] > thead > tr > td, table[rules=cols i] > thead > tr > th,
table[rules=all i] > thead > tr > td, table[rules=all i] > thead > tr > th,
table[rules=none i] > tbody > tr > td, table[rules=none i] > tbody > tr > th,
table[rules=groups i] > tbody > tr > td, table[rules=groups i] > tbody > tr > th,
table[rules=rows i] > tbody > tr > td, table[rules=rows i] > tbody > tr > th,
table[rules=cols i] > tbody > tr > td, table[rules=cols i] > tbody > tr > th,
table[rules=all i] > tbody > tr > td, table[rules=all i] > tbody > tr > th,
table[rules=none i] > tfoot > tr > td, table[rules=none i] > tfoot > tr > th,
table[rules=groups i] > tfoot > tr > td, table[rules=groups i] > tfoot > tr > th,
table[rules=rows i] > tfoot > tr > td, table[rules=rows i] > tfoot > tr > th,
table[rules=cols i] > tfoot > tr > td, table[rules=cols i] > tfoot > tr > th,
table[rules=all i] > tfoot > tr > td, table[rules=all i] > tfoot > tr > th`,type:"CSSStyleRule",style:{"border-color":"black"}},{selectorText:"table[align=left i]",type:"CSSStyleRule",style:{float:"left"}},{selectorText:"table[align=right i]",type:"CSSStyleRule",style:{float:"right"}},{selectorText:"table[align=center i]",type:"CSSStyleRule",style:{"margin-inline-start":"auto","margin-inline-end":"auto"}},{selectorText:`thead[align=absmiddle i], tbody[align=absmiddle i], tfoot[align=absmiddle i],
tr[align=absmiddle i], td[align=absmiddle i], th[align=absmiddle i]`,type:"CSSStyleRule",style:{"text-align":"center"}},{selectorText:"caption[align=bottom i]",type:"CSSStyleRule",style:{"caption-side":"bottom"}},{selectorText:`p[align=left i], h1[align=left i], h2[align=left i], h3[align=left i],
h4[align=left i], h5[align=left i], h6[align=left i]`,type:"CSSStyleRule",style:{"text-align":"left"}},{selectorText:`p[align=right i], h1[align=right i], h2[align=right i], h3[align=right i],
h4[align=right i], h5[align=right i], h6[align=right i]`,type:"CSSStyleRule",style:{"text-align":"right"}},{selectorText:`p[align=center i], h1[align=center i], h2[align=center i], h3[align=center i],
h4[align=center i], h5[align=center i], h6[align=center i]`,type:"CSSStyleRule",style:{"text-align":"center"}},{selectorText:`p[align=justify i], h1[align=justify i], h2[align=justify i], h3[align=justify i],
h4[align=justify i], h5[align=justify i], h6[align=justify i]`,type:"CSSStyleRule",style:{"text-align":"justify"}},{selectorText:`thead[valign=top i], tbody[valign=top i], tfoot[valign=top i],
tr[valign=top i], td[valign=top i], th[valign=top i]`,type:"CSSStyleRule",style:{"vertical-align":"top"}},{selectorText:`thead[valign=middle i], tbody[valign=middle i], tfoot[valign=middle i],
tr[valign=middle i], td[valign=middle i], th[valign=middle i]`,type:"CSSStyleRule",style:{"vertical-align":"middle"}},{selectorText:`thead[valign=bottom i], tbody[valign=bottom i], tfoot[valign=bottom i],
tr[valign=bottom i], td[valign=bottom i], th[valign=bottom i]`,type:"CSSStyleRule",style:{"vertical-align":"bottom"}},{selectorText:`thead[valign=baseline i], tbody[valign=baseline i], tfoot[valign=baseline i],
tr[valign=baseline i], td[valign=baseline i], th[valign=baseline i]`,type:"CSSStyleRule",style:{"vertical-align":"baseline"}},{selectorText:"td[nowrap], th[nowrap]",type:"CSSStyleRule",style:{"white-space":"nowrap"}},{selectorText:`table[rules=none i], table[rules=groups i], table[rules=rows i],
table[rules=cols i], table[rules=all i]`,type:"CSSStyleRule",style:{"border-style":"hidden","border-collapse":"collapse"}},{selectorText:"table[border]",type:"CSSStyleRule",style:{"border-style":"outset"}},{selectorText:"table[frame=void i]",type:"CSSStyleRule",style:{"border-style":"hidden"}},{selectorText:"table[frame=above i]",type:"CSSStyleRule",style:{"border-style":"outset hidden hidden hidden"}},{selectorText:"table[frame=below i]",type:"CSSStyleRule",style:{"border-style":"hidden hidden outset hidden"}},{selectorText:"table[frame=hsides i]",type:"CSSStyleRule",style:{"border-style":"outset hidden outset hidden"}},{selectorText:"table[frame=lhs i]",type:"CSSStyleRule",style:{"border-style":"hidden hidden hidden outset"}},{selectorText:"table[frame=rhs i]",type:"CSSStyleRule",style:{"border-style":"hidden outset hidden hidden"}},{selectorText:"table[frame=vsides i]",type:"CSSStyleRule",style:{"border-style":"hidden outset"}},{selectorText:"table[frame=box i], table[frame=border i]",type:"CSSStyleRule",style:{"border-style":"outset"}},{selectorText:`table[border] > tr > td, table[border] > tr > th,
table[border] > thead > tr > td, table[border] > thead > tr > th,
table[border] > tbody > tr > td, table[border] > tbody > tr > th,
table[border] > tfoot > tr > td, table[border] > tfoot > tr > th`,type:"CSSStyleRule",style:{"border-width":"1px","border-style":"inset"}},{selectorText:`table[rules=none i] > tr > td, table[rules=none i] > tr > th,
table[rules=none i] > thead > tr > td, table[rules=none i] > thead > tr > th,
table[rules=none i] > tbody > tr > td, table[rules=none i] > tbody > tr > th,
table[rules=none i] > tfoot > tr > td, table[rules=none i] > tfoot > tr > th,
table[rules=groups i] > tr > td, table[rules=groups i] > tr > th,
table[rules=groups i] > thead > tr > td, table[rules=groups i] > thead > tr > th,
table[rules=groups i] > tbody > tr > td, table[rules=groups i] > tbody > tr > th,
table[rules=groups i] > tfoot > tr > td, table[rules=groups i] > tfoot > tr > th,
table[rules=rows i] > tr > td, table[rules=rows i] > tr > th,
table[rules=rows i] > thead > tr > td, table[rules=rows i] > thead > tr > th,
table[rules=rows i] > tbody > tr > td, table[rules=rows i] > tbody > tr > th,
table[rules=rows i] > tfoot > tr > td, table[rules=rows i] > tfoot > tr > th`,type:"CSSStyleRule",style:{"border-width":"1px","border-style":"none"}},{selectorText:`table[rules=cols i] > tr > td, table[rules=cols i] > tr > th,
table[rules=cols i] > thead > tr > td, table[rules=cols i] > thead > tr > th,
table[rules=cols i] > tbody > tr > td, table[rules=cols i] > tbody > tr > th,
table[rules=cols i] > tfoot > tr > td, table[rules=cols i] > tfoot > tr > th`,type:"CSSStyleRule",style:{"border-width":"1px","block-start-style":"none","border-inline-end-style":"solid","border-block-end-style":"none","border-inline-start-style":"solid"}},{selectorText:`table[rules=all i] > tr > td, table[rules=all i] > tr > th,
table[rules=all i] > thead > tr > td, table[rules=all i] > thead > tr > th,
table[rules=all i] > tbody > tr > td, table[rules=all i] > tbody > tr > th,
table[rules=all i] > tfoot > tr > td, table[rules=all i] > tfoot > tr > th`,type:"CSSStyleRule",style:{"border-width":"1px","border-style":"solid"}},{selectorText:"table[rules=groups i] > colgroup",type:"CSSStyleRule",style:{"border-inline-start-width":"1px","border-inline-start-style":"solid","border-inline-end-width":"1px","border-inline-end-style":"solid"}},{selectorText:`table[rules=groups i] > thead,
table[rules=groups i] > tbody,
table[rules=groups i] > tfoot`,type:"CSSStyleRule",style:{"border-block-start-width":"1px","border-block-start-style":"solid","border-block-end-width":"1px","border-block-end-style":"solid"}},{selectorText:`table[rules=rows i] > tr, table[rules=rows i] > thead > tr,
table[rules=rows i] > tbody > tr, table[rules=rows i] > tfoot > tr`,type:"CSSStyleRule",style:{"border-block-start-width":"1px","border-block-start-style":"solid","border-block-end-width":"1px","border-block-end-style":"solid"}},{selectorText:"table",type:"CSSStyleRule",style:{"font-weight":"initial","font-style":"initial","font-variant":"initial","font-size":"initial","line-height":"initial","white-space":"initial","text-align":"initial"}},{selectorText:"table > form, thead > form, tbody > form, tfoot > form, tr > form",type:"CSSStyleRule",style:{display:"none"}},{selectorText:"input, select, option, optgroup, button, textarea",type:"CSSStyleRule",style:{"text-indent":"initial"}},{selectorText:"input[type=radio i], input[type=checkbox i], input[type=reset i], input[type=button i], input[type=submit i], input[type=search i], select, button",type:"CSSStyleRule",style:{"box-sizing":"border-box"}},{selectorText:"textarea",type:"CSSStyleRule",style:{"white-space":"pre-wrap"}},{selectorText:"input:not([type=image i]), textarea",type:"CSSStyleRule",style:{"box-sizing":"border-box"}},{selectorText:"hr",type:"CSSStyleRule",style:{color:"gray","border-style":"inset","border-width":"1px","margin-block-start":"0.5em","margin-inline-end":"auto","margin-block-end":"0.5em","margin-inline-start":"auto"}},{selectorText:"hr[align=left i]",type:"CSSStyleRule",style:{"margin-left":"0","margin-right":"auto"}},{selectorText:"hr[align=right i]",type:"CSSStyleRule",style:{"margin-left":"auto","margin-right":"0"}},{selectorText:"hr[align=center i]",type:"CSSStyleRule",style:{"margin-left":"auto","margin-right":"auto"}},{selectorText:"hr[color], hr[noshade]",type:"CSSStyleRule",style:{"border-style":"solid"}},{selectorText:"fieldset",type:"CSSStyleRule",style:{display:"block","margin-inline-start":"2px","margin-inline-end":"2px",border:"groove 2px ThreeDFace","padding-block-start":"0.35em","padding-inline-end":"0.625em","padding-block-end":"0.75em","padding-inline-start":"0.625em","min-width":"min-content"}},{selectorText:"legend",type:"CSSStyleRule",style:{"padding-inline-start":"2px","padding-inline-end":"2px"}},{selectorText:"iframe",type:"CSSStyleRule",style:{border:"2px inset"}},{selectorText:"video",type:"CSSStyleRule",style:{"object-fit":"contain"}},{selectorText:"img[align=left i]",type:"CSSStyleRule",style:{"margin-right":"3px"}},{selectorText:"img[align=right i]",type:"CSSStyleRule",style:{"margin-left":"3px"}},{selectorText:'iframe[frameborder="0"], iframe[frameborder=no i]',type:"CSSStyleRule",style:{border:"none"}},{selectorText:`applet[align=left i], embed[align=left i], iframe[align=left i],
img[align=left i], input[type=image i][align=left i], object[align=left i]`,type:"CSSStyleRule",style:{float:"left"}},{selectorText:`applet[align=right i], embed[align=right i], iframe[align=right i],
img[align=right i], input[type=image i][align=right i], object[align=right i]`,type:"CSSStyleRule",style:{float:"right"}},{selectorText:`applet[align=top i], embed[align=top i], iframe[align=top i],
img[align=top i], input[type=image i][align=top i], object[align=top i]`,type:"CSSStyleRule",style:{"vertical-align":"top"}},{selectorText:`applet[align=baseline i], embed[align=baseline i], iframe[align=baseline i],
img[align=baseline i], input[type=image i][align=baseline i], object[align=baseline i]`,type:"CSSStyleRule",style:{"vertical-align":"baseline"}},{selectorText:`applet[align=texttop i], embed[align=texttop i], iframe[align=texttop i],
img[align=texttop i], input[type=image i][align=texttop i], object[align=texttop i]`,type:"CSSStyleRule",style:{"vertical-align":"text-top"}},{selectorText:`applet[align=absmiddle i], embed[align=absmiddle i], iframe[align=absmiddle i],
img[align=absmiddle i], input[type=image i][align=absmiddle i], object[align=absmiddle i],
applet[align=abscenter i], embed[align=abscenter i], iframe[align=abscenter i],
img[align=abscenter i], input[type=image i][align=abscenter i], object[align=abscenter i]`,type:"CSSStyleRule",style:{"vertical-align":"middle"}},{selectorText:`applet[align=bottom i], embed[align=bottom i], iframe[align=bottom i],
img[align=bottom i], input[type=image i][align=bottom i],
object[align=bottom i]`,type:"CSSStyleRule",style:{"vertical-align":"bottom"}},{selectorText:"textarea",type:"CSSStyleRule",style:{"white-space":"pre-wrap"}}]});var Hu=pe((Gm,Ru)=>{Ru.exports=Ou()});var jc,_u,Er,Mu,Vu,Sr,vt,he,ai,Lr=L(()=>{"use strict";jc=Hu(),_u=e=>Object.fromEntries(jc.filter(t=>t.style[e]).flatMap(t=>t.selectorText.split(",").map(i=>i.trim()).filter(i=>/^[\dA-Za-z]+$/.test(i)).map(i=>[i,t.style[e]]))),Er={..._u("display"),button:"inline-block",template:"inline",source:"block",track:"block",script:"block",param:"block",details:"block",summary:"block",dialog:"block",meter:"inline-block",progress:"inline-block",object:"inline-block",video:"inline-block",audio:"inline-block",select:"inline-block",option:"block",optgroup:"block"},Mu={if:"inline",unless:"inline",else:"inline",elsif:"inline",case:"inline",when:"inline",for:"inline",cycle:"inline",tablerow:"block",break:"none",continue:"none",comment:"none",echo:"inline",form:"block",layout:"none",liquid:"inline",paginate:"inline",raw:"inline",render:"inline",include:"inline",section:"block",style:"none",assign:"none",capture:"inline",increment:"inline",decrement:"inline"},Vu="inline",Sr="inline",vt=_u("white-space"),he="normal",ai={capture:"pre",raw:"pre"}});function Wu(e){return e.match(/^\s*display:\s*([a-z]+)\s*$/)?.[1]}function ju(e){return e.match(/^\s*white-?space:\s*([a-z]+)\s*$/)?.[1]}function Gc(e,t){if(e.prev&&e.prev.type==="HtmlComment"){let i=Wu(e.prev.body);if(i)return i}if(e.prev&&e.prev.type==="LiquidTag"&&e.prev.name==="#"){let i=Wu(e.prev.markup);if(i)return i}switch(e.type){case"HtmlElement":case"HtmlDanglingMarkerClose":case"HtmlSelfClosingElement":switch(t.htmlWhitespaceSensitivity){case"strict":return"inline";case"ignore":return"block";default:return e.name.length===1&&e.name[0].type==="TextNode"&&Er[e.name[0].value]||Sr}case"HtmlVoidElement":case"HtmlRawNode":switch(t.htmlWhitespaceSensitivity){case"strict":return"inline";case"ignore":return"block";default:return Er[e.name]||Sr}case"RawMarkup":case"TextNode":return"inline";case"LiquidTag":case"LiquidRawTag":switch(t.htmlWhitespaceSensitivity){case"strict":return"inline";case"ignore":return"block";default:return Mu[e.name]||Vu}case"LiquidBranch":case"LiquidVariableOutput":return"inline";case"AttrDoubleQuoted":case"AttrSingleQuoted":case"AttrUnquoted":case"AttrEmpty":return"inline";case"HtmlDoctype":case"HtmlComment":return"block";case"Document":return"block";case"YAMLFrontmatter":return"block";case"LiquidVariable":case"LiquidFilter":case"NamedArgument":case"LiquidLiteral":case"String":case"Number":case"Range":case"VariableLookup":case"AssignMarkup":case"CycleMarkup":case"ContentForMarkup":case"ForMarkup":case"PaginateMarkup":case"RenderMarkup":case"RenderVariableExpression":case"LogicalExpression":case"Comparison":case"LiquidDocParamNode":case"LiquidDocExampleNode":case"LiquidDocDescriptionNode":return"should not be relevant";default:return ye(e)}}function $c(e,t){if(e.prev&&e.prev.type==="HtmlComment"){let i=ju(e.prev.body);if(i)return i}if(e.prev&&e.prev.type==="LiquidTag"&&e.prev.name==="#"){let i=ju(e.prev.markup);if(i)return i}switch(e.type){case"HtmlElement":case"HtmlDanglingMarkerClose":case"HtmlSelfClosingElement":return e.name.length===1&&e.name[0].type==="TextNode"&&vt[e.name[0].value]||he;case"HtmlVoidElement":case"HtmlRawNode":return vt[e.name]||he;case"TextNode":return he;case"RawMarkup":case"YAMLFrontmatter":case"LiquidRawTag":return"pre";case"LiquidTag":switch(e.name){case"capture":switch(t.captureWhitespaceSensitivity){case"strict":return"pre";case"ignore":return"normal";default:throw ye(t.captureWhitespaceSensitivity)}default:return ai[e.name]||he}case"LiquidBranch":case"LiquidVariableOutput":return he;case"AttrDoubleQuoted":case"AttrSingleQuoted":case"AttrUnquoted":case"AttrEmpty":return he;case"HtmlDoctype":case"HtmlComment":return he;case"Document":return he;case"LiquidVariable":case"LiquidFilter":case"NamedArgument":case"LiquidLiteral":case"String":case"Number":case"Range":case"VariableLookup":case"AssignMarkup":case"CycleMarkup":case"ContentForMarkup":case"ForMarkup":case"PaginateMarkup":case"RenderMarkup":case"RenderVariableExpression":case"LogicalExpression":case"Comparison":case"LiquidDocParamNode":case"LiquidDocExampleNode":case"LiquidDocDescriptionNode":return"should not be relevant";default:return ye(e)}}var Gu,$u=L(()=>{"use strict";X();Lr();st();Gu=(e,t)=>{let i={cssDisplay:Gc(t,e),cssWhitespace:$c(t,e)};Object.assign(t,i)}});var Uu,Qu=L(()=>{"use strict";Uu=(e,t,i)=>{Object.assign(t,{parentNode:i}),Object.defineProperty(t,"_rawSource",{get(){return this.source.slice(this.position.start,this.position.end)}})}});function Uc(e){if(!e.parentNode)return;let t=zu(e);return t[t.indexOf(e)-1]}function Qc(e){if(!e.parentNode)return;let t=zu(e);return t[t.indexOf(e)+1]}function zu(e){if(!e.parentNode)return[];for(let t of Object.keys(e.parentNode)){let i=e.parentNode[t];if(Array.isArray(i)&&i.indexOf(e)!==-1)return i;if(Fu(i)&&i===e)return[]}throw new Error("Could not find parent collection of node")}var Ku,Yu=L(()=>{"use strict";Ar();Ku=(e,t)=>{let i={next:Qc(t),prev:Uc(t)};Object.assign(t,i)}});function lt(e){return e[e.length-1]}function Ju(e){return e[0]}function B(e){return e.length===0}var oi=L(()=>{"use strict"});function si(e,t){return t<0||t>=e.length?!1:!!e[t].match(/\s/)}function kt(e){return e.replace(/^(?: |\t)*(\r?\n)*|\s*$/g,"").split(/\r?\n/)}function br(e){return e.trim().split(`
`)}function Qe(e,t=!1){let i=e.filter((r,u)=>t?u>0:!0).filter(r=>r.trim().length>0).map(r=>r.match(/^\s*/)[0].length).reduce((r,u)=>Math.min(r,u),1/0);if(i===1/0)return e;let n=new RegExp("^"+"\\s".repeat(i));return e.map(r=>r.replace(n,"")).map(zc)}function Zu(e,{locStart:t,locEnd:i}){let n=e.getValue();return It(n.source,t(n),i(n))}function It(e,t,i){let n=e.indexOf(`
`,t);return 0<=n&&n<i}function Xu(e,t,i){return!t||!i?!1:(e.slice(t.position.end,i.position.start).match(/\n/g)?.length||0)>1}var xr,zc,ea=L(()=>{"use strict";xr=e=>e.trim(),zc=e=>e.trimEnd()});function ct(e){return e.type==="HtmlRawNode"}function Re(e){return e.cssWhitespace.startsWith("pre")}function pt(e){return ze(e)||Tr(e)}function ze(e){return Ke(e)||Fr(e)||qr(e)||Kc(e)}function Tr(e){return e.type==="HtmlElement"&&e.blockEndPosition.start===e.blockEndPosition.end}function Kc(e){return e.type==="HtmlDanglingMarkerClose"}function qr(e){return e.type==="HtmlComment"}function Ke(e){return e.type==="HtmlSelfClosingElement"}function Fr(e){return e.type==="HtmlVoidElement"}function ra(e){return e.type==="HtmlElement"}function oe(e){return!!e&&e.type==="TextNode"}function se(e){return!!e&&Zt.includes(e.type)}function Te(e){return!!e&&Jt.includes(e.type)}function Ee(e){return Te(e.parentNode)&&"attributes"in e.parentNode&&e.parentNode.attributes.indexOf(e)!==-1}function Yc(e){return e.children&&e.children.some(t=>t.type!=="TextNode")}function Ye(e){return!!Re(e)}function Jc(e){return!!e&&e.type==="HtmlComment"&&/^\s*prettier-ignore(?=\s|$)/m.test(e.body)}function Zc(e){return!!e&&e.type==="LiquidTag"&&e.name==="#"&&/^\s*prettier-ignore(?=\s|$)/m.test(e.markup)}function ta(e){return Zc(e)||Jc(e)}function wt(e){return ta(e)||ta(e.prev)}function ia(e){let t=e.trim().match(/prettier-ignore-attribute(?:s?)(?:\s+(.+))?$/s);return t?(t[1],!0):!1}function na(e){return e?e.type==="HtmlComment"?ia(e.body):e.type==="LiquidTag"&&e.name==="#"?ia(e.markup):!1:!1}function li(e){if(!e||!e.next)return!1;let t=e.source,i;return i=t.indexOf(`
`,e.position.end),i===-1||(i=t.indexOf(`
`,i+1),i===-1)?!1:i<e.next.position.start}function ua(e){return Nr(e)||e.type==="HtmlElement"&&e.children.length>0&&(pi(["body","script","style"],e.name)||e.children.some(t=>Yc(t)))||e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.type!=="TextNode"&&la(e.firstChild)&&(!e.lastChild.isTrailingWhitespaceSensitive||ca(e.lastChild))}function Nr(e){return e.type==="HtmlElement"&&e.children.length>0&&(pi(["html","head","ul","ol","select"],e.name)||e.cssDisplay.startsWith("table")&&e.cssDisplay!=="table-cell")}function aa(e){switch(e.type){case"HtmlComment":return!0;case"HtmlElement":return pi(["script","select"],e.name);case"LiquidTag":return e.prev&&oe(e.prev)||e.next&&oe(e.next)?!1:e.children&&e.children.length>0}return!1}function oa(e){return aa(e)||se(e)&&e.prev&&se(e.prev)||e.prev&&Xc(e.prev)||sa(e)}function Xc(e){return aa(e)||se(e)&&e.next&&(se(e.next)||Te(e.next))||e.type==="HtmlElement"&&pi(["br"],e.name)||sa(e)}function qe(e){return e.isLeadingWhitespaceSensitive&&!e.hasLeadingWhitespace}function Se(e){return e.isTrailingWhitespaceSensitive&&!e.hasTrailingWhitespace}function ci(e){return e.isDanglingWhitespaceSensitive&&!e.hasDanglingWhitespace}function sa(e){return la(e)&&ca(e)}function la(e){return e.type==="Document"?!1:e.hasLeadingWhitespace&&pa(e.source,e.prev?e.prev.position.end:e.parentNode.blockStartPosition?e.parentNode.blockStartPosition.end:e.parentNode.position.start,e.position.start)}function ca(e){return e.type==="Document"?!1:e.hasTrailingWhitespace&&pa(e.source,e.position.end,e.next?e.next.position.start:e.parentNode.blockEndPosition?e.parentNode.blockEndPosition.start:e.parentNode.position.end)}function pa(e,t,i){let n=e.indexOf(`
`,t);return n!==-1&&n<i}function Pt(e){return e.lastChild?Pt(e.lastChild):e}function pi(e,t){return t.length!==1||t[0].type!=="TextNode"?!1:e.includes(t[0].value)}var da=L(()=>{"use strict";X();oi()});import{doc as ep}from"prettier";function Br(e){return e.children?be(e)?!!e.children.find(t=>Br(t)):!!e.children.find(t=>!B(t.children||[])):!1}function Je(e,t,i){return rp(t?"-":e,e,Array.isArray(i)?i:[i])}function rp(e,t,i){return i.includes(dt)?e:i.includes(Ze)?t:i.reduce((n,r)=>ip(e,n,{groupId:r}),t)}var tp,ip,Ze,dt,Xe=L(()=>{"use strict";X();oi();oi();ea();da();({builders:tp}=ep),{ifBreak:ip}=tp;Ze=Symbol("force-no-break"),dt=Symbol("force-break")});function np(e){return lp(e.cssDisplay)&&!ct(e)&&!Pr(e)&&!Or(e)}function up(e){return ha(e)}function ha(e){return cp(e).startsWith("pre")}function vr(e){if(!e)return!1;if(e.type==="LiquidBranch"){let t=e.name===null,i=!!e.firstChild,n=kr(e.parentNode.cssDisplay),r=vr(e.firstChild);return t?n&&(!i||r):n}return e.parentNode&&Ee(e.parentNode)&&e.type==="LiquidVariableOutput"?!0:wr(e)||e.prev&&Aa(e.prev)||!e.parentNode||e.parentNode.cssDisplay==="none"?!1:Re(e.parentNode)?!0:!(ct(e)||!e.prev&&(e.parentNode.type==="Document"||Re(e)||ct(e.parentNode)||!kr(e.parentNode.cssDisplay)||Pr(e.parentNode))||e.prev&&!Ea(e.prev.cssDisplay)||!ya(e.cssDisplay))}function di(e){if(!e)return!1;if(e.type==="LiquidBranch"){let t=e.parentNode&&e.parentNode.lastChild===e,i=!e.lastChild,n=e.lastChild,r=!!n&&di(n);return t?ma(e.parentNode.cssDisplay)&&(i||r):i||r}return Ir(e)?e.lastChild?sp(e.cssDisplay)&&di(e.lastChild):kr(e.cssDisplay):Aa(e)?!1:e.parentNode&&Ee(e.parentNode)&&e.type==="LiquidVariableOutput"?!0:e.next&&wr(e.next)||!e.parentNode||e.parentNode.cssDisplay==="none"?!1:Re(e.parentNode)?!0:!(ct(e)||Ca(e)&&typeof e.name=="string"&&e.name==="br"||!e.next&&(e.parentNode.type==="Document"||Re(e)||ct(e.parentNode)||!Ir(e.parentNode)&&!ma(e.parentNode.cssDisplay)||Or(e.parentNode)||Ee(e))||e.next&&!ya(e.next.cssDisplay)||!Ea(e.cssDisplay))}function mi(e){if(op(e)){if(e.type==="Document")return e.children.length===0&&e.source.length>0;if(e.children){if(e.type==="LiquidTag"&&be(e)&&e.children.length===1)return mi(e.firstChild);if(e.children.length>0)return!1}else return!1}else return!1;return si(e.source,e.blockStartPosition.end)}function fa(e){return e.type==="LiquidBranch"&&!e.prev?e.firstChild?fa(e.firstChild):mi(e):si(e.source,e.position.start-1)}function Da(e){return e.type==="LiquidBranch"||Ir(e)?e.lastChild?Da(e.lastChild):mi(e):si(e.source,e.position.end)}function Ca(e){return Jt.includes(e.type)}function ap(e){return!!e&&Zt.includes(e.type)}function op(e){return"children"in e}function Aa(e){if(!e)return!1;switch(e.type){case"LiquidRawTag":case"LiquidTag":return(e.delimiterWhitespaceEnd??e.whitespaceEnd)==="-";case"LiquidBranch":return!1;case"LiquidVariableOutput":return e.whitespaceEnd==="-";default:return!1}}function wr(e){if(!e)return!1;switch(e.type){case"LiquidRawTag":case"LiquidTag":case"LiquidBranch":case"LiquidVariableOutput":return e.whitespaceStart==="-";default:return!1}}function Pr(e){if(!e)return!1;switch(e.type){case"LiquidRawTag":case"LiquidTag":return e.delimiterWhitespaceEnd===void 0?!1:e.whitespaceEnd==="-";case"LiquidBranch":return!e.parentNode||e.parentNode.type!=="LiquidTag"?!1:e.prev?e.whitespaceEnd==="-":Pr(e.parentNode);case"LiquidVariableOutput":default:return!1}}function Or(e){if(!e)return!1;switch(e.type){case"LiquidRawTag":case"LiquidTag":return e.delimiterWhitespaceStart===void 0?!1:e.delimiterWhitespaceStart==="-";case"LiquidBranch":return!e.parentNode||e.parentNode.type!=="LiquidTag"?!1:e.next?wr(e.next):Or(e.parentNode);case"LiquidVariableOutput":default:return!1}}function sp(e){return mt(e)||e==="inline"||e==="inline-block"}function mt(e){return e==="block"||e==="list-item"||e.startsWith("table")}function kr(e){return!mt(e)&&e!=="inline-block"}function ma(e){return!mt(e)&&e!=="inline-block"}function ya(e){return!mt(e)}function Ea(e){return!mt(e)}function lp(e){return!mt(e)&&e!=="inline-block"}function cp(e){return Ca(e)&&typeof e.name=="string"&&vt[e.name]||ap(e)&&"name"in e&&typeof e.name=="string"&&ai[e.name]||he}function Ir(e){return!!e&&e.type==="HtmlElement"&&e.blockEndPosition.start===e.blockEndPosition.end}var ga,Sa=L(()=>{"use strict";X();Lr();Xe();ga=(e,t)=>{if(t.cssDisplay==="should not be relevant")return;let i={isDanglingWhitespaceSensitive:np(t),isIndentationSensitive:ha(t),isWhitespaceSensitive:up(t),isLeadingWhitespaceSensitive:vr(t)&&(!t.prev||di(t.prev)),isTrailingWhitespaceSensitive:di(t)&&(!t.next||vr(t.next)),hasLeadingWhitespace:fa(t),hasTrailingWhitespace:Da(t),hasDanglingWhitespace:mi(t)};Object.assign(t,i)}});var La,xa=L(()=>{"use strict";La=(e,t)=>{let i=t.children||[],n={firstChild:i[0],lastChild:i[i.length-1]};Object.assign(t,n)}});var ba,Ta=L(()=>{"use strict";$u();Qu();Yu();Sa();xa();ba=[Uu,Ku,La,Gu,ga]});function Rr(e,t){let i=ba.map(n=>n.bind(null,t));for(let n of i)ei(e,n);return e}var qa=L(()=>{"use strict";X();Ta()});import{doc as Na}from"prettier";function Ba(e,t){return!pt(e)&&!e.blockEndPosition&&(wt(e)||Ye(e.parentNode))}function He(e){return!se(e)&&e.prev&&Te(e.prev)&&qe(e)}function gt(e){return Te(e)&&e.lastChild&&Se(e.lastChild)&&Te(Pt(e.lastChild))&&!Re(e)}function ht(e){return Te(e.parentNode)&&!e.next&&Se(e)&&!se(e)&&(oe(Pt(e))||se(Pt(e)))}function Ot(e){return e.next&&Te(e.next)&&oe(e)&&Se(e)}function gi(e){return Te(e.parentNode)&&!e.prev&&qe(e)&&!se(e)}function fp(e,t,i,n){let r=e.getValue();if(qr(r)||r.type==="HtmlDanglingMarkerClose")return"";if(r.attributes.length===0)return Ke(r)?" ":"";let u=na(r.prev),a=e.map(h=>{let A=h.getValue(),y="";A.prev&&Xu(A.source,A.prev,A)&&(y=Fa);let s=i(h,{trailingSpaceGroupId:n});return[y,s]},"attributes"),o=r.source.slice(r.blockStartPosition.start,lt(r.attributes).position.end).includes(`
`),p=t.singleLineLinkTags&&typeof r.name=="string"&&r.name==="link",d=(ra(r)&&r.children.length>0||Fr(r)||Ke(r))&&!o&&r.attributes.length===1&&!se(r.attributes[0]),l=p||d,c=l?" ":t.singleAttributePerLine&&r.attributes.length>1?Fa:Hr,m=u?hp(r.source.slice(Ju(r.attributes).position.start,lt(r.attributes).position.end)):mp(c,a),g;return r.firstChild&&gi(r.firstChild)||pt(r)&&gt(r.parentNode)||l?g=Ke(r)?" ":"":g=t.bracketSameLine?Ke(r)?" ":"":Ke(r)?Hr:gp,[dp([l?" ":Hr,o?pp:"",m]),g]}function Rt(e,t,i,n){let r=e.getValue();return[Dp(r,t),fp(e,t,i,n),ze(r)?"":Cp(r)]}function Dp(e,t){return e.prev&&Ot(e.prev)?"":[_e(e,t),hi(e)]}function _e(e,t){return gi(e)?Vr(e.parentNode):He(e)?ft(e.prev,t):""}function Cp(e){return e.firstChild&&gi(e.firstChild)?"":Vr(e)}function hi(e){if(!e)return"";switch(e.type){case"HtmlComment":return"<!--";case"HtmlElement":case"HtmlSelfClosingElement":return`<${_r(e)}`;case"HtmlDanglingMarkerClose":return`</${_r(e)}`;case"HtmlVoidElement":case"HtmlRawNode":return`<${e.name}`;default:return""}}function Ht(e,t){return[pt(e)?"":Ap(e,t),yp(e,t)]}function Ap(e,t){return e.lastChild&&ht(e.lastChild)?"":[Ep(e,t),Mr(e,t)]}function yp(e,t){return(e.next?He(e.next):gt(e.parentNode))?"":[ft(e,t),Fe(e,t)]}function Ep(e,t){return gt(e)?ft(e.lastChild,t):""}function Fe(e,t){return ht(e)?Mr(e.parentNode,t):Ot(e)?hi(e.next):""}function Mr(e,t){if(!e||Ba(e,t))return"";switch(e.type){case"HtmlElement":return`</${_r(e)}`;case"HtmlRawNode":return`</${e.name}`;default:return""}}function ft(e,t){if(!e||Ba(e,t)||Tr(e))return"";switch(e.type){case"HtmlSelfClosingElement":return"/>";default:return">"}}function Vr(e){if(!e)return"";switch(e.type){case"HtmlComment":return"-->";case"HtmlSelfClosingElement":case"HtmlVoidElement":return"";case"HtmlElement":case"HtmlDanglingMarkerClose":case"HtmlRawNode":return">";default:return">"}}function va(e,t){let i=e.blockStartPosition.end;e.firstChild&&gi(e.firstChild)&&(i-=Vr(e).length);let n=e.blockEndPosition.start;return e.lastChild&&ht(e.lastChild)?n+=Mr(e,t).length:e.lastChild&&gt(e)&&(n-=ft(e.lastChild,t).length),t.originalText.slice(i,n)}function _r(e){return e.name.map(t=>t.type==="TextNode"?t.value:typeof t.markup=="string"?`{{ ${t.markup.trim()} }}`:`{{ ${t.markup.rawSource} }}`).join("")}var pp,dp,mp,Hr,gp,Fa,hp,fi=L(()=>{"use strict";X();Xe();({builders:{breakParent:pp,indent:dp,join:mp,line:Hr,softline:gp,hardline:Fa}}=Na),{replaceEndOfLine:hp}=Na.utils});import{doc as wa}from"prettier";function Ia(e,t,i,n){let r=e.getValue();if(wt(r)){let a=r.prev&&Ot(r.prev)?hi(r).length:0,o=ri(r)+a,p=r.next&&He(r.next),d=p?ft(r,t).length:0,l=ni(r)-d,c=t.originalText.slice(o,l);return r.type==="HtmlElement"&&p&&(c=c.trimEnd()),[_e(r,t),...bp(c),Fe(r,t)]}return i(e,n)}function Wr(e,t){return!e||!t||Ot(e)&&(wt(t)||t.firstChild||ze(t)||t.type==="HtmlElement"&&t.attributes.length>0)||e.type==="HtmlElement"&&pt(e)&&He(t)?"":!t.isLeadingWhitespaceSensitive||oa(t)||He(t)&&e.lastChild&&ht(e.lastChild)&&e.lastChild.lastChild&&ht(e.lastChild.lastChild)?Le:t.hasLeadingWhitespace?xp:jr}function Me(e,t,i,n){let r=e.getValue();if(!r.children)throw new Error("attempting to use printChildren on something without children");if(Nr(r))return[Sp,...e.map(l=>{let c=l.getValue(),m=Wr(c.prev,c);return[m?[m,li(c.prev)?Le:""]:"",Ia(l,t,i,{...n,leadingSpaceGroupId:dt,trailingSpaceGroupId:dt})]},"children")];let u=r.children.map((l,c)=>Symbol(`leading-${c}`)),a=r.children.map((l,c)=>Symbol(`trailing-${c}`)),o=e.map((l,c)=>{let m=l.getValue(),g=[],h=[],A=[],y=[],s=[],f=Wr(m.prev,m),S=Wr(m,m.next);return oe(m)?{leadingHardlines:g,leadingWhitespace:h,leadingDependentWhitespace:A,trailingWhitespace:y,trailingHardlines:s}:(f&&(li(m.prev)?g.push(Le,Le):f===Le?g.push(Le):oe(m.prev)?se(m)&&f===jr?A.push(f):h.push(f):h.push(Lp("",jr,{groupId:a[c-1]}))),S&&(li(m)?oe(m.next)&&s.push(Le,Le):S===Le?oe(m.next)&&s.push(Le):y.push(S)),{leadingHardlines:g,leadingWhitespace:h,leadingDependentWhitespace:A,trailingWhitespace:y,trailingHardlines:s})},"children");return e.map((l,c)=>{let{leadingHardlines:m,leadingWhitespace:g,leadingDependentWhitespace:h,trailingWhitespace:A,trailingHardlines:y}=o[c];return[...m,ka([...g,ka([...h,Ia(l,t,i,{...n,leadingSpaceGroupId:p(o,c),trailingSpaceGroupId:d(o,c)}),...A],{id:a[c]})],{id:u[c]}),...y]},"children");function p(l,c){if(c===0)return n.leadingSpaceGroupId;let m=l[c-1],g=l[c],h=[];return!B(m.trailingHardlines)||!B(g.leadingHardlines)?dt:(B(m.trailingWhitespace)||h.push(a[c-1]),B(g.leadingWhitespace)||h.push(u[c]),B(g.leadingDependentWhitespace)||h.push(a[c]),B(h)&&h.push(Ze),h)}function d(l,c){if(c===l.length-1)return n.trailingSpaceGroupId;let m=l[c],g=l[c+1],h=[];return!B(m.trailingHardlines)||!B(g.leadingHardlines)?dt:(B(m.trailingWhitespace)||h.push(a[c]),B(h)&&h.push(Ze),h)}}var Sp,ka,Lp,xp,jr,Le,bp,Di=L(()=>{"use strict";X();st();Xe();fi();({builders:{breakParent:Sp,group:ka,ifBreak:Lp,line:xp,softline:jr,hardline:Le}}=wa),{replaceEndOfLine:bp}=wa.utils});import{doc as Pa}from"prettier";function Bp(e,t,i,n){let r=e.getValue(),u=Symbol("element-attr-group-id"),a=[];return r.body.value.trim()===""||(a=[e.call(p=>i(p),"body")]),Dt([_e(r,t),Dt(Rt(e,t,i,u),{id:u}),...a,...Ht(r,t),Fe(r,t)])}function Ct(e,t,i,n){let r=e.getValue(),u=Symbol("element-attr-group-id"),a=Symbol("element-group-id");if(r.type==="HtmlRawNode")return Bp(e,t,i,n);if(ze(r))return[Dt(Rt(e,t,i,u),{id:u}),...Ht(r,t),Fe(r,t)];if(Ye(r))return[_e(r,t),Dt(Rt(e,t,i,u),{id:u}),...Np(va(r,t)),...Ht(r,t),Fe(r,t)];let o=l=>Dt([Dt(Rt(e,t,i,u),{id:u}),l,Ht(r,t)],{id:a}),p=()=>r.firstChild.hasLeadingWhitespace&&r.firstChild.isLeadingWhitespaceSensitive?Gr:r.firstChild.type==="TextNode"&&r.isWhitespaceSensitive&&r.isIndentationSensitive?qp($r):$r,d=()=>r.blockEndPosition.start===r.blockEndPosition.end?"":(r.next?He(r.next):gt(r.parentNode))?r.lastChild.hasTrailingWhitespace&&r.lastChild.isTrailingWhitespaceSensitive?" ":"":r.lastChild.hasTrailingWhitespace&&r.lastChild.isTrailingWhitespaceSensitive?Gr:$r;return r.children.length===0?o(r.hasDanglingWhitespace&&r.isDanglingWhitespaceSensitive&&r.blockEndPosition.end!==r.blockEndPosition.start?Gr:""):o([ua(r)?Tp:"",Fp([p(),Me(e,t,i,{leadingSpaceGroupId:a,trailingSpaceGroupId:a})]),d()])}var Tp,qp,Dt,Fp,K0,Gr,$r,Np,Oa=L(()=>{"use strict";X();Xe();fi();Di();({builders:{breakParent:Tp,dedentToRoot:qp,group:Dt,indent:Fp,hardline:K0,line:Gr,softline:$r}}=Pa),{replaceEndOfLine:Np}=Pa.utils});import{doc as Ur}from"prettier";function _a(e,t,i,{leadingSpaceGroupId:n,trailingSpaceGroupId:r}){let u=e.getValue(),a=Je(u.whitespaceStart,qe(u),n),o=Je(u.whitespaceEnd,Se(u),r);if(typeof u.markup!="string"){let d=u.markup.filters.length>0?V:" ";return fe(["{{",a,ue([d,e.call(l=>i(l),"markup")]),d,o,"}}"])}let p=br(u.markup);return p.length>1?fe(["{{",a,ue([I,_t(I,p.map(xr))]),I,o,"}}"]):fe(["{{",a," ",u.markup," ",o,"}}"])}function Op(e,t,i,n,r,u){let a=e.getValue(),{isLiquidStatement:o}=n,{wrapper:p,prefix:d,suffix:l}=o?{wrapper:Ip.removeLines,prefix:"",suffix:()=>""}:{wrapper:fe,prefix:["{%",r," "],suffix:g=>[g,u,"%}"]},c=g=>p([...d,a.name," ",ue(e.call(h=>i(h,n),"markup")),...l(g)]),m=g=>p([...d,a.name," ",ue([_t([",",V],e.map(h=>i(h,n),"markup"))]),...l(g)]);switch(a.name){case"echo":{let g=a.markup.filters.length>0?V:" ";return c(g)}case"assign":{let g=a.markup.value.filters.length>0?V:" ";return c(g)}case"cycle":{let g=a.markup.args.length>1?V:" ";return p([...d,a.name,a.markup.groupName?" ":"",ue(e.call(h=>i(h,n),"markup")),...l(g)])}case"content_for":{let h=a.markup.args.length>0?V:" ";return c(h)}case"include":case"render":{let g=a.markup,h=g.args.length>0||g.variable&&g.alias?V:" ";return c(h)}case"capture":case"increment":case"decrement":case"layout":case"section":return c(" ");case"sections":return c(" ");case"form":{let g=a.markup.length>1?V:" ";return m(g)}case"tablerow":case"for":{let g=a.markup.reversed||a.markup.args.length>0?V:" ";return c(g)}case"paginate":return c(V);case"if":case"elsif":case"unless":{let g=["Comparison","LogicalExpression"].includes(a.markup.type)?V:" ";return c(g)}case"case":return c(" ");case"when":{let g=a.markup.length>1?V:" ";return m(g)}case"liquid":return fe([...d,a.name,ue([I,_t(I,e.map(g=>{let h=g.getValue();return[Gp(h.prev,h),i(g,{...n,isLiquidStatement:!0})]},"markup"))]),...l(I)]);default:return ye(a)}}function Rp(e,t,i,n){let r=e.getValue(),u=r.markup.trim()===""||r.name==="#"&&r.markup.startsWith("#");return Ur.utils.removeLines([r.name,u?"":" ",r.markup])}function Ci(e,t,i,n={}){let r=e.getValue(),{leadingSpaceGroupId:u,trailingSpaceGroupId:a}=n;if(!r.name)return"";let o=Je(r.whitespaceStart,Qa(r),u),p=Je(r.whitespaceEnd,Vp(r),a);if(typeof r.markup!="string")return Op(e,t,i,n,o,p);if(n.isLiquidStatement)return Rp(e,t,i,n);let d=br(r.markup);if(r.name==="liquid")return fe(["{%",o," ",r.name,ue([I,_t(I,Qe(d,!0))]),I,p,"%}"]);if(d.length>1)return fe(["{%",o,ue([I,r.name," ",_t(I,d.map(xr))]),I,p,"%}"]);let l=r.markup;return fe(["{%",o," ",r.name,l?` ${l}`:""," ",p,"%}"])}function Ra(e,t,i,n={}){let r=e.getValue(),{isLiquidStatement:u,leadingSpaceGroupId:a,trailingSpaceGroupId:o}=n;if(!r.children||!r.blockEndPosition)return"";if(u)return["end",r.name];let p=Je(r.delimiterWhitespaceStart??"",Wp(r),a),d=Je(r.delimiterWhitespaceEnd??"",Se(r),o);return fe(["{%",p,` end${r.name} `,d,"%}"])}function Hp(e){return!e.children||!e.blockEndPosition?"":e.source.slice(e.blockStartPosition.end,e.blockEndPosition.start)}function Ma(e,t,i,n){let{leadingSpaceGroupId:r,trailingSpaceGroupId:u}=n,a=e.getValue();if(!a.children||!a.blockEndPosition)return Ci(e,t,i,n);if(!n.isLiquidStatement&&Ye(a))return[Ci(e,t,i,{...n,leadingSpaceGroupId:r,trailingSpaceGroupId:Ze}),...Pp(Hp(a)),Ra(e,t,i,{...n,leadingSpaceGroupId:Ze,trailingSpaceGroupId:u})];let o=Symbol("tag-group"),p=Ci(e,t,i,{...n,leadingSpaceGroupId:r,trailingSpaceGroupId:o}),d=Ra(e,t,i,{...n,leadingSpaceGroupId:o,trailingSpaceGroupId:u}),l=[];return be(a)?(l=jp(e.map(c=>i(c,{...n,leadingSpaceGroupId:o,trailingSpaceGroupId:o}),"children")),a.name==="case"&&(l=ue(l))):a.children.length>0&&(l=ue([zr(a),Me(e,t,i,{...n,leadingSpaceGroupId:o,trailingSpaceGroupId:o})])),fe([p,l,_p(a,n),d],{id:o,shouldBreak:vp.includes(a.name)||Zu(e,t)||Ee(a)||Br(a)})}function Va(e,t,i,{isLiquidStatement:n}){let r=[],u=e.getValue(),a=u.body.value.trim()==="",o=u.isIndentationSensitive||!It(u.source,u.body.position.start,u.body.position.end),p=n?[u.name]:fe(["{%",u.whitespaceStart," ",u.name," ",u.markup?`${u.markup} `:"",u.whitespaceEnd,"%}"]),d=n?["end",u.name]:["{%",u.whitespaceStart," ","end",u.name," ",u.whitespaceEnd,"%}"];return o?r=[u.source.slice(u.blockStartPosition.end,u.blockEndPosition.start)]:a?r=[I]:r=[e.call(l=>i(l),"body")],[p,...r,d]}function Wa(e,t,i,n){let r=e.map(a=>i(a),"nodes");if(r.length===0)return[];let u=[r[0]];for(let a=1;a<r.length;a++)u.push(I),r[a-1][0]!==r[a][0]&&u.push(I),u.push(r[a]);return[ue([I,u]),I]}function ja(e,t,i,n){let r=e.getValue(),u=["@param"];if(r.paramType?.value&&u.push(" ",`{${r.paramType.value}}`),r.required?u.push(" ",r.paramName.value):u.push(" ",`[${r.paramName.value}]`),r.paramDescription?.value){let a=r.paramDescription.value.replace(/\s+/g," ").trim();t.liquidDocParamDash?u.push(" - ",a):u.push(" ",a)}return u}function Ga(e,t,i,n){let r=e.getValue(),u=["@example"],a=r.content.value;return a&&(a.includes(`
`)&&u.push(I),u.push(a.trim())),u}function $a(e,t,i,n){let r=e.getValue(),u=[];return r.isImplicit||u.push("@description "),r.content?.value&&u.push(r.content.value),u}function zr(e){return e.firstChild?e.firstChild.hasLeadingWhitespace&&e.firstChild.isLeadingWhitespaceSensitive?V:Qr:e.isDanglingWhitespaceSensitive&&e.hasDanglingWhitespace?V:""}function _p(e,t){return!t.isLiquidStatement&&Ye(e)||e.type==="LiquidBranch"||!e.blockEndPosition||!e.lastChild?"":e.lastChild.hasTrailingWhitespace&&e.lastChild.isTrailingWhitespaceSensitive?V:Qr}function Mp(e,t,i,n){let r=e.getValue(),u=e.getParentNode();if(B(r.children)&&u.children.length===1||B(r.children)&&!r.hasDanglingWhitespace)return"";if(r.hasDanglingWhitespace)return wp(""," ");let p=r.next&&r.children.length>0&&r.source.slice(lt(r.children).position.end,r.next.position.start).replace(/ |\t/g,"").length>=2;return ue([zr(u),Me(e,t,i,n),p?Ha:""])}function Ua(e,t,i,n){let r=e.getValue();if(!r.name)return Mp(e,t,i,n);let a=r.prev,o=a&&B(a.children),p=r.hasLeadingWhitespace&&!o?V:Qr,d=r.next&&r.children.length>0&&r.source.slice(lt(r.children).position.end,r.next.position.start).replace(/ |\t/g,"").length>=2;return[p,Ci(e,t,i,n),ue([zr(r),Me(e,t,i,n),d?Ha:""])]}function Qa(e){switch(e.type){case"LiquidTag":return!Ee(e)&&qe(e);case"LiquidBranch":return!Ee(e.parentNode)&&qe(e);default:return ye(e)}}function Vp(e){switch(e.type){case"LiquidTag":return be(e)?Qa(e.firstChild):e.children?B(e.children)?ci(e):qe(e.firstChild):Se(e);case"LiquidBranch":return Ee(e.parentNode)?!1:e.firstChild?qe(e.firstChild):ci(e);default:return ye(e)}}function Wp(e){if(e.children)return Ee(e)?!1:be(e)?Se(e.lastChild):B(e.children)?ci(e):Se(e.lastChild);throw new Error("Should only call needsBlockEndLeadingWhitespaceStrippingOnBreak for tags that have closing tags")}function jp(e){return e.filter(t=>t!=="")}function Gp(e,t){return e&&(t.source.slice(e.position.end,t.position.start).match(/\n/g)||[]).length>1?I:""}var vp,kp,Ip,fe,I,wp,ue,_t,V,Qr,Ha,Pp,za=L(()=>{"use strict";X();st();Xe();Di();vp=["for","case"],{builders:kp,utils:Ip}=Ur,{group:fe,hardline:I,ifBreak:wp,indent:ue,join:_t,line:V,softline:Qr,literalline:Ha}=kp,{replaceEndOfLine:Pp}=Ur.utils});import{doc as $p}from"prettier";function Ya(e,t,i){return e.getValue().name,ee("",e.map(r=>{let u=r.getValue();return typeof u=="string"?u:Qp.removeLines(i(r))},"name"))}function Yp(e,t,i){let n=e.getValue(),r=Symbol("attr-group-id"),u=n.source.slice(n.attributePosition.start,n.attributePosition.end),a=t.singleQuote?"'":'"',p=!!n.value.find(d=>oe(d)&&d.value.includes(a))?Ka[a]:a;return[Ya(e,t,i),"=",p,It(n.source,n.attributePosition.start,n.attributePosition.end)?Mt([et([Kr,ee(le,Qe(kt(u),!0))]),Kr],{id:r}):u,p]}function Jp(e){return e.parentNode&&e.parentNode.type==="Document"&&!e.prev&&/^---\r?\n/.test(e.value)}function Zp(e,t,i){let n=e.getValue();if(Jp(n))return n.value;if(n.value.match(/^\s*$/))return"";let u=n.value.split(/(\r?\n){2,}/).filter(Boolean).map(a=>{let o=[],p=a.trim().split(/\s+/g),d=!0;for(let l=0;l<p.length;l++){let c=p[l];d?d=!1:o.push(T),o.push(c)}return zp(o)});return[_e(n,t),ee(le,u),Fe(n,t)]}function Ja(e,t,i,n={}){let r=e.getValue();switch(r.type){case"Document":return[Me(e,t,i,n),le];case"HtmlElement":return Ct(e,t,i,n);case"HtmlDanglingMarkerClose":return Ct(e,t,i,n);case"HtmlVoidElement":return Ct(e,t,i,n);case"HtmlSelfClosingElement":return Ct(e,t,i,n);case"HtmlRawNode":return Ct(e,t,i,n);case"RawMarkup":{if(r.parentNode?.name==="doc")return Wa(e,t,i,n);if((()=>{switch(r.kind){case"typescript":case"javascript":return r.value.includes("`");default:return!1}})())return[r.value.trimEnd(),le];let a=r.parentNode,o=a&&a.type==="LiquidRawTag"&&a.name==="schema"&&!t.indentSchema,p=r.kind!=="markdown"&&!o,d=kt(r.value),c=!!r.value.split(/\r?\n/)[0]?.match(/\S/),m=d.length>0&&d.find(g=>g.trim()!=="")?ee(le,Qe(d,c)):Kr;return p?[et([le,m]),le]:[Kp([le,m]),le]}case"LiquidVariableOutput":return _a(e,t,i,n);case"LiquidRawTag":return Va(e,t,i,n);case"LiquidTag":return Ma(e,t,i,n);case"LiquidBranch":return Ua(e,t,i,n);case"AttrEmpty":return Ya(e,t,i);case"AttrUnquoted":case"AttrSingleQuoted":case"AttrDoubleQuoted":return Yp(e,t,i);case"HtmlDoctype":return r.legacyDoctypeString?r.source.slice(r.position.start,r.position.end):"<!doctype html>";case"HtmlComment":{let u=hr(r.source.slice(r.position.start,r.position.end));if(u){let{startTag:a,body:o,endTag:p}=u;return[a,Mt([et([T,ee(le,Qe(kt(o),!0))]),T]),p]}return r.body.includes("prettier-ignore")||r.body.startsWith("display:")||r.body.startsWith("white-space:")?r.source.slice(r.position.start,r.position.end):["<!--",Mt([et([T,ee(le,Qe(kt(r.body),!0))]),T]),"-->"]}case"AssignMarkup":return[r.name," = ",e.call(u=>i(u),"value")];case"CycleMarkup":{let u=[];r.groupName&&u.push(e.call(o=>i(o),"groupName"),":");let a=r.args.length>1?T:" ";return u.push(a,ee([",",a],e.map(o=>i(o),"args"))),u}case"ForMarkup":{let u=[r.variableName," in ",e.call(a=>i(a),"collection")];return r.reversed&&u.push(T,"reversed"),r.args.length>0&&u.push([T,ee(T,e.map(a=>i(a),"args"))]),u}case"PaginateMarkup":{let u=[e.call(a=>i(a),"collection"),T,"by ",e.call(a=>i(a),"pageSize")];return r.args.length>0&&u.push([",",T,ee([",",T],e.map(a=>i(a),"args"))]),u}case"ContentForMarkup":{let a=[e.call(o=>i(o),"contentForType")];return r.args.length>0&&a.push(",",T,ee([",",T],e.map(o=>i(o),"args"))),a}case"RenderMarkup":{let a=[e.call(o=>i(o),"snippet")];if(r.variable){let o=r.alias?T:" ";a.push(o,e.call(p=>i(p),"variable"))}return r.alias&&a.push(" ","as"," ",r.alias),r.args.length>0&&a.push(",",T,ee([",",T],e.map(o=>i(o),"args"))),a}case"RenderVariableExpression":return[r.kind," ",e.call(u=>i(u),"name")];case"LogicalExpression":return[e.call(u=>i(u),"left"),T,r.relation," ",e.call(u=>i(u),"right")];case"Comparison":return Mt([e.call(u=>i(u),"left"),et([T,r.comparator," ",e.call(u=>i(u),"right")])]);case"LiquidVariable":{let u=e.call(o=>i(o),"expression"),a="";return r.filters.length>0&&(a=[T,ee(T,e.map(o=>i(o),"filters"))]),[u,a]}case"LiquidFilter":{let u=[];if(r.args.length>0){let a=e.map(p=>i(p),"args");if(r.args[0].type!=="NamedArgument"){let[p,...d]=a,l=B(d)?"":et([",",T,ee([",",T],d)]);u=[": ",p,l]}else u=[":",et([T,ee([",",T],a)])]}return Mt(["| ",r.name,...u])}case"NamedArgument":return[r.name,": ",e.call(u=>i(u),"value")];case"TextNode":return Zp(e,t,i);case"YAMLFrontmatter":return["---",le,r.body,"---"];case"String":{let u=t.liquidSingleQuote?"'":'"',o=r.value.includes(u)?Ka[u]:u;return[o,r.value,o]}case"Number":return n.truncate?r.value.replace(/\.\d+$/,""):r.value;case"Range":return["(",e.call(u=>i(u,{truncate:!0}),"start"),"..",e.call(u=>i(u,{truncate:!0}),"end"),")"];case"LiquidLiteral":return r.keyword==="nil"?"null":r.keyword;case"VariableLookup":{let u=[];r.name&&u.push(r.name);let a=e.map((o,p)=>{let d=o.getValue();switch(d.type){case"String":{let l=d.value;return!(p===0&&!r.name)&&/^\D/.test(l)&&/^[a-z0-9_]+\??$/i.test(l)?[".",l]:["[",i(o),"]"]}default:return["[",i(o),"]"]}},"lookups");return[...u,...a]}case"LiquidDocParamNode":return ja(e,t,i,n);case"LiquidDocExampleNode":return Ga(e,t,i,n);case"LiquidDocDescriptionNode":return $a(e,t,i,n);default:return ye(r)}}function eo(e,t){let i=e[t];return Array.isArray(i)||Xp(i)}function Xp(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"}var Up,Qp,zp,Mt,le,Kp,et,ee,T,Kr,Ka,Za,Xa,to=L(()=>{"use strict";X();Ar();st();Pu();qa();Di();Oa();za();fi();Xe();({builders:Up,utils:Qp}=$p),{fill:zp,group:Mt,hardline:le,dedentToRoot:Kp,indent:et,join:ee,line:T,softline:Kr}=Up,Ka={'"':"'","'":'"'};Za={print:Ja,embed:ku,preprocess:Rr,getVisitorKeys(e,t){return Object.keys(e).filter(i=>!t.has(i)&&!Cr.has(i)&&eo(e,i))}},Xa={print:Ja,embed:Iu,preprocess:Rr,getVisitorKeys(e,t){return Object.keys(e).filter(i=>!t.has(i)&&!Cr.has(i)&&eo(e,i))}}});var ed,io,ro=L(()=>{"use strict";to();Dr();ed={[ui]:Za},io={[ui]:Xa}});import{version as td}from"prettier";var id,rd,nd,ud,ih,no,uo=L(()=>{"use strict";Dr();ro();id=[{name:"LiquidHTML",parsers:[fr],extensions:[".liquid"],vscodeLanguageIds:["liquid","Liquid"]}],rd={captureWhitespaceSensitivity:{type:"choice",description:"Specify the global whitespace sensitivity for the capture Liquid tag.",choices:[{value:"strict",description:"Whitespace inside {% capture var %} tags is considered significant."},{value:"ignore",description:"Whitespace inside {% capture var %} tags is considered insignificant."}],category:"LIQUID",default:"strict",since:"1.5.0"},liquidSingleQuote:{type:"boolean",category:"LIQUID",default:!0,description:"Use single quotes instead of double quotes in Liquid tags and objects.",since:"0.2.0"},embeddedSingleQuote:{type:"boolean",category:"LIQUID",default:!0,description:"Use single quotes instead of double quotes in embedded languages (JavaScript, CSS, TypeScript inside <script>, <style> or Liquid equivalent).",since:"0.4.0"},singleLineLinkTags:{type:"boolean",category:"HTML",default:!1,description:"Always print link tags on a single line to remove clutter",since:"0.1.0"},indentSchema:{type:"boolean",category:"LIQUID",default:!1,description:"Indent the contents of the {% schema %} tag",since:"0.1.0"},liquidDocParamDash:{type:"boolean",category:"LIQUID",default:!0,description:"Append a dash (-) to separate descriptions in {% doc %} @param annotations",since:"1.6.4"}},nd={printWidth:120},ud={languages:id,parsers:qu,printers:io,options:rd,defaultOptions:nd},ih=td.split(".")[0],no=ud});var ad=pe((uh,ao)=>{uo();ao.exports=no});export default ad();
/*! Bundled license information:

isobject/index.js:
  (*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2015, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

line-column/lib/line-column.js:
  (**
   * line-column - Convert efficiently index to/from line-column in a string
   * @module  lineColumn
   * @license MIT
   *)
*/
